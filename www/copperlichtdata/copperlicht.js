/**
  * CopperCube player implemented using the CopperLicht 3D Engine, (c) by Nikolaus Gebhardt, Ambiera e.U.
  * http://www.ambiera.com/coppercube
  */
function aa(){return function(){}}function ca(a){return function(b){this[a]=b}}function ea(a){return function(){return this[a]}}function k(a){return function(){return a}}var l,n={};function fa(a,b){this.te=this.fj=this.gh=null;a=document.getElementById(a);if(a==null)n.Wl=false;else{if(this.gh=a.parentNode){this.yh=document.createElement("div");this.gh.appendChild(this.yh);this.cp=a=document.createTextNode("Loading...");this.yh.appendChild(a)}b&&ga(this)}}function ga(a){if(a.fj==null){a.fj=document.createElement("div");a.gh.appendChild(a.fj);var b=document.createTextNode("FPS: 0");a.Em=b;a.fj.appendChild(b);a.frames=0;a.cm=(new Date).getTime()}}
fa.prototype.print=function(a){n.Wl!=false&&ha(this,a,false)};function ka(a,b){if(a.yh)if(b==null)a.yh.style.display="none";else{a.yh.style.display="block";a.cp.nodeValue=b}}function la(a,b,c){ha(a,b,true,c)}function ma(a,b){setTimeout(function(){throw new Error(b);},0)}
function ha(a,b,c,d){if(!(n.Wl==false&&c!=true)){if(a.te==null){a.te=document.createElement("div");a.te.className="cldebug";a.gh.appendChild(a.te)}if(d){a.te.appendChild(document.createElement("br"));c=document.createElement("div");a.te.appendChild(c);c.innerHTML=b}else{a.te.appendChild(document.createElement("br"));b=document.createTextNode(b);a.te.appendChild(b)}}}n.Wl=true;n.na=null;function na(a,b){this.gj=a;this.ob=false;this.wq=b;if(!this.ob&&typeof XMLHttpRequest!="undefined")try{this.ob=new XMLHttpRequest}catch(c){this.ob=false}if(!this.ob&&window.Jp)try{this.ob=window.Jp()}catch(d){this.ob=false}this.load=function(e,f){if(this.ob==false)la(n.na,"Your browser doesn't support AJAX");else{var g=this;try{this.ob.open("GET",this.gj,true);if(this.wq)this.ob.responseType="arraybuffer"}catch(i){if(f)f(i.message);else{la(n.na,"Could not open file "+this.gj+": "+i.message);var j=
navigator.appVersion;j!=null&&j.indexOf("Trident")!=-1&&la(n.na,"<i>Use a web server to run files in IE. Or start them from CopperCube.</i>",true)}return}this.ob.onreadystatechange=function(){if(g.ob.readyState==4){var o=false;if(g.ob.status!=200&&g.ob.status!=0&&g.ob.status!=null)if(f){f("");o=true}else la(n.na,"Could not open file "+g.gj+" (status:"+g.ob.status+")");!o&&e&&e(g.ob.response)}};try{this.ob.send(null)}catch(m){f?f(""):la(n.na,"Could not open file "+g.gj)}}};this.abort=function(){try{this.ob.abort()}catch(e){}}}
;n.PI=3.14159265359;n.Jq=1/3.14159265359;n.Fq=1.570796326795;n.Iq=3.141592653589793;n.yd=3.14159265359/180;n.pe=57.29577951307855;n.zp=1.0E-8;n.yi=function(a){return a*n.pe};n.Pn=function(a){return a*n.yd};n.qa=function(a){return a<1.0E-8&&a>-1.0E-8};n.Ae=function(a){return a+1.0E-8>=1&&a-1.0E-8<=1};n.D=function(a,b){return a+1.0E-8>=b&&a-1.0E-8<=b};n.qc=function(a,b,c){if(a<b)return b;if(a>c)return c;return a};n.Mp=function(a){return a-Math.floor(a)};
n.Zp=function(a,b,c){if(a>b){if(a>c)return a;return c}if(b>c)return b;return c};n.Uq=function(a,b,c){if(a<b){if(a<c)return a;return c}if(b<c)return b;return c};n.Sd=function(a){return(a&4278190080)>>>24};n.Zc=function(a){return(a&16711680)>>16};n.Xc=function(a){return(a&65280)>>8};n.Wc=function(a){return a&255};n.Cf=function(a,b,c,d){a&=255;b&=255;c&=255;d&=255;return a<<24|b<<16|c<<8|d};n.On=function(a){var b=new ra;b.Jf=n.Sd(a)/255;b.nc=n.Zc(a)/255;b.ic=n.Xc(a)/255;b.dc=n.Wc(a)/255;return b};
n.Zn=function(a,b,c){var d=1-c;return n.Cf(n.Sd(a)*c+n.Sd(b)*d,n.Zc(a)*c+n.Zc(b)*d,n.Xc(a)*c+n.Xc(b)*d,n.Wc(a)*c+n.Wc(b)*d)};n.Eo=function(a){if(a>0)return 1;if(a<0)return-1;return 0};function ra(){this.dc=this.ic=this.nc=this.Jf=1}l=ra.prototype;l.e=function(){var a=new ra;a.Jf=this.Jf;a.nc=this.nc;a.ic=this.ic;a.dc=this.dc;return a};l.Jf=1;l.nc=1;l.ic=1;l.dc=1;function q(){return(new Date).getTime()};function s(a,b,c){if(a!=null){this.c=a;this.b=b;this.d=c}}l=s.prototype;l.c=0;l.b=0;l.d=0;l.set=function(a,b,c){this.c=a;this.b=b;this.d=c};l.e=function(){return new s(this.c,this.b,this.d)};l.Ca=function(a){a.c=this.c;a.b=this.b;a.d=this.d};l.substract=function(a){return new s(this.c-a.c,this.b-a.b,this.d-a.d)};function ta(a,b){a.c-=b.c;a.b-=b.b;a.d-=b.d}s.prototype.add=function(a){return new s(this.c+a.c,this.b+a.b,this.d+a.d)};s.prototype.ua=function(a){this.c+=a.c;this.b+=a.b;this.d+=a.d};
function ua(a,b){a.c+=b.c;a.b+=b.b;a.d+=b.d;return a}s.prototype.normalize=function(){var a=this.c*this.c+this.b*this.b+this.d*this.d;if(!(a>-1.0E-7&&a<1.0E-7)){a=1/Math.sqrt(a);this.c*=a;this.b*=a;this.d*=a}};function va(a,b){var c=a.c*a.c+a.b*a.b+a.d*a.d;if(!(c>-1.0E-7&&c<1.0E-7)){c=b/Math.sqrt(c);a.c*=c;a.b*=c;a.d*=c}}function wa(a,b){a.c=b.c;a.b=b.b;a.d=b.d}s.prototype.D=function(a){return n.D(this.c,a.c)&&n.D(this.b,a.b)&&n.D(this.d,a.d)};
function xa(a){return n.qa(a.c)&&n.qa(a.b)&&n.qa(a.d)}s.prototype.getLength=function(){return Math.sqrt(this.c*this.c+this.b*this.b+this.d*this.d)};s.prototype.vb=function(a){var b=a.c-this.c,c=a.b-this.b;a=a.d-this.d;return Math.sqrt(b*b+c*c+a*a)};function ya(a,b){var c=b.c-a.c,d=b.b-a.b;a=b.d-a.d;return c*c+d*d+a*a}function za(a){return a.c*a.c+a.b*a.b+a.d*a.d}function x(a,b){return new s(a.c*b,a.b*b,a.d*b)}function Ca(a,b){a.c*=b;a.b*=b;a.d*=b}function Da(a,b){a.c*=b;a.b*=b;a.d*=b;return a}
function Ea(a,b){a.c*=b.c;a.b*=b.b;a.d*=b.d}function Fa(a,b){return new s(a.c*b.c,a.b*b.b,a.d*b.d)}function Ha(a,b){return new s(a.c/b.c,a.b/b.b,a.d/b.d)}function Ia(a,b){return new s(a.b*b.d-a.d*b.b,a.d*b.c-a.c*b.d,a.c*b.b-a.b*b.c)}s.prototype.ka=function(a){return this.c*a.c+this.b*a.b+this.d*a.d};
function Ja(a){var b=new s;b.b=n.yi(Math.atan2(a.c,a.d));if(b.b<0)b.b+=360;if(b.b>=360)b.b-=360;var c=Math.sqrt(a.c*a.c+a.d*a.d);b.c=n.yi(Math.atan2(c,a.b))-90;if(b.c<0)b.c+=360;if(b.c>=360)b.c-=360;return b}function Ka(a,b){b*=n.yd;var c=Math.cos(b);b=Math.sin(b);var d=a.c,e=a.d;a.c=d*c-e*b;a.d=d*b+e*c}function La(a,b,c){var d=1-c;return new s(b.c*d+a.c*c,b.b*d+a.b*c,b.d*d+a.d*c)}s.prototype.toString=function(){return"(x: "+this.c+" y:"+this.b+" z:"+this.d+")"};
function Ma(){this.Y=new s;this.N=new s}Ma.prototype.Y=null;Ma.prototype.N=null;function Na(a){return a.N.substract(a.Y)}Ma.prototype.getLength=function(){return Na(this).getLength()};function Qa(a,b){if(a==null)this.b=this.c=0;else{this.c=a;this.b=b}}Qa.prototype.c=0;Qa.prototype.b=0;Qa.prototype.set=function(a,b){this.c=a;this.b=b};function y(){this.C=new s;this.M=new s}y.prototype.C=null;y.prototype.M=null;y.prototype.e=function(){var a=new y;a.C=this.C.e();a.M=this.M.e();return a};function Ra(a){a=a.C.add(a.M);Ca(a,0.5);return a}function Sa(a){return a.M.substract(a.C)}
function Ta(a){var b=Ra(a);a=b.substract(a.M);var c=[];c.push(new s(b.c+a.c,b.b+a.b,b.d+a.d));c.push(new s(b.c+a.c,b.b-a.b,b.d+a.d));c.push(new s(b.c+a.c,b.b+a.b,b.d-a.d));c.push(new s(b.c+a.c,b.b-a.b,b.d-a.d));c.push(new s(b.c-a.c,b.b+a.b,b.d+a.d));c.push(new s(b.c-a.c,b.b-a.b,b.d+a.d));c.push(new s(b.c-a.c,b.b+a.b,b.d-a.d));c.push(new s(b.c-a.c,b.b-a.b,b.d-a.d));return c}
function Ua(a,b,c){var d=c.substract(b),e=d.getLength();d.normalize();b=x(b.add(c),0.5);c=e*0.5;e=x(Sa(a),0.5);a=Ra(a).substract(b);if(Math.abs(a.c)>e.c+c*Math.abs(d.c)||Math.abs(a.b)>e.b+c*Math.abs(d.b)||Math.abs(a.d)>e.d+c*Math.abs(d.d))d=false;else{b=e.b*Math.abs(d.d)+e.d*Math.abs(d.b);if(Math.abs(a.b*d.d-a.d*d.b)>b)d=false;else{b=e.c*Math.abs(d.d)+e.d*Math.abs(d.c);if(Math.abs(a.d*d.c-a.c*d.d)>b)d=false;else{b=e.c*Math.abs(d.b)+e.b*Math.abs(d.c);d=Math.abs(a.c*d.b-a.b*d.c)>b?false:true}}}return d}
function z(a,b){var c=b.c,d=b.b;b=b.d;if(c>a.M.c)a.M.c=c;if(d>a.M.b)a.M.b=d;if(b>a.M.d)a.M.d=b;if(c<a.C.c)a.C.c=c;if(d<a.C.b)a.C.b=d;if(b<a.C.d)a.C.d=b}function Va(a,b){return a.C.c<=b.M.c&&a.C.b<=b.M.b&&a.C.d<=b.M.d&&a.M.c>=b.C.c&&a.M.b>=b.C.b&&a.M.d>=b.C.d}y.prototype.Kg=function(a){return a.c>=this.C.c&&a.c<=this.M.c&&a.b>=this.C.b&&a.b<=this.M.b&&a.d>=this.C.d&&a.d<=this.M.d};y.prototype.reset=function(a,b,c){this.M.set(a,b,c);this.C.set(a,b,c)};function Wa(){this.j=new s(0,1,0);ab(this,new s(0,0,0))}Wa.prototype.Xa=0;Wa.prototype.j=null;Wa.prototype.e=function(){var a=new Wa(false);a.j=this.j.e();a.Xa=this.Xa;return a};function ab(a,b){a.Xa=-b.ka(a.j)}Wa.prototype.normalize=function(){var a=1/this.j.getLength();this.j=x(this.j,a);this.Xa*=a};
function bb(a,b,c,d){var e=new s,f=new s;var g=a.j.getLength(),i=a.j.ka(b.j),j=b.j.getLength(),m=g*j-i*i;if(Math.abs(m)<1.0E-8)b=false;else{m=1/m;j=(j*-a.Xa+i*b.Xa)*m;g=(g*-b.Xa+i*a.Xa)*m;Ia(a.j,b.j).Ca(f);a=x(a.j,j);b=x(b.j,g);a.add(b).Ca(e);b=true}if(b)return c.Yl(e,f,d);return false}Wa.prototype.Yl=function(a,b,c){var d=this.j.ka(b);if(d==0)return false;d=-(this.j.ka(a)+this.Xa)/d;a.add(x(b,d)).Ca(c);return true};Wa.prototype.vb=function(a){return a.ka(this.j)+this.Xa};
function cb(a,b){return a.j.ka(b)<=0};function C(a,b,c){this.T=a?a:new s;this.ca=b?b:new s;this.da=c?c:new s}C.prototype.T=null;C.prototype.ca=null;C.prototype.da=null;C.prototype.e=function(){return new C(this.T,this.ca,this.da)};function db(a){var b=new Wa(false),c=a.T,d=a.da;b.j=Ia(a.ca.substract(c),d.substract(c));b.j.normalize();ab(b,c);return b}C.prototype.Kg=function(a){return eb(this,a,this.T,this.ca,this.da)&&eb(this,a,this.ca,this.T,this.da)&&eb(this,a,this.da,this.T,this.ca)};
function eb(a,b,c,d,e){a=e.substract(d);b=Ia(a,b.substract(d));c=Ia(a,c.substract(d));return b.ka(c)>=0}function fb(a){return Ia(a.ca.substract(a.T),a.da.substract(a.T))}C.prototype.Yl=function(a,b){var c=fb(this);c.normalize();var d=c.ka(b);if(n.qa(d))a=null;else{var e=this.T.ka(c);c=-(c.ka(a)-e)/d;a=a.add(x(b,c))}if(a==null)return null;if(this.Kg(a))return a;return null};C.prototype.Ca=function(a){this.T.Ca(a.T);this.ca.Ca(a.ca);this.da.Ca(a.da)};function D(a){if(a==null)a=true;this.L=this.B=this.K=this.J=this.I=this.n=this.A=this.w=this.H=this.t=this.q=this.v=this.G=this.s=this.u=this.p=0;this.Oa=false;if(a){this.L=this.n=this.q=this.p=1;this.Oa=true}}function gb(a){if(a.Oa)return true;a.Oa=n.Ae(a.p)&&n.qa(a.u)&&n.qa(a.s)&&n.qa(a.G)&&n.qa(a.v)&&n.Ae(a.q)&&n.qa(a.t)&&n.qa(a.H)&&n.qa(a.w)&&n.qa(a.A)&&n.Ae(a.n)&&n.qa(a.I)&&n.qa(a.J)&&n.qa(a.K)&&n.qa(a.B)&&n.Ae(a.L);return a.Oa}
function hb(a){if(a.Oa)return true;return n.Ae(a.p)&&n.qa(a.u)&&n.qa(a.s)&&n.qa(a.G)&&n.qa(a.v)&&n.Ae(a.q)&&n.qa(a.t)&&n.qa(a.H)&&n.qa(a.w)&&n.qa(a.A)&&n.Ae(a.n)&&n.qa(a.I)&&n.Ae(a.L)}D.prototype.D=function(a){return n.D(this.p,a.p)&&n.D(this.u,a.u)&&n.D(this.s,a.s)&&n.D(this.G,a.G)&&n.D(this.v,a.v)&&n.D(this.q,a.q)&&n.D(this.t,a.t)&&n.D(this.H,a.H)&&n.D(this.w,a.w)&&n.D(this.A,a.A)&&n.D(this.n,a.n)&&n.D(this.I,a.I)&&n.D(this.J,a.J)&&n.D(this.K,a.K)&&n.D(this.B,a.B)&&n.D(this.L,a.L)};
function ib(a){return new s(a.p,a.q,a.n)}function jb(a,b){var c=b.e();b.c=c.c*a.p+c.b*a.v+c.d*a.w;b.b=c.c*a.u+c.b*a.q+c.d*a.A;b.d=c.c*a.s+c.b*a.t+c.d*a.n}function kb(a,b,c){b.c=c.c*a.p+c.b*a.v+c.d*a.w;b.b=c.c*a.u+c.b*a.q+c.d*a.A;b.d=c.c*a.s+c.b*a.t+c.d*a.n}function lb(a,b){return new s(b.c*a.p+b.b*a.v+b.d*a.w+a.J,b.c*a.u+b.b*a.q+b.d*a.A+a.K,b.c*a.s+b.b*a.t+b.d*a.n+a.B)}function mb(a,b){var c=b.c*a.u+b.b*a.q+b.d*a.A+a.K,d=b.c*a.s+b.b*a.t+b.d*a.n+a.B;b.c=b.c*a.p+b.b*a.v+b.d*a.w+a.J;b.b=c;b.d=d}
function nb(a,b){return new s(b.c+a.J,b.b+a.K,b.d+a.B)}
function E(a,b){var c=new D(false);if(a.Oa){b.Ca(c);return c}if(b.Oa){a.Ca(c);return c}c.p=a.p*b.p+a.v*b.u+a.w*b.s+a.J*b.G;c.u=a.u*b.p+a.q*b.u+a.A*b.s+a.K*b.G;c.s=a.s*b.p+a.t*b.u+a.n*b.s+a.B*b.G;c.G=a.G*b.p+a.H*b.u+a.I*b.s+a.L*b.G;c.v=a.p*b.v+a.v*b.q+a.w*b.t+a.J*b.H;c.q=a.u*b.v+a.q*b.q+a.A*b.t+a.K*b.H;c.t=a.s*b.v+a.t*b.q+a.n*b.t+a.B*b.H;c.H=a.G*b.v+a.H*b.q+a.I*b.t+a.L*b.H;c.w=a.p*b.w+a.v*b.A+a.w*b.n+a.J*b.I;c.A=a.u*b.w+a.q*b.A+a.A*b.n+a.K*b.I;c.n=a.s*b.w+a.t*b.A+a.n*b.n+a.B*b.I;c.I=a.G*b.w+a.H*b.A+
a.I*b.n+a.L*b.I;c.J=a.p*b.J+a.v*b.K+a.w*b.B+a.J*b.L;c.K=a.u*b.J+a.q*b.K+a.A*b.B+a.K*b.L;c.B=a.s*b.J+a.t*b.K+a.n*b.B+a.B*b.L;c.L=a.G*b.J+a.H*b.K+a.I*b.B+a.L*b.L;return c}
function ob(a,b){if(a.Oa){a.Ca(b);return true}var c=(a.p*a.q-a.u*a.v)*(a.n*a.L-a.I*a.B)-(a.p*a.t-a.s*a.v)*(a.A*a.L-a.I*a.K)+(a.p*a.H-a.G*a.v)*(a.A*a.B-a.n*a.K)+(a.u*a.t-a.s*a.q)*(a.w*a.L-a.I*a.J)-(a.u*a.H-a.G*a.q)*(a.w*a.B-a.n*a.J)+(a.s*a.H-a.G*a.t)*(a.w*a.K-a.A*a.J);if(c>-1.0E-7&&c<1.0E-7)return false;c=1/c;b.p=c*(a.q*(a.n*a.L-a.I*a.B)+a.t*(a.I*a.K-a.A*a.L)+a.H*(a.A*a.B-a.n*a.K));b.u=c*(a.A*(a.s*a.L-a.G*a.B)+a.n*(a.G*a.K-a.u*a.L)+a.I*(a.u*a.B-a.s*a.K));b.s=c*(a.K*(a.s*a.H-a.G*a.t)+a.B*(a.G*a.q-a.u*
a.H)+a.L*(a.u*a.t-a.s*a.q));b.G=c*(a.u*(a.H*a.n-a.t*a.I)+a.s*(a.q*a.I-a.H*a.A)+a.G*(a.t*a.A-a.q*a.n));b.v=c*(a.t*(a.w*a.L-a.I*a.J)+a.H*(a.n*a.J-a.w*a.B)+a.v*(a.I*a.B-a.n*a.L));b.q=c*(a.n*(a.p*a.L-a.G*a.J)+a.I*(a.s*a.J-a.p*a.B)+a.w*(a.G*a.B-a.s*a.L));b.t=c*(a.B*(a.p*a.H-a.G*a.v)+a.L*(a.s*a.v-a.p*a.t)+a.J*(a.G*a.t-a.s*a.H));b.H=c*(a.s*(a.H*a.w-a.v*a.I)+a.G*(a.v*a.n-a.t*a.w)+a.p*(a.t*a.I-a.H*a.n));b.w=c*(a.H*(a.w*a.K-a.A*a.J)+a.v*(a.A*a.L-a.I*a.K)+a.q*(a.I*a.J-a.w*a.L));b.A=c*(a.I*(a.p*a.K-a.u*a.J)+
a.w*(a.u*a.L-a.G*a.K)+a.A*(a.G*a.J-a.p*a.L));b.n=c*(a.L*(a.p*a.q-a.u*a.v)+a.J*(a.u*a.H-a.G*a.q)+a.K*(a.G*a.v-a.p*a.H));b.I=c*(a.G*(a.q*a.w-a.v*a.A)+a.p*(a.H*a.A-a.q*a.I)+a.u*(a.v*a.I-a.H*a.w));b.J=c*(a.v*(a.n*a.K-a.A*a.B)+a.q*(a.w*a.B-a.n*a.J)+a.t*(a.A*a.J-a.w*a.K));b.K=c*(a.w*(a.s*a.K-a.u*a.B)+a.A*(a.p*a.B-a.s*a.J)+a.n*(a.u*a.J-a.p*a.K));b.B=c*(a.J*(a.s*a.q-a.u*a.t)+a.K*(a.p*a.t-a.s*a.v)+a.B*(a.u*a.v-a.p*a.q));b.L=c*(a.p*(a.q*a.n-a.t*a.A)+a.u*(a.t*a.w-a.v*a.n)+a.s*(a.v*a.A-a.q*a.w));b.Oa=a.Oa;return true}
function qb(a){var b=new D(false);if(ob(a,b)){b.Ca(a);return true}return false}function rb(a){var b=new D(false);b.p=a.p;b.u=a.v;b.s=a.w;b.G=a.J;b.v=a.u;b.q=a.q;b.t=a.A;b.H=a.K;b.w=a.s;b.A=a.t;b.n=a.n;b.I=a.B;b.J=a.G;b.K=a.H;b.B=a.I;b.L=a.L;b.Oa=a.Oa;return b}
function sb(a,b,c){a.Oa=false;switch(b){case 0:a.p=c;break;case 1:a.u=c;break;case 2:a.s=c;break;case 3:a.G=c;break;case 4:a.v=c;break;case 5:a.q=c;break;case 6:a.t=c;break;case 7:a.H=c;break;case 8:a.w=c;break;case 9:a.A=c;break;case 10:a.n=c;break;case 11:a.I=c;break;case 12:a.J=c;break;case 13:a.K=c;break;case 14:a.B=c;break;case 15:a.L=c;break}}D.prototype.e=function(){var a=new D(false);this.Ca(a);return a};
D.prototype.Ca=function(a){a.p=this.p;a.u=this.u;a.s=this.s;a.G=this.G;a.v=this.v;a.q=this.q;a.t=this.t;a.H=this.H;a.w=this.w;a.A=this.A;a.n=this.n;a.I=this.I;a.J=this.J;a.K=this.K;a.B=this.B;a.L=this.L;a.Oa=this.Oa};function tb(a,b,c,d,e){b=1/Math.tan(b/2);a.p=b/c;a.u=0;a.s=0;a.G=0;a.v=0;a.q=b;a.t=0;a.H=0;a.w=0;a.A=0;a.n=e/(e-d);a.I=1;a.J=0;a.K=0;a.B=-d*e/(e-d);a.L=0;a.Oa=false}
function ub(a,b,c,d){c=c.substract(b);c.normalize();d=Ia(d,c);d.normalize();var e=Ia(c,d);a.p=d.c;a.u=e.c;a.s=c.c;a.G=0;a.v=d.b;a.q=e.b;a.t=c.b;a.H=0;a.w=d.d;a.A=e.d;a.n=c.d;a.I=0;a.J=-d.ka(b);a.K=-e.ka(b);a.B=-c.ka(b);a.L=1;a.Oa=false}function vb(a,b){var c=x(b,n.yd);b=Math.cos(c.c);var d=Math.sin(c.c),e=Math.cos(c.b),f=Math.sin(c.b),g=Math.cos(c.d);c=Math.sin(c.d);a.p=e*g;a.u=e*c;a.s=-f;var i=d*f;f=b*f;a.v=i*g-b*c;a.q=i*c+b*g;a.t=d*e;a.w=f*g+d*c;a.A=f*c-d*g;a.n=b*e;a.Oa=false}
function wb(a){var b=-Math.asin(a.s),c=Math.cos(b);b*=n.pe;var d,e;if(Math.abs(c)>1.0E-8){var f=1/c;d=a.n*f;e=a.t*f;c=Math.atan2(e,d)*n.pe;d=a.p*f;e=a.u*f}else{c=0;d=a.q;e=-a.v}a=Math.atan2(e,d)*n.pe;if(c<0)c+=360;if(b<0)b+=360;if(a<0)a+=360;return new s(c,b,a)}function xb(a,b){a.J=b.c;a.K=b.b;a.B=b.d;a.Oa=false}function yb(a,b){a.p=b.c;a.q=b.b;a.n=b.d;a.Oa=false}function zb(a,b){var c=Ta(b),d;for(d=0;d<8;++d)mb(a,c[d]);a=c[0];b.C=a.e();b.M=a.e();for(d=1;d<8;++d)z(b,c[d])}
D.prototype.toString=function(){return this.p+" "+this.u+" "+this.s+" "+this.G+"\n"+this.v+" "+this.q+" "+this.t+" "+this.H+"\n"+this.w+" "+this.A+" "+this.n+" "+this.I+"\n"+this.J+" "+this.K+" "+this.B+" "+this.L};function Ab(a,b,c,d){this.d=this.b=this.c=0;this.za=1;if(a!=null)this.c=a;if(b!=null)this.b=b;if(c!=null)this.d=c;if(d!=null)this.za=d}l=Ab.prototype;l.c=0;l.b=0;l.d=0;l.za=0;l.e=function(){var a=new Ab;this.Ca(a);return a};l.Ca=function(a){a.c=this.c;a.b=this.b;a.d=this.d;a.za=this.za};function Bb(a,b){return new Ab(a.c*b,a.b*b,a.d*b,a.za*b)}Ab.prototype.ua=function(a){this.c+=a.c;this.b+=a.b;this.d+=a.d;this.za+=a.za;return this};
function Cb(a,b,c,d){var e=b.ka(c);if(e<0){b=Bb(b,-1);e*=-1}if(e+1>0.05)if(1-e>=0.05){var f=Math.acos(e),g=1/Math.sin(f);e=Math.sin(f*(1-d))*g;d=Math.sin(f*d)*g}else{e=1-d;d=d}else{c=new Ab(-b.b,b.c,-b.za,b.d);e=Math.sin(n.PI*(0.5-d));d=Math.sin(n.PI*d)}b=Bb(b,e).ua(Bb(c,d));a.c=b.c;a.b=b.b;a.d=b.d;a.za=b.za}Ab.prototype.ka=function(a){return this.c*a.c+this.b*a.b+this.d*a.d+this.za*a.za};
function Db(a){var b=new D(false),c=a.c,d=a.b,e=a.d;a=a.za;b.p=1-2*d*d-2*e*e;b.v=2*c*d+2*e*a;b.w=2*c*e-2*d*a;b.J=0;b.u=2*c*d-2*e*a;b.q=1-2*c*c-2*e*e;b.A=2*e*d+2*c*a;b.K=0;b.s=2*c*e+2*d*a;b.t=2*e*d-2*c*a;b.n=1-2*c*c-2*d*d;b.B=0;b.G=0;b.H=0;b.I=0;b.L=1;b.Oa=false;return b}function Eb(a,b){var c=a.za*a.za,d=a.c*a.c,e=a.b*a.b,f=a.d*a.d;b.d=Math.atan2(2*(a.c*a.b+a.d*a.za),d-e-f+c);b.c=Math.atan2(2*(a.b*a.d+a.c*a.za),-d-e+f+c);b.b=Math.asin(n.qc(-2*(a.c*a.d-a.b*a.za),-1,1))}
function Fb(a,b,c,d){var e=b*0.5;b=Math.sin(e);var f=Math.cos(e);e=c*0.5;c=Math.sin(e);var g=Math.cos(e);e=d*0.5;d=Math.sin(e);var i=Math.cos(e);e=g*i;i=c*i;g=g*d;c=c*d;a.c=b*e-f*c;a.b=f*i+b*g;a.d=f*g-b*i;a.za=f*e+b*c;a.normalize()}Ab.prototype.normalize=function(){var a=this.c*this.c+this.b*this.b+this.d*this.d+this.za*this.za;if(a!=1){a=a=1/Math.sqrt(a);this.c*=a;this.b*=a;this.d*=a;this.za*=a}};Ab.prototype.toString=function(){return"(x: "+this.c+" y:"+this.b+" z:"+this.d+" w:"+this.za+")"};function Gb(){this.Wa=[];for(var a=0;a<Hb;++a)this.Wa.push(new Wa)}Gb.prototype.Wa=null;var Hb=6;
Gb.prototype.qk=function(a){var b;b=this.Wa[2];b.j.c=a.G+a.p;b.j.b=a.H+a.v;b.j.d=a.I+a.w;b.Xa=a.L+a.J;b=this.Wa[3];b.j.c=a.G-a.p;b.j.b=a.H-a.v;b.j.d=a.I-a.w;b.Xa=a.L-a.J;b=this.Wa[5];b.j.c=a.G-a.u;b.j.b=a.H-a.q;b.j.d=a.I-a.A;b.Xa=a.L-a.K;b=this.Wa[4];b.j.c=a.G+a.u;b.j.b=a.H+a.q;b.j.d=a.I+a.A;b.Xa=a.L+a.K;b=this.Wa[0];b.j.c=a.G-a.s;b.j.b=a.H-a.t;b.j.d=a.I-a.n;b.Xa=a.L-a.B;b=this.Wa[1];b.j.c=a.s;b.j.b=a.t;b.j.d=a.n;b.Xa=a.B;for(a=a=0;a<Hb;++a){b=this.Wa[a];var c=-(1/b.j.getLength());b.j=x(b.j,c);b.Xa*=
c}};function Kb(a){var b=new s;bb(a.Wa[0],a.Wa[5],a.Wa[2],b);return b}function Lb(a){var b=new s;bb(a.Wa[0],a.Wa[5],a.Wa[3],b);return b}function Mb(a){var b=new s;bb(a.Wa[0],a.Wa[4],a.Wa[3],b);return b}function Nb(a){var b=new s;bb(a.Wa[0],a.Wa[4],a.Wa[2],b);return b}Gb.prototype.lb=function(a){var b=new y;b.reset(a.c,a.b,a.d);z(b,Kb(this));z(b,Lb(this));z(b,Nb(this));z(b,Mb(this));return b};
function Ob(a,b){b=Ta(b);for(var c=0;c<6;++c){for(var d=false,e=0;e<8;++e){var f;f=a.Wa[c];f=f.j.ka(b[e])+f.Xa;f=f<-1.0E-6?1:f>1.0E-6?0:2;if(f!=0){d=true;break}}if(!d)return false}return true};function Pb(a){if(a){this.f=new s;this.j=new s;this.pa=4294967295;this.Ba=new Qa;this.yg=new Qa}}l=Pb.prototype;l.f=null;l.j=null;l.pa=0;l.Ba=null;l.yg=null;function Qb(){this.l="";this.kc=false;this.gg=this.hg=this.ce=this.de=this.Ph=this.Ia=this.jd=null}Qb.prototype.Mb=function(){if(this.jd)return this.jd.width;if(this.de!=null)return this.de;return 0};Qb.prototype.Lb=function(){if(this.jd)return this.jd.height;if(this.ce!=null)return this.ce;return 0};function Rb(){this.cb="";this.Zb=null;this.ba=false;this.i="SetOverlayText"}Rb.prototype.h=function(a,b){var c=new Rb;c.cb=this.cb;c.Zb=this.Zb;c.ba=this.ba;if(c.Zb==a)c.Zb=b;return c};
Rb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.Zb!=-1)c=G(b,this.Zb);if(c&&c.lm){var d=this.cb.indexOf("$");if(d!=-1){a=this.cb;for(var e=0,f=true;f;){f=false;d=a.indexOf("$",e);if(d!=-1){e=d+1;var g=a.indexOf("$",d+1);if(g!=-1){f=true;var i=a.substr(d+1,g-(d+1));if(i=Sb(i,false,b)){d=a.substr(0,d);d+=Tb(i);e=d.length+1;d+=a.substr(g+1,a.length-g);a=d}}}}c.lm(a)}else c.lm(this.cb)}}};
function Ub(){this.mj=0;this.mf=null;this.ba=false;this.i="MakeSceneNodeInvisible"}Ub.prototype.h=function(a,b){var c=new Ub;c.mj=this.mj;c.mf=this.mf;c.ba=this.ba;if(c.mf==a)c.mf=b;return c};Ub.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.mf!=-1)c=G(b,this.mf);if(c)switch(this.mj){case 0:c.V=false;break;case 1:c.V=true;break;case 2:c.V=!c.V;break}}};function Vb(){this.Rc=this.Nd=false;this.i="ChangeSceneNodePosition"}
Vb.prototype.h=function(a,b){var c=new Vb;c.oe=this.oe;c.Nc=this.Nc;c.Mc=this.Mc;c.ba=this.ba;c.hf=this.hf;c.ha=this.ha?this.ha.e():null;c.Mi=this.Mi?this.Mi.e():null;c.Nd=this.Nd;c.Rc=this.Rc;if(c.Nc==a)c.Nc=b;if(c.Mc==a)c.Mc=b;return c};
Vb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.Nc!=-1)c=G(b,this.Nc);if(c){var d=null;switch(this.oe){case 0:d=this.ha.e();break;case 1:d=c.f.add(this.ha);break;case 2:var e=null;if(this.hf)e=a;else if(this.Mc!=-1)e=G(b,this.Mc);if(e)d=e.f.add(this.ha);break;case 3:d=this.ha.getLength();a=c.$;b=new s(1,0,0);jb(a,b);if(c.k()=="camera")b=c.fa.substract(c.f);va(b,d);d=c.f.add(b);break;case 4:a=new y;a.reset(this.ha.c,this.ha.b,this.ha.d);z(a,this.Mi);d=new s;d.c=a.C.c+
Math.random()*(a.M.c-a.C.c);d.b=a.C.b+Math.random()*(a.M.b-a.C.b);d.d=a.C.d+Math.random()*(a.M.d-a.C.d);break;case 5:d=b.Qk.add(this.ha);break}if(d!=null)if(this.Nd&&this.Rc>0){a=new Wb;a.Y=c.f.e();a.N=d;a.nd=this.Rc;a.hh=true;Xb(a);Yb(c,a)}else c.f=d}}};function Zb(){this.i="ChangeSceneNodeRotation"}Zb.prototype.h=function(a,b){var c=new Zb;c.xl=this.xl;c.pg=this.pg;c.ba=this.ba;c.ha=this.ha?this.ha.e():null;c.Nj=this.Nj;c.Jl=this.Jl;if(c.pg==a)c.pg=b;return c};
Zb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.pg!=-1)c=G(b,this.pg);if(c){b=null;switch(this.xl){case 0:b=this.ha.e();break;case 1:b=c.R.add(this.ha);break}if(b)if(this.Nj){a=new $b;b=b;var d=c.R,e=this.Jl;a.fn=true;a.re=b.e();a.wm=d.e();a.wl=a.Ma+e;Yb(c,a)}else c.R=b}}};function dc(){this.i="ChangeSceneNodeScale"}dc.prototype.h=function(a,b){var c=new dc;c.zl=this.zl;c.qg=this.qg;c.ba=this.ba;c.ha=this.ha?this.ha.e():null;if(c.qg==a)c.qg=b;return c};
dc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.qg!=-1)c=G(b,this.qg);if(c)switch(this.zl){case 0:c.ma=this.ha.e();break;case 1:c.ma=Fa(c.ma,this.ha);break}}};function ec(){this.i="ChangeSceneNodeTexture"}ec.prototype.h=function(a,b){var c=new ec;c.md=this.md;c.Zb=this.Zb;c.ba=this.ba;c.Bg=this.Bg;c.Kk=this.Kk;if(c.Zb==a)c.Zb=b;return c};
ec.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.Zb!=-1)c=G(b,this.Zb);if(c)if(c.k()=="2doverlay")c.Ia=this.Bg;else{a=c.Yc();if(this.md==0)for(b=0;b<a;++b){var d=c.sc(b);d.bb=this.Bg}else if(this.md==1){d=c.sc(this.Kk);if(d!=null)d.bb=this.Bg}}}};function fc(){this.i="ExecuteJavaScript"}fc.prototype.h=function(){var a=new fc;a.Nk=this.Nk;return a};fc.prototype.execute=function(){eval(this.Nk)};function gc(){this.i="OpenWebpage"}
gc.prototype.h=function(){var a=new gc;a.Ml=this.Ml;a.fa=this.fa;return a};gc.prototype.execute=function(){window.open(this.Ml,this.fa)};function hc(){this.i="SetSceneNodeAnimation"}hc.prototype.h=function(a,b){var c=new hc;c.og=this.og;c.ba=this.ba;c.Ub=this.Ub;c.wk=this.wk;if(c.og==a)c.og=b;return c};hc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.og!=-1)c=G(b,this.og);if(c){a=c;a.k()=="animatedmesh"&&ic(a,this.wk,this.Ub)}}};
function jc(a){this.Aa=a;this.i="SwitchToScene"}jc.prototype.h=function(){var a=new jc;a.lf=this.lf;return a};jc.prototype.execute=function(){this.Aa&&kc(this.Aa,this.lf,true)};function lc(a){this.Aa=a;this.i="SetActiveCamera"}lc.prototype.h=function(a,b){var c=new lc;c.Lf=this.Lf;if(c.Lf==a)c.Lf=b;return c};lc.prototype.execute=function(a,b){if(a&&b){a=null;if(this.Lf!=-1)a=G(b,this.Lf);a!=null&&a.k()=="camera"&&this.Aa&&mc(this.Aa,a)}};
function nc(){this.Nd=false;this.Rc=0;this.i="SetCameraTarget"}nc.prototype.h=function(){var a=new nc;a.oe=this.oe;a.Nc=this.Nc;a.Mc=this.Mc;a.ba=this.ba;a.hf=this.hf;a.ha=this.ha?this.ha.e():null;a.Nd=this.Nd;a.Rc=this.Rc;return a};
nc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.Nc!=-1)c=G(b,this.Nc);var d=c;if(d.k()=="camera"){var e=d.fa.e();switch(this.oe){case 0:e=this.ha.e();break;case 1:e=c.f.add(this.ha);break;case 2:var f=null;if(this.hf)f=a;else if(this.Mc!=-1)f=G(b,this.Mc);if(f)e=f.f.add(this.ha);break}if(e!=null)if(this.Nd&&this.Rc>0){a=new Wb;a.Y=d.fa.e();a.N=e;a.nd=this.Rc;a.hh=true;a.Wg=true;Xb(a);Yb(c,a)}else{oc(d,e);c=N(d,"camerafps");c!=null&&pc(c,e)}}}};
function qc(){this.Ri=this.ee=this.Yh=0;this.of=-1;this.Sc=100;this.i="Shoot";this.nf=-1;this.Uj=false;this.Sg=this.Vg=null;this.Tj=new s}qc.prototype.h=function(a,b){var c=new qc;c.Yh=this.Yh;c.ee=this.ee;c.Ri=this.Ri;c.of=this.of;c.Sc=this.Sc;c.nf=this.nf;c.Uj=this.Uj;c.Vg=this.Vg;c.Sg=this.Sg?this.Sg.h(a,b):null;c.Tj=this.Tj.e();if(c.of==a)c.of=b;if(c.nf==a)c.nf=b;return c};
qc.prototype.execute=function(a,b){if(a&&b){var c=new Ma,d=false,e=null,f=null,g=rc(b,"gameai");if(this.nf!=-1){a=G(b,this.nf);if(a!=null){d=true;e=a;c.Y=Ra(a.lb());c.Y.ua(this.Tj);mb(a.$,c.Y);f=b.ga;if(this.Uj&&f){a=new Ma;a.Y=O(f);a.N=f.fa;f=Na(a);va(f,this.Sc);a.N=a.Y.add(f);sc(this,a,g,this.Sc,b);tc(this,a,g,this.Sc,e,b);c.N=a.N}else{f=a.$;if(this.Vg){a=new D;vb(a,this.Vg);f=E(f,a)}c.N.set(1,0,0);jb(f,c.N);c.N.ua(c.Y)}}}else if(a!=null){e=a;if((f=N(a,"gameai"))&&f.Ak){c=f.Bk;d=true}}if(!d)if(f=
b.ga){e=f;c.Y=O(f);c.N=f.fa;d=true}if(d){d=Na(c);va(d,this.Sc);c.N=c.Y.add(d);sc(this,c,g,this.Sc,b);if(this.Yh==1){g=null;if(this.of!=-1)g=G(b,this.of);if(g){g=g.h(b.La,-1,-1);vc(b.La,g);if(g!=null){g.f=c.Y;P(g);g.V=true;g.Ga=-1;g.l="";b=Na(c);b=Ja(b);g.R=b;b=this.Ri;if(b==0)b=1;d=new Wb;d.Y=c.Y;d.N=c.N;d.nd=c.getLength()/b;d.hh=true;Xb(d);d.tn=true;d.mn=e;d.ln=this.ee;d.bj=true;d.Kf=this.Sg;d.lh=this.Sc/b;Yb(g,d)}}}else if(this.Yh==0){e=tc(this,c,g,this.Sc,e,b);if(e!=null){b.Qk=c.N.e();(c=N(e,"gameai"))&&
wc(c,this.ee,e)}}}}};function sc(a,b,c,d,e){if(c.length!=0)if(a=N(c[0],"gameai"))if(a=a.ja){e=xc(yc.prototype,e,b.Y,b.N,a,true);if(e<d){d=Na(b);va(d,e);b.N=b.Y.add(d)}}}function tc(a,b,c,d,e,f){a=d;d=null;for(var g=0;g<c.length;++g)if(c[g]!==e){var i=N(c[g],"gameai");if(!(i&&!(i.Sb>0))){i={};i.Ja=0;if(zc(yc.prototype,f,c[g],b,false,false,null,i))if(i.Ja<a){a=i.Ja;d=c[g]}}}if(d){c=Na(b);va(c,a);b.N=b.Y.add(c)}return d}function Ac(){this.i="SetOrChangeAVariable"}
Ac.prototype.h=function(){var a=new Ac;a.Kb=this.Kb;a.jl=this.jl;a.xf=this.xf;a.Od=this.Od;return a};
Ac.prototype.execute=function(a,b){if(a&&b)if(this.Kb!=null){a=Sb(this.Kb,true,b);if(a!=null){var c=null;if(this.xf==1){c=Sb(this.Od,false,b);if(c==null)return}if(c==null){c=new Bc;Cc(c,this.Od)}switch(this.jl){case 0:c=c;if(c!=null){a.cc=c.cc;a.Qc=c.Qc;a.jc=c.jc;a.hc=c.hc}break;case 1:Dc(a,Q(a)+Q(c));break;case 2:Dc(a,Q(a)-Q(c));break;case 3:c=Q(c);Dc(a,c!=0?Q(a)/c:0);break;case 4:c=Q(c);Ec(a,c!=0?Math.floor(Q(a)/c):0);break;case 5:Dc(a,Q(a)*Q(c));break;case 6:Ec(a,Math.floor(Q(a)*Q(c)));break}Fc(a,
b)}}};function Gc(){this.i="IfVariable"}Gc.prototype.h=function(a,b){var c=new Gc;c.Kb=this.Kb;c.Ti=this.Ti;c.xf=this.xf;c.Od=this.Od;c.o=this.o?this.o.h(a,b):null;c.ei=this.ei?this.ei.h(a,b):null;return c};
Gc.prototype.execute=function(a,b){if(a&&b)if(this.Kb!=null){var c=Sb(this.Kb,true,b);if(c!=null){var d=null;if(this.xf==1){d=Sb(this.Od,false,b);if(d==null)return}if(d==null){d=new Bc;Cc(d,this.Od)}b=false;switch(this.Ti){case 0:case 1:b=c.cc==0&&d.cc==0?Tb(c)==Tb(d):n.D(Q(c),Q(d));if(this.Ti==1)b=!b;break;case 2:b=Q(c)>Q(d);break;case 3:b=Q(c)<Q(d);break}if(b)this.o&&this.o.execute(a);else this.ei&&this.ei.execute(a)}}};function Hc(){this.Xh=null;this.ba=false;this.i="RestartBehaviors"}
Hc.prototype.h=function(a,b){var c=new Hc;c.Xh=this.Xh;c.ba=this.ba;if(c.ba==a)c.ba=b;return c};Hc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.ba)c=a;else if(this.Xh!=-1)c=G(b,this.Xh);if(c)for(a=0;a<c.ia.length;++a){b=c.ia[a];b!=null&&b.reset()}}};function Ic(){this.i="PlaySound"}Ic.prototype.h=function(a,b){var c=new Ic;c.Oc=this.Oc;c.kg=this.kg;c.ml=this.ml?this.ml.e():null;c.le=this.le;c.Ah=this.Ah;c.af=this.af;c.Eg=this.Eg;c.jg=this.jg;c.Ib=this.Ib;if(c.Oc==a)c.Oc=b;return c};
Ic.prototype.execute=function(a,b){if(!(b==null||this.Ib==null))this.Kc=Jc(n.Rd,this.Ib,this.af,this.Eg)};function Kc(){this.i="StopSpecificSound"}Kc.prototype.h=function(){var a=new Kc;a.Ib=this.Ib;return a};Kc.prototype.execute=function(a,b){b==null||this.Ib==null||Lc(n.Rd,this.Ib.l)};function Mc(){this.i="StopSound"}Mc.prototype.h=function(){var a=new Mc;a.pn=this.pn;a.xp=this.xp;return a};
Mc.prototype.execute=function(){for(var a=n.Rd,b=0;b<a.Cb.length;++b){var c=a.Cb[b];c.qi=true;c.src.$b.pause()}a.Cb=[]};function Nc(){this.i="StoreLoadVariable"}Nc.prototype.h=function(){var a=new Nc;a.sj=this.sj;a.Kb=this.Kb;return a};function Oc(a,b,c,d){a=new Date;a.setDate(a.getDate()+d);c=escape(c)+("; expires="+a.toUTCString());document.cookie=b+"="+c}
function Pc(a,b){a=document.cookie.split(";");for(var c=0;c<a.length;++c){var d=a[c],e=d.indexOf("="),f=d.substr(0,e);f=f.replace(/^\s+|\s+$/g,"");if(f==b)return unescape(d.substr(e+1))}return null}Nc.prototype.execute=function(a,b){if(!(this.Kb==null||this.Kb=="")){a=Sb(this.Kb,this.sj,b);if(a!=null)try{this.sj?Cc(a,Pc(this,a.getName())):Oc(this,a.getName(),Tb(a),99)}catch(c){}}};function Qc(a){this.Je=[];this.ta=a}
Qc.prototype.execute=function(a){for(var b=0;b<this.Je.length;++b)this.Je[b].execute(a,this.ta)};function Rc(a,b){b!=null&&a.Je.push(b)}function Sc(a,b){for(var c=0;c<a.Je.length;++c){var d=a.Je[c];if(d.i==b)return d}return null}Qc.prototype.h=function(a,b){for(var c=new Qc(this.ta),d=0;d<this.Je.length;++d){var e=this.Je[d];e.h!=null&&Rc(c,e.h(a,b))}return c};function Tc(a){this.Aa=a;this.i="RestartScene"}Tc.prototype.h=function(){var a=new Tc;a.lf=this.lf;return a};
Tc.prototype.execute=function(){this.Aa&&this.Aa.im(this.lf)};function Uc(){this.i="ActionDeleteSceneNode"}Uc.prototype.h=function(a,b){var c=new Uc;c.sg=this.sg;c.Ek=this.Ek;c.Fl=this.Fl;if(c.sg==a)c.sg=b;return c};Uc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.Ek)c=a;else if(this.sg!=-1)c=G(b,this.sg);c!=null&&Vc(b,c,this.Fl)}};function Wc(){this.i="ActionCloneSceneNode"}
Wc.prototype.h=function(a,b){var c=new Wc;c.rg=this.rg;c.zk=this.zk;c.o=this.o?this.o.h(a,b):null;if(c.rg==a)c.rg=b;return c};Wc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.zk)c=a;else if(this.rg!=-1)c=G(b,this.rg);if(c){a=c.Ga;var d=-1;d=Xc(b);a=c.h(c.ub,a,d);if(a!=null){a.Ga=d;vc(c.ub,a);b.zi(c,a);if(c=c.ab)if(c=c.h(a)){a.ab=c;b.wd&&Yc(b.wd,c)}this.o&&this.o.execute(a)}}}};function Zc(a){this.i="ActionPlayMovie";this.Aa=a}
Zc.prototype.h=function(a,b){var c=new Zc;c.af=this.af;c.Si=this.Si;c.Kl=this.Kl;c.Oc=this.Oc;c.kg=this.kg;c.Vk=this.Vk;c.Ki=this.Ki?this.Ki.h(a,b):null;c.Ji=this.Ji?this.Ji.h(a,b):null;if(c.Oc==a)c.Oc=b;return c};
Zc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.kg)c=a;else if(this.Oc!=-1)c=G(b,this.Oc);a:{a=this.Aa;var d=this.Kl;b=this.Ki;for(var e=this.Ji,f=0;f<a.Ng.length;++f){var g=a.Ng[f];if(g.filename==d){a=g;break a}}if(this.Si==0){d=new $c(d,a.S);d.ik=b;d.jk=e;a.Ng.push(d);a=d}else a=null}if(a!=null)switch(this.Si){case 0:a.play(this.af);if(c)if(c.k()=="2doverlay")c.Ia=a.Fi;else{c=c.sc(this.Vk);if(c!=null)c.bb=a.Fi}break;case 1:a.pause();break;case 2:a.stop();break}}};
function $c(a,b){this.filename=a;this.qd=null;this.jm=b;this.jk=this.ik=this.Fi=null;this.Yq=this.vi=this.xo=false;this.state=0;this.$l=this.ro=false;this.xq=function(){this.state=2;this.qd.play();this.xo=true;var c=this.Fi,d=ad(this.jm,this.qd,true);c.Ia=d.Ia;c.de=d.de;c.ce=d.ce;c.hg=d.hg;c.gg=d.gg};this.yq=function(){this.state=0;this.vi=true};this.Kp=function(){this.state=0;this.$l=this.vi=true};this.play=function(c){if(!(this.state==2||this.state==1)){if(this.qd)if(this.state==3){this.qd.play();
this.state=2;this.vi=false;return}else if(this.state==0){this.qd.currentTime=0;this.qd.play();this.state=2;this.vi=false;return}var d=document.createElement("video"),e=this;this.qd=d;this.ro=c;d.addEventListener("canplaythrough",function(){e.xq()},true);d.addEventListener("ended",function(){e.yq()},true);d.addEventListener("error",function(){e.Kp()},true);d.preload="auto";d.src=a;d.style.display="none";if(this.ro)d.loop=true;this.state=1;c=document.createElement("canvas");if(c!=null){c.width=16;c.height=
16;this.Fi=ad(this.jm,c,true)}}};this.pause=function(){if(this.state==2){this.qd.pause();this.state=3}};this.stop=function(){if(this.state==2){this.qd.pause();this.state=0}};this.vq=function(){this.xo&&this.state==2&&bd(this.jm,this.Fi,this.qd)};this.Up=function(){if(this.state==0)return true;return this.vi}};function cd(){this.i=0;this.pc=this.bb=null;this.Af=true;this.Bc=this.Pb=false;this.be=true}cd.prototype.qk=function(a){if(a){this.i=a.i;this.Af=a.Af;this.bb=a.bb;this.pc=a.pc;this.Pb=a.Pb;this.Bc=a.Bc;this.be=a.be}};cd.prototype.e=function(){var a=new cd;a.i=this.i;a.Nl=this.Nl;a.Af=this.Af;a.bb=this.bb;a.pc=this.pc;a.Pb=this.Pb;a.Bc=this.Bc;a.be=this.be;return a};function dd(a){return a.i==ed||a.i==fd||a.i==gd||a.i==hd}l=cd.prototype;l.i=0;l.bb=null;l.pc=null;l.Af=true;l.Nl=true;l.Pb=false;
l.be=true;l.Bc=false;var ed=12,fd=13,hd=16,gd=14;function id(){this.g=new y;this.O=new cd;this.ea=[];this.m=[];this.Ua=null;this.Hj=this.Gj=false;this.vd=this.Md=null}l=id.prototype;l.g=null;l.O=null;l.ea=null;l.m=null;l.Ua=null;l.Md=null;l.vd=null;l.update=function(a,b){if(a)this.Gj=true;else if(b)this.Hj=true;else this.Ua=null};function jd(a){if(!a.m||a.m.length==0)a.g.reset(0,0,0);else{var b=a.m[0];a.g.C=b.f.e();a.g.M=b.f.e();for(var c=1;c<a.m.length;++c){b=a.m[c];z(a.g,b.f)}}}
id.prototype.h=function(){var a=new id;a.g=this.g.e();a.O=this.O.e();if(this.m)for(var b=0;b<this.m.length;++b)a.m.push(this.m[b]);if(this.ea)for(b=0;b<this.ea.length;++b)a.ea.push(this.ea[b]);if(this.Md)for(b=0;b<this.Md.length;++b)a.Md.push(this.Md[b].e());if(this.vd)for(b=0;b<this.vd.length;++b)a.vd.push(this.vd[b].e());return a};function kd(){this.g=new y;this.wa=[]}kd.prototype.sd=function(a){this.wa.push(a)};function ld(a){var b=0;if(a.wa)for(var c=0;c<a.wa.length;++c)if(a.wa[c].ea)b+=a.wa[c].ea.length;return b/3}kd.prototype.h=function(){var a=new kd;a.g=this.g.e();if(this.wa)for(var b=0;b<this.wa.length;++b)this.wa[b]&&a.wa.push(this.wa[b].h());return a};n.dp=function(){this.Wk=[]};function md(a,b){for(var c=0;c<a.Wk.length;++c){var d=a.Wk[c];if(d.l==b)return d}return null}n.rp=function(){this.l="";this.zh=new D;this.X=[];this.Yg=[];this.ff=[];this.se=[];this.kf=[];this.zf=[];this.ai=new y;this.ij=new D;this.Re=new D;this.Zf=new D;this.vc=new s(0,0,0);this.Ob=new s(1,1,1);this.wc=new Ab;this.qh=new D;this.Hm=false;this.zo=this.Ao=this.so=-1};n.vp=function(){this.Ei=this.Hi=this.oi=0;this.rn=new s;this.qn=new s};
n.up=function(){this.frame=0;this.scale=new s};n.sp=function(){this.frame=0;this.position=new s};n.tp=function(){this.frame=0;this.rotation=new Ab};n.Gh=function(){this.l="";this.Ac=this.N=this.ud=0};n.Gh.prototype.l="";n.Gh.prototype.ud=0;n.Gh.prototype.N=0;n.Gh.prototype.Ac=0;n.Bl=function(){this.l="";this.td=[];this.dd=0;this.Za=[];this.ra=[];this.jf=[];this.Dk=0;this.Wm=this.Ad=false;this.Cq=this.bp=this.Pk=0;this.pb=new y;this.Uf=1;this.bk=[];this.pm=true;this.$k=[]};n.Bl.prototype.sd=function(a){this.Za.push(a)};
n.Bl.prototype.lb=ea("pb");function nd(a,b,c){if(!(b==null&&c!=null))if(b==null)for(b=0;b<a.jf.length;++b)nd(a,a.jf[b],null);else{b.ij=c==null?b.zh.e():E(c.ij,b.zh);b.Zf=b.zh.e();b.Re=b.ij.e();if(gb(b.qh)){b.qh=b.ij.e();qb(b.qh)}for(c=0;c<b.X.length;++c)nd(a,b.X[c],b)}}
function od(a,b,c,d,e,f,g,i){var j=-1;e=j=-1;var m=c.ff;e=c.se;c=c.kf;var o;if(m.length){j=-1;if(j==-1)for(g=0;g<m.length;++g){o=m[g];if(o.frame>=b){j=g;break}}if(j!=-1)if(a.Uf==0||j==0){o=m[j];o.position.e()}else if(a.Uf==1){o=m[j];m=m[j-1];g=b-o.frame;j=m.frame-b;wa(d,ua(Da(Da(m.position.substract(o.position),1/(g+j)),g),o.position))}}if(e.length){j=-1;if(j==-1)for(g=0;g<e.length;++g){d=e[g];if(d.frame>=b){j=g;break}}if(j!=-1)if(a.Uf==0||j==0){d=e[j];d.scale.e()}else if(a.Uf==1){d=e[j];e=e[j-1];
g=b-d.frame;j=e.frame-b;wa(f,ua(Da(Da(e.scale.substract(d.scale),1/(g+j)),g),d.scale))}}if(c.length){e=-1;if(e==-1)for(g=0;g<c.length;++g){f=c[g];if(f.frame>=b){e=g;break}}if(e!=-1)if(a.Uf==0||e==0){f=c[e];f.rotation.e()}else if(a.Uf==1){f=c[e];a=c[e-1];g=b-f.frame;j=a.frame-b;Cb(i,f.rotation,a.rotation,g/(g+j))}}}function pd(a,b,c){if(b==null)for(b=0;b<a.jf.length;++b)pd(a,a.jf[b],null);else{b.Re=c==null||b.Hm?b.Zf.e():E(c.Re,b.Zf);for(c=0;c<b.X.length;++c)pd(a,b.X[c],b)}}
function qd(a,b,c,d){if(b.zf.length){c=E(b.Re,b.qh);for(var e=new s,f=new s,g=a.Za,i,j=0;j<b.zf.length;++j){var m=b.zf[j];i=m.rn;e.c=i.c*c.p+i.b*c.v+i.d*c.w+c.J;e.b=i.c*c.u+i.b*c.q+i.d*c.A+c.K;e.d=i.c*c.s+i.b*c.t+i.d*c.n+c.B;d&&kb(c,f,m.qn);i=g[m.oi];i=i.m[m.Hi];if(a.bk[m.oi][m.Hi]){i.f.ua(x(e,m.Ei));d&&i.j.ua(x(f,m.Ei))}else{a.bk[m.oi][m.Hi]=true;i.f=x(e,m.Ei);if(d)i.j=x(f,m.Ei)}}}for(c=0;c<b.X.length;++c)qd(a,b.X[c],b,d)}
function rd(a,b){if(!b)return null;var c=a.$k.length;b=b.toLowerCase();for(var d=0;d<c;++d){var e=a.$k[d];if(e.l&&e.l.toLowerCase()==b)return e}return null};function sd(){this.Va=[];this.S=null;this.Jj=""}
function td(a,b,c){if(b==null||b=="")return null;var d=ud(a,b);if(d!=null)return d;if(c){d=new Qb;d.l=b;vd(a,d);d.jd=new Image;d.jd.onload=function(){var e=d,f=a.S;if(f!=null){var g=f.Z,i=g.createTexture(),j=e.jd;if((j.width&j.width-1)!=0||(j.height&j.height-1)!=0){var m=document.createElement("canvas");if(m!=null){m.width=wd(f,j.width);m.height=wd(f,j.height);m.getContext("2d").drawImage(j,0,0,j.width,j.height,0,0,m.width,m.height);j=m}}g.bindTexture(g.TEXTURE_2D,i);xd(f,i,j);g.generateMipmap(g.TEXTURE_2D);
g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR_MIPMAP_NEAREST);g.bindTexture(g.TEXTURE_2D,null);f.rm=true;e.Ia=i;e.kc=true}};d.jd.src=d.l;return d}return null}function ud(a,b){for(var c=0;c<a.Va.length;++c){var d=a.Va[c];if(d.l==b)return d}return null}function vd(a,b){if(b!=null){ud(a,b.l)!=null&&n.na.print("ERROR! Cannot add the texture multiple times: "+b.l);a.Va.push(b)}};function yd(a){this.En=a;this.Fp=a.length;this.Na=0;this.Mq=null;this.Nq=8;this.In=false}function zd(a){return a.Fp-a.Na}function Ad(a,b){return a.En.charCodeAt(b)&255}function S(a){return Bd(a,1)!=0}function Cd(a,b){for(var c=0,d=a.Na,e=d+b;e>d;)c=c*256+Ad(a,--e);a.Na+=b;return c}function Bd(a,b){a=Cd(a,b);if(a&1<<b*8-1)a=(~a+1)*-1;return a}function V(a){return Bd(a,4)}
function W(a){var b;var c=a.En,d=a.Na;b=c.charCodeAt(d+3)&255;var e=c.charCodeAt(d+2)&255,f=c.charCodeAt(d+1)&255;d=c.charCodeAt(d+0)&255;c=(b<<1&255|e>>7)-127;e=(e&127)<<16|f<<8|d;b=e==0&&c==-127?0:(1-2*(b>>7))*(1+e*Math.pow(2,-23))*Math.pow(2,c);a.Na+=4;return b}yd.prototype.va=function(a,b){this.In=a||0;this.buffer=[];if(b){for(var c=a=b.length,d=this.buffer=new Array(a);c;d[a-c]=b.charCodeAt(--c));this.In&&d.reverse()}};yd.prototype.reset=function(){this.Na=0;return this};function Dd(){this.Z=this.canvas=null;this.height=this.width=0;this.rm=false;this.kb=new D;this.Pd=new D;this.ja=new D;this.Nb=new ra;this.Nb.nc=0;this.Nb.ic=0;this.Nb.dc=0;this.Wq=this.Xq=null;this.fb=[];this.sb=[];this.jb=[];this.tb=[];this.Ze=30;this.Vj=this.Hh=this.nl=this.Ym=this.Xm=null;this.Xe=[];this.Vc=this.dj=null;this.Qn=false;this.xi=true;this.Wi=null;this.oh=this.Vf=false;this.Rb=new ra;this.nh=0.01}Dd.prototype.Hh=null;Dd.prototype.Mb=ea("width");
function Ed(a){var b=a.rm;a.rm=false;return b}Dd.prototype.Lb=ea("height");
function Fd(a,b){if(b!=null){var c=a.Z;if(c!=null){var d=null;try{d=a.oh?b.Bc?a.tb[b.i]:a.jb[b.i]:b.Bc?a.sb[b.i]:a.fb[b.i]}catch(e){}if(d!=null){a.Vc=d;c.useProgram(d);if(a.Hh!=null)try{a.Hh(b.i)}catch(f){}d.mm!=null&&d.mm();if(d.Kn){c.enable(c.BLEND);c.blendFunc(d.Ln,d.Jn)}else c.disable(c.BLEND);!b.Af||b.i==ed||b.i==fd||b.i==hd?c.depthMask(false):c.depthMask(true);b.Nl?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST);c.depthFunc(a.Vf?c.GREATER:c.LEQUAL);b.be?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE);
if(b.bb&&b.bb.kc){c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,b.bb.Ia);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,b.Pb?c.CLAMP_TO_EDGE:c.REPEAT);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,b.Pb?c.CLAMP_TO_EDGE:c.REPEAT)}else{c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,null)}c.uniform1i(c.getUniformLocation(d,"texture1"),0);if(b.pc&&b.pc.kc){c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,b.pc.Ia)}else{c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,null)}c.uniform1i(c.getUniformLocation(d,
"texture2"),1)}}}}
function Gd(a,b,c){if(b!=null)if(a.Z!=null){if(b.Ua==null)Hd(a,b);else if(b.Hj){if(!(b.m.length==0||b.ea.length==0))if(b.Ua.Ko<b.m.length||b.Ua.lk<b.ea.length){b.Ua=null;Hd(a,b)}else if(b.Ua!=null){for(var d=a.Z,e=b.m.length,f=b.Ua.to,g=b.Ua.Ip,i=0;i<e;++i){var j=b.m[i];f[i*3+0]=j.f.c;f[i*3+1]=j.f.b;f[i*3+2]=j.f.d;g[i*4+0]=n.Zc(j.pa)/255;g[i*4+1]=n.Xc(j.pa)/255;g[i*4+2]=n.Wc(j.pa)/255;g[i*4+3]=n.Sd(j.pa)/255}d.bindBuffer(d.ARRAY_BUFFER,b.Ua.ok);d.bufferSubData(d.ARRAY_BUFFER,0,f);d.bindBuffer(d.ARRAY_BUFFER,
b.Ua.Sl);d.bufferSubData(d.ARRAY_BUFFER,0,g);if(b.Ua.lk<b.ea.length){e=b.ea.length;f=new WebGLUnsignedShortArray(e);for(g=0;g<e;g+=3){f[g+0]=b.ea[g+0];f[g+1]=b.ea[g+2];f[g+2]=b.ea[g+1]}b.Ua.kk=d.createBuffer();d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,b.Ua.kk);d.bufferData(d.ELEMENT_ARRAY_BUFFER,f,d.STATIC_DRAW);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,null)}b.Ua.lk=b.ea.length;b.Ua.Ko=b.m.length}}else b.Gj&&Id(a,b);b.Gj=false;b.Hj=false;b=b.Ua;c=c;d=a.Z;e=b.qm&&b.Rl;d.enableVertexAttribArray(0);d.enableVertexAttribArray(1);
d.enableVertexAttribArray(2);d.enableVertexAttribArray(3);d.enableVertexAttribArray(4);d.bindBuffer(d.ARRAY_BUFFER,b.ok);d.vertexAttribPointer(0,3,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.Io);d.vertexAttribPointer(1,2,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.Jo);d.vertexAttribPointer(2,2,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.no);d.vertexAttribPointer(3,3,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.Sl);d.vertexAttribPointer(4,4,d.FLOAT,false,0,0);if(e){d.enableVertexAttribArray(5);
d.enableVertexAttribArray(6);d.bindBuffer(d.ARRAY_BUFFER,b.qm);d.vertexAttribPointer(5,3,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.Rl);d.vertexAttribPointer(6,3,d.FLOAT,false,0,0)}d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,b.kk);g=new D(false);a.kb.Ca(g);g=E(g,a.Pd);g=E(g,a.ja);f=a.Vc;f.jo!=null&&d.uniformMatrix4fv(f.jo,false,Jd(a,g));if(f.io!=null){g=new D(true);g=E(g,a.Pd);g=E(g,a.ja);qb(g);g=rb(g);d.uniformMatrix4fv(f.io,false,Jd(a,g))}if(f.fo!=null){g=new D(true);g=E(g,a.Pd);g=E(g,a.ja);d.uniformMatrix4fv(f.fo,
false,Jd(a,g))}f.ho!=null&&d.uniformMatrix4fv(f.ho,false,Jd(a,rb(a.ja)));f.eo!=null&&Ld(a,f,e,e);f.bo!=null&&a.Z.uniform4f(f.bo,a.Rb.nc,a.Rb.ic,a.Rb.dc,1);f.co!=null&&a.Z.uniform1f(f.co,a.nh);if(c==null)c=b.lk;d.drawElements(d.TRIANGLES,c,d.UNSIGNED_SHORT,0);if(e){d.disableVertexAttribArray(5);d.disableVertexAttribArray(6)}}}
function Id(a,b){if(b.Ua!=null){a=a.Z;for(var c=b.m.length,d=b.Ua.to,e=0;e<c;++e){var f=b.m[e];d[e*3+0]=f.f.c;d[e*3+1]=f.f.b;d[e*3+2]=f.f.d}a.bindBuffer(a.ARRAY_BUFFER,b.Ua.ok);a.bufferSubData(a.ARRAY_BUFFER,0,d)}}
function Hd(a,b){if(b.Ua==null){a=a.Z;var c={},d=b.m.length,e=new WebGLFloatArray(d*3),f=new WebGLFloatArray(d*3),g=new WebGLFloatArray(d*2),i=new WebGLFloatArray(d*2),j=new WebGLFloatArray(d*4),m=null,o=null;if(b.Md)m=new WebGLFloatArray(d*3);if(b.vd)o=new WebGLFloatArray(d*3);for(var p=0;p<d;++p){var h=b.m[p];e[p*3+0]=h.f.c;e[p*3+1]=h.f.b;e[p*3+2]=h.f.d;f[p*3+0]=h.j.c;f[p*3+1]=h.j.b;f[p*3+2]=h.j.d;g[p*2+0]=h.Ba.c;g[p*2+1]=h.Ba.b;i[p*2+0]=h.yg.c;i[p*2+1]=h.yg.b;j[p*4+0]=n.Zc(h.pa)/255;j[p*4+1]=n.Xc(h.pa)/
255;j[p*4+2]=n.Wc(h.pa)/255;j[p*4+3]=n.Sd(h.pa)/255}if(m&&o)for(p=0;p<d;++p){h=b.Md[p];m[p*3+0]=h.c;m[p*3+1]=h.b;m[p*3+2]=h.d;h=b.vd[p];o[p*3+0]=h.c;o[p*3+1]=h.b;o[p*3+2]=h.d}p=b.ea.length;h=new WebGLUnsignedShortArray(p);for(var w=0;w<p;w+=3){h[w+0]=b.ea[w+0];h[w+1]=b.ea[w+2];h[w+2]=b.ea[w+1]}c.ok=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.ok);a.bufferData(a.ARRAY_BUFFER,e,a.DYNAMIC_DRAW);c.to=e;c.Io=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Io);a.bufferData(a.ARRAY_BUFFER,g,a.STATIC_DRAW);
c.Jo=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Jo);a.bufferData(a.ARRAY_BUFFER,i,a.STATIC_DRAW);c.no=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.no);a.bufferData(a.ARRAY_BUFFER,f,a.STATIC_DRAW);if(m&&o){c.qm=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.qm);a.bufferData(a.ARRAY_BUFFER,m,a.STATIC_DRAW);c.Rl=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Rl);a.bufferData(a.ARRAY_BUFFER,o,a.STATIC_DRAW)}a.bindBuffer(a.ARRAY_BUFFER,null);c.Sl=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Sl);
a.bufferData(a.ARRAY_BUFFER,j,a.STATIC_DRAW);c.Ip=j;a.bindBuffer(a.ARRAY_BUFFER,null);c.kk=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c.kk);a.bufferData(a.ELEMENT_ARRAY_BUFFER,h,a.STATIC_DRAW);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);c.Z=a;c.lk=p;c.Ko=d;b.Ua=c;b.Gj=false;b.Hj=false}}
function Ld(a,b,c,d){var e=new ArrayBuffer(16*Float32Array.BYTES_PER_ELEMENT),f=new WebGLFloatArray(e);e=new ArrayBuffer(20*Float32Array.BYTES_PER_ELEMENT);var g=new WebGLFloatArray(e);e=new D(true);if(!c&&(a.Xe!=null&&a.Xe.length>0||a.dj!=null))ob(a.ja,e);for(c=0;c<4;++c){var i=c*4;if(a.Xe!=null&&c<a.Xe.length){var j=a.Xe[c],m=lb(e,j.Nh);f[i]=m.c;f[i+1]=m.b;f[i+2]=m.d;m=1;m=d?1/(j.Ea*j.Ea):j.$g;f[i+3]=m;g[i]=j.pa.nc;g[i+1]=j.pa.ic;g[i+2]=j.pa.dc}else{f[i]=1;f[i+1]=0;f[i+2]=0;f[i+3]=1;g[i]=0;g[i+
1]=0;g[i+2]=0}g[i+3]=1}g[16]=a.Nb.nc;g[17]=a.Nb.ic;g[18]=a.Nb.dc;g[19]=1;a.Z.uniform4fv(b.eo,f);a.Z.uniform4fv(b.Yp,g);if(b.$n!=null){d=a.dj;f=null;f=d&&d.Fa?d.Fa.e():new s(1,0,0);Ca(f,-1);jb(e,f);f.normalize();a.Z.uniform3f(b.$n,f.c,f.b,f.d,1);d?a.Z.uniform4f(b.ao,d.pa.nc,d.pa.ic,d.pa.dc,1):a.Z.uniform4f(b.ao,0,0,0,1)}}
function Md(a,b,c,d,e,f,g){if(!(d<=0||e<=0||a.width==0||a.height==0)){var i=true;if(g==null||g==false)i=false;g=a.Z;g.enableVertexAttribArray(0);g.disableVertexAttribArray(1);g.disableVertexAttribArray(2);g.disableVertexAttribArray(3);g.disableVertexAttribArray(4);c=a.height-c;var j=2/a.width,m=2/a.height;b=b*j-1;c=c*m-1;d*=j;e*=m;j=new WebGLFloatArray(12);j[0]=b;j[1]=c;j[2]=0;j[3]=b+d;j[4]=c;j[5]=0;j[6]=b+d;j[7]=c-e;j[8]=0;j[9]=b;j[10]=c-e;j[11]=0;b=new WebGLUnsignedShortArray(6);b[0]=0;b[1]=2;b[2]=
1;b[3]=0;b[4]=3;b[5]=2;c=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,c);g.bufferData(g.ARRAY_BUFFER,j,g.STATIC_DRAW);g.vertexAttribPointer(0,3,g.FLOAT,false,0,0);d=g.createBuffer();g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,d);g.bufferData(g.ELEMENT_ARRAY_BUFFER,b,g.STATIC_DRAW);a.Vc=a.Xm;g.useProgram(a.Vc);g.uniform4f(g.getUniformLocation(a.Vc,"vColor"),n.Zc(f)/255,n.Xc(f)/255,n.Wc(f)/255,i?n.Sd(f)/255:1);g.depthMask(false);g.disable(g.DEPTH_TEST);if(i){g.enable(g.BLEND);g.blendFunc(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA)}else g.disable(g.BLEND);
g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0);g.deleteBuffer(c);g.deleteBuffer(d)}}
function Nd(a,b,c,d,e,f,g,i,j,m,o){if(!(f==null||f.kc==false||d<=0||e<=0||a.width==0||a.height==0)){if(j==null)j=1;if(m==null)m=1;var p=true;if(g==null||g==false)p=false;g=a.Z;g.enableVertexAttribArray(0);g.enableVertexAttribArray(1);g.disableVertexAttribArray(2);g.disableVertexAttribArray(3);g.disableVertexAttribArray(4);c=a.height-c;var h=2/a.width,w=2/a.height;b=b*h-1;c=c*w-1;d*=h;e*=w;h=new WebGLFloatArray(12);h[0]=b;h[1]=c;h[2]=0;h[3]=b+d;h[4]=c;h[5]=0;h[6]=b+d;h[7]=c-e;h[8]=0;h[9]=b;h[10]=c-
e;h[11]=0;b=new WebGLFloatArray(8);b[0]=0;b[1]=0;b[2]=j;b[3]=0;b[4]=j;b[5]=m;b[6]=0;b[7]=m;j=new WebGLUnsignedShortArray(6);j[0]=0;j[1]=2;j[2]=1;j[3]=0;j[4]=3;j[5]=2;m=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,m);g.bufferData(g.ARRAY_BUFFER,h,g.STATIC_DRAW);g.vertexAttribPointer(0,3,g.FLOAT,false,0,0);c=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,c);g.bufferData(g.ARRAY_BUFFER,b,g.STATIC_DRAW);g.vertexAttribPointer(1,2,g.FLOAT,false,0,0);b=g.createBuffer();g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,
b);g.bufferData(g.ELEMENT_ARRAY_BUFFER,j,g.STATIC_DRAW);a.Vc=i==null?a.Ym:i;g.useProgram(a.Vc);g.depthMask(false);g.disable(g.DEPTH_TEST);if(p){g.enable(g.BLEND);g.blendFunc(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA)}else g.disable(g.BLEND);g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,f.Ia);if(o){g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST)}else{g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,
g.TEXTURE_MIN_FILTER,g.LINEAR)}g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.activeTexture(g.TEXTURE1);g.bindTexture(g.TEXTURE_2D,null);g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0);g.deleteBuffer(c);g.deleteBuffer(m);g.deleteBuffer(b);g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,f.Ia);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR_MIPMAP_NEAREST)}}
function Od(a,b,c,d,e,f,g){if(!(f==null||f.kc==false||d<=0||e<=0||a.width==0||a.height==0)){var i=a.Z;a.Vc=a.nl;i.useProgram(a.Vc);i.uniform4f(i.getUniformLocation(a.Vc,"vColor"),n.Zc(g)/255,n.Xc(g)/255,n.Wc(g)/255,n.Sd(g)/255);Nd(a,b,c,d,e,f,true,a.nl,f.hg/f.de,f.gg/f.ce)}}function Pd(a){a.Xe=[];a.dj=null}function Qd(a,b){a.Xe.push(b)}function Rd(a,b){a.dj=b}
function Sd(a){if(!(a.canvas==null||a.Z==null))if(!(a.width==a.canvas.width&&a.height==a.canvas.height)){a.width=a.canvas.width;a.height=a.canvas.height;var b=a.Z;b.viewport&&b.viewport(0,0,a.width,a.height)}}
Dd.prototype.eb=function(a){this.canvas=a;this.Z=null;try{a=["webgl","experimental-webgl","moz-webgl","webkit-3d","3d"];for(var b=0;b<a.length;b++)try{this.Z=this.canvas.getContext(a[b],{alpha:false});if(this.Z!=null)break}catch(c){}}catch(d){}if(this.Z==null)return false;else{if(typeof WebGLFloatArray=="undefined"&&typeof Float32Array!="undefined")try{WebGLFloatArray=Float32Array;WebGLUnsignedShortArray=Uint16Array}catch(e){la(n.na,"Error: Float32 array types for webgl not found.")}if(typeof WebGLFloatArray==
"undefined"&&typeof CanvasFloatArray!="undefined")try{WebGLFloatArray=CanvasFloatArray;WebGLUnsignedShortArray=CanvasUnsignedShortArray}catch(f){la(n.na,"Error: canvas array types for webgl not found.")}a=this.Z;a.getProgramParameter||(a.getProgramParameter=a.getProgrami);a.getShaderParameter||(a.getShaderParameter=a.getShaderi);a=this.Z;this.xi=false;var g=b=Y(this,this.bc,this.Ef),i=Y(this,this.bc,this.Ul),j=Y(this,this.bc,this.Op),m=Y(this,this.bc,this.Ef,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),
o=Y(this,this.bc,this.Un,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),p=Y(this,this.bc,this.Ef,true,a.ONE,a.ONE_MINUS_SRC_COLOR),h=Y(this,this.tk,this.Ul),w=Y(this,this.tk,this.Ul,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),t=Y(this,this.No,this.Ef),L=Y(this,this.Mo,this.Tn),A=Y(this,this.bc,this.Wn);this.Xm=Y(this,this.zq,this.Rp);this.Ym=Y(this,this.Lo,this.Qp);this.nl=Y(this,this.Lo,this.Np);this.fb[0]=g;this.fb[1]=g;this.fb[2]=i;this.fb[3]=i;this.fb[4]=i;this.fb[5]=j;this.fb[ed]=p;this.fb[fd]=m;this.fb[gd]=
o;this.fb[11]=h;this.fb[hd]=w;this.fb[17]=L;this.fb[25]=A;this.fb[23]=t;g=Y(this,this.rd,this.Ef);m=Y(this,this.rd,this.Ef,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);o=Y(this,this.rd,this.Un,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);p=Y(this,this.rd,this.Ef,true,a.ONE,a.ONE_MINUS_SRC_COLOR);h=Y(this,this.uk,this.Rn);w=Y(this,this.uk,this.Rn,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);A=Y(this,this.rd,this.Wn);this.sb[0]=g;this.sb[1]=g;this.sb[2]=i;this.sb[3]=i;this.sb[4]=i;this.sb[5]=j;this.sb[ed]=p;this.sb[fd]=
m;this.sb[gd]=o;this.sb[11]=h;this.sb[hd]=w;this.sb[17]=L;this.sb[25]=A;i=Y(this,this.bc,this.Ff);j=Y(this,this.bc,this.Vl);m=Y(this,this.bc,this.Pp);o=Y(this,this.bc,this.Ff,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);p=Y(this,this.bc,this.Vn,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);h=Y(this,this.bc,this.Ff,true,a.ONE,a.ONE_MINUS_SRC_COLOR);w=Y(this,this.tk,this.Vl);t=Y(this,this.tk,this.Vl,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);L=Y(this,this.No,this.Ff);A=Y(this,this.Mo,this.Tn);var u=Y(this,this.bc,
this.Xn);this.jb[0]=i;this.jb[1]=i;this.jb[2]=j;this.jb[3]=j;this.jb[4]=j;this.jb[5]=m;this.jb[ed]=h;this.jb[fd]=o;this.jb[gd]=p;this.jb[11]=w;this.jb[hd]=t;this.jb[17]=A;this.jb[25]=u;this.jb[23]=L;i=Y(this,this.rd,this.Ff);o=Y(this,this.rd,this.Ff,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);p=Y(this,this.rd,this.Vn,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);h=Y(this,this.rd,this.Ff,true,a.ONE,a.ONE_MINUS_SRC_COLOR);w=Y(this,this.uk,this.Sn);t=Y(this,this.uk,this.Sn,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);
u=Y(this,this.rd,this.Xn);this.tb[0]=i;this.tb[1]=i;this.tb[2]=j;this.tb[3]=j;this.tb[4]=j;this.tb[5]=m;this.tb[ed]=h;this.tb[fd]=o;this.tb[gd]=p;this.tb[11]=w;this.tb[hd]=t;this.tb[17]=A;this.tb[25]=u;this.xi=true;for(i=0;i<this.Ze;++i){if(this.fb[i]==null)this.fb[i]=b;if(this.sb[i]==null)this.sb[i]=b;if(this.jb[i]==null)this.jb[i]=b;if(this.tb[i]==null)this.tb[i]=b}a.useProgram(g);this.Vc=g;a.clearColor(0,0,1,1);a.clearDepth(1);a.depthMask(true);a.enable(a.DEPTH_TEST);a.disable(a.BLEND);a.blendFunc(a.SRC_ALPHA,
a.ONE_MINUS_SRC_ALPHA);a.enable(a.CULL_FACE);a.cullFace(a.BACK);Sd(this)}return true};function Td(a,b,c){var d=a.Z;b=d.createShader(b);if(b==null)return null;d.shaderSource(b,c);d.compileShader(b);if(!d.getShaderParameter(b,d.COMPILE_STATUS)){if(a.xi){d.getShaderInfoLog(b);n.na&&la(n.na)}return null}return b}function Ud(a,b,c,d,e,f,g){b=Y(a,b,c,d,e,f);if(!b)return-1;b.mm=g;a.Ze+=1;a.fb[a.Ze]=b;a.sb[a.Ze]=b;a.jb[a.Ze]=b;a.tb[a.Ze]=b;return a.Ze}
function Vd(a,b){var c=null;try{c=a.fb[b]}catch(d){}return c}
function Y(a,b,c,d,e,f,g){if(g==null)g=false;g=g;var i=a.Z,j=b,m=c;if(j.indexOf("precision ")==-1)j="#ifdef GL_ES\t\t\t\t\t\t\t\t\t\t\t\t\n\tprecision mediump float;\t\t\t\t\t\t\t\t\t\n\t#endif\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n"+b;if(m.indexOf("precision ")==-1)m="#ifdef GL_ES\t\t\t\t\t\t\t\t\t\t\t\t\n\tprecision mediump float;\t\t\t\t\t\t\t\t\t\n\t#endif\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n"+c;b=Td(a,i.VERTEX_SHADER,j);c=Td(a,i.FRAGMENT_SHADER,m);if(!b||!c){a.xi&&n.na.print("Could not create shader program");
g=null}else{m=i.createProgram();i.attachShader(m,b);i.attachShader(m,c);i.bindAttribLocation(m,0,"vPosition");i.bindAttribLocation(m,1,"vTexCoord1");i.bindAttribLocation(m,2,"vTexCoord2");i.bindAttribLocation(m,3,"vNormal");i.bindAttribLocation(m,4,"vColor");if(g){i.bindAttribLocation(m,5,"vBinormal");i.bindAttribLocation(m,6,"vTangent")}i.linkProgram(m);if(i.getProgramParameter(m,i.LINK_STATUS)){i.useProgram(m);i.uniform1i(i.getUniformLocation(m,"texture1"),0);i.uniform1i(i.getUniformLocation(m,
"texture2"),1)}else a.xi&&n.na.print("Could not link program:"+i.getProgramInfoLog(m));g=m}if(g){g.Kn=d?d:false;g.Ln=e;g.Jn=f;a=a.Z;g.jo=a.getUniformLocation(g,"worldviewproj");g.io=a.getUniformLocation(g,"normaltransform");g.fo=a.getUniformLocation(g,"modelviewtransform");g.ho=a.getUniformLocation(g,"worldtransform");g.eo=a.getUniformLocation(g,"arrLightPositions");g.Yp=a.getUniformLocation(g,"arrLightColors");g.$n=a.getUniformLocation(g,"vecDirLight");g.ao=a.getUniformLocation(g,"colorDirLight");
g.bo=a.getUniformLocation(g,"fogColor");g.co=a.getUniformLocation(g,"fogDensity");g.mm=null}return g}Dd.prototype.ad=function(a){a&&a.Ca(this.ja)};function Jd(a,b){return new WebGLFloatArray([b.p,b.u,b.s,b.G,b.v,b.q,b.t,b.H,b.w,b.A,b.n,b.I,b.J,b.K,b.B,b.L])}Dd.prototype.deleteTexture=function(a){if(a!=null){var b=this.Z;b.deleteTexture(a.Ia);a.Ia=null;a.kc=false;a.Ph&&b.deleteFramebuffer(a.Ph);a.Ph=null}};
function Wd(a,b,c){var d=a.Z;a=d.createFramebuffer();d.bindFramebuffer(d.FRAMEBUFFER,a);a.width=b;a.height=c;var e=d.createTexture();d.bindTexture(d.TEXTURE_2D,e);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR_MIPMAP_NEAREST);d.generateMipmap(d.TEXTURE_2D);d.texImage2D(d.TEXTURE_2D,0,d.RGBA,b,c,0,d.RGBA,d.UNSIGNED_BYTE,null);var f=d.createRenderbuffer();d.bindRenderbuffer(d.RENDERBUFFER,f);d.renderbufferStorage(d.RENDERBUFFER,
d.DEPTH_COMPONENT16,b,c);d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,e,0);d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,f);d.bindTexture(d.TEXTURE_2D,null);d.bindRenderbuffer(d.RENDERBUFFER,null);d.bindFramebuffer(d.FRAMEBUFFER,null);d=new Qb;d.l="";d.Ia=e;d.jd=null;d.kc=true;d.de=b;d.ce=c;d.hg=b;d.gg=c;d.Ph=a;return d}
function Xd(a,b,c,d,e){var f=a.Z;if(b!=null){f.bindFramebuffer(f.FRAMEBUFFER,b.Ph);f.viewport(0,0,b.de,b.ce)}else{f.bindFramebuffer(f.FRAMEBUFFER,null);f.viewport(0,0,a.width,a.height)}if(a.Wi!=null){f.bindTexture(f.TEXTURE_2D,a.Wi.Ia);f.generateMipmap(f.TEXTURE_2D)}a.Wi=b;if(c||d){b=0;if(c){b|=f.COLOR_BUFFER_BIT;f.clearColor(n.Zc(e)/255,n.Xc(e)/255,n.Wc(e)/255,1)}if(d){f.clearDepth(a.Vf?0:1);b|=f.DEPTH_BUFFER_BIT}f.clear(b)}return true}
function bd(a,b,c,d){var e=a.Z;b=b.Ia;e.bindTexture(e.TEXTURE_2D,b);var f=c.width,g=c.height;if(c.videoWidth)f=c.videoWidth;if(c.videoHeight)g=c.videoHeight;if((f&f-1)!=0||(g&g-1)!=0){var i=document.createElement("canvas");i.width=wd(a,f);i.height=wd(a,g);var j=i.getContext("2d");j.fillStyle="rgba(0, 255, 255, 1)";j.fillRect(0,0,i.width,i.height);d?j.drawImage(c,0,0,f,g,0,0,f,g):j.drawImage(c,0,0,f,g,0,0,i.width,i.height);c=i}xd(a,b,c);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);
e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST);e.generateMipmap(e.TEXTURE_2D);e.bindTexture(e.TEXTURE_2D,null)}
function ad(a,b,c){var d=a.Z,e=d.createTexture();d.bindTexture(d.TEXTURE_2D,e);var f=b.width,g=b.height;if(b.videoWidth)f=b.videoWidth;if(b.videoHeight)g=b.videoHeight;var i=f,j=g;if((f&f-1)!=0||(g&g-1)!=0){j=document.createElement("canvas");j.width=wd(a,f);j.height=wd(a,g);i=j.getContext("2d");c?i.drawImage(b,0,0,f,g,0,0,f,g):i.drawImage(b,0,0,f,g,0,0,j.width,j.height);b=j;i=j.width;j=j.height}xd(a,e,b);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,
d.NEAREST);d.generateMipmap(d.TEXTURE_2D);d.bindTexture(d.TEXTURE_2D,null);a=new Qb;a.l="";a.Ia=e;a.jd=null;a.kc=true;a.de=i;a.ce=j;a.hg=f;a.gg=g;return a}function wd(a,b){--b;for(a=1;a<32;a<<=1)b|=b>>a;return b+1}
function xd(a,b,c){b=a.Z;try{b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,c)}catch(d){if(d.code!=null&&DOMException!=null&&DOMException.SECURITY_ERR!=null&&d.code==DOMException.SECURITY_ERR){a.Qn==false&&la(n.na,"<i>A security setting in the browser prevented loading a texture.<br/>Workaround: run this from a webserver, change security settings, or allow the specific domain.</i>",true);a.Qn=true}else try{b.texImage2D(b.TEXTURE_2D,0,c)}catch(e){}}}
function Yd(a){if(a.Vj==null){var b=null;b=new id;var c=new Pb(true),d=new Pb(true),e=new Pb(true),f=new Pb(true),g=b.ea;g.push(0);g.push(2);g.push(1);g.push(0);g.push(3);g.push(2);g=b.m;g.push(c);g.push(d);g.push(e);g.push(f);c.Ba.c=1;c.Ba.b=1;c.f.set(1,-1,0);d.Ba.c=1;d.Ba.b=0;d.f.set(1,1,0);e.Ba.c=0;e.Ba.b=0;e.f.set(-1,1,0);f.Ba.c=0;f.Ba.b=1;f.f.set(-1,-1,0);a.Vj=b}}l=Dd.prototype;l.zq="\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = vPosition;\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Lo="\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t\tattribute vec4 vTexCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = vPosition;\t\t\t\t\t\t\t\t\t\tv_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";l.Rp="\t\t\t\t\t\tuniform vec4 vColor;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t         gl_FragColor = vColor;\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Np="\t\t\t\tuniform vec4 vColor;\t\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        float alpha = texture2D(texture1, texCoord).r;\t\t        gl_FragColor = vec4(vColor.rgb, alpha);\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.bc="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv_color = vColor;\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.rd="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform vec4 arrLightPositions[4];\t\t\t\t\t\t\t\n\tuniform vec4 arrLightColors[5]; \t\t\t\t\t\t\t\n\tuniform vec3 vecDirLight; \t\t\t\t\t\t\t\t\t\n\tuniform vec4 colorDirLight; \t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 n = normalize(vec3(vNormal.xyz));\t\t\t\t\t\t\tvec4 currentLight = vec4(0, 0, 0, 1.0);\t\t\t\t\t\t\tfor(int i=0; i<4; ++i)\t\t\t\t\t\t\t\t\t\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec3 lPos = vec3(arrLightPositions[i].xyz);\t\t\t\t\t\tvec3 vertexToLight = lPos - vec3(vPosition.xyz);\t\t\t\tfloat distance = length( vertexToLight );\t\t\t\t\t\tfloat distanceFact = 1.0 / (arrLightPositions[i].w * distance); \t\t\tvertexToLight = normalize(vertexToLight); \t\t\t\t\t\tfloat angle = max(0.0, dot(n, vertexToLight));\t\t\t\t\tfloat intensity = angle * distanceFact;\t\t\t\t\t\t\tcurrentLight = currentLight + vec4(arrLightColors[i].x*intensity, arrLightColors[i].y*intensity, arrLightColors[i].z*intensity, 1.0);\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// directional light\t\t\t\t\t\t\t\t\t\n\t\tfloat dirlight = max(0.0, dot(n, vecDirLight));\t\t\tcurrentLight = currentLight + vec4(colorDirLight.x*dirlight, colorDirLight.y*dirlight, colorDirLight.z*dirlight, 1.0);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// ambient light\t\t\t\t\t\t\t\t\t\t\n\t\tcurrentLight = currentLight + arrLightColors[4];\t\t\t\tcurrentLight = max(currentLight, vec4(0.0,0.0,0.0,0.0));\t\t\tcurrentLight = currentLight * vec4(vColor.x, vColor.y, vColor.z, 1.0);\t\t\tv_color = min(currentLight, vec4(1.0,1.0,1.0,1.0));\t\t\t\tv_color.a = vColor.a;\t// preserve vertex alpha \n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.No="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\tattribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t\t\tv_color = vColor;\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.tk="\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform mat4 normaltransform;\t\t\t\t\t\t\t\t\n\tuniform mat4 modelviewtransform;\t\t\t\t\t\t\t\n\tuniform mat4 worldtransform;\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec3 vNormal;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tgl_Position = worldviewproj * vPosition;\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t//\tuse reflection\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 pos = normalize((modelviewtransform * vPosition).xyz);\t\t\t\t\t\n\t\tvec3 n = normalize((normaltransform * vec4(vNormal, 1)).xyz);\t\t\n\t\tvec3 r = reflect( pos.xyz, n.xyz );\t\t\t\t\t\t\t\n\t\tfloat m = sqrt( r.x*r.x + r.y*r.y + (r.z+1.0)*(r.z+1.0) ); \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t//\ttexture coordinates\t\t\t\t\t\t\t\t\n\t\tv_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\n\t\tv_texCoord2.x = (r.x / (2.0 * m)  + 0.5);\t\t\t\t\t\t\n\t\tv_texCoord2.y = (r.y / (2.0 * m)  + 0.5);\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
l.uk="\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform mat4 normaltransform;\t\t\t\t\t\t\t\t\n\tuniform mat4 modelviewtransform;\t\t\t\t\t\t\t\n\tuniform vec4 arrLightPositions[4];\t\t\t\t\t\t\t\n\tuniform vec4 arrLightColors[5]; \t\t\t\t\t\t\t\n\tuniform vec3 vecDirLight; \t\t\t\t\t\t\t\t\t\n\tuniform vec4 colorDirLight; \t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec3 vNormal;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t//\tuse reflection\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 pos = normalize((modelviewtransform * vPosition).xyz);\t\t\t\t\t\n\t\tvec3 nt = normalize((normaltransform * vec4(vNormal, 1)).xyz);\t\t\n\t\tvec3 r = reflect( pos.xyz, nt.xyz );\t\t\t\t\t\t\t\n\t\tfloat m = sqrt( r.x*r.x + r.y*r.y + (r.z+1.0)*(r.z+1.0) ); \n\t\t//\ttexture coordinates\t\t\t\t\t\t\t\t\n\t\tv_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\n\t\tv_texCoord2.x = r.x / (2.0 * m)  + 0.5;\t\t\t\t\t\t\n\t\tv_texCoord2.y = r.y / (2.0 * m)  + 0.5;\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 n = normalize(vec3(vNormal.xyz));\t\t\t\t\t\t\tvec4 currentLight = vec4(0.0, 0.0, 0.0, 1.0);\t \t\t\t\tfor(int i=0; i<4; ++i)\t\t\t\t\t\t\t\t\t\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec3 lPos = vec3(arrLightPositions[i].xyz);\t\t\t\t\t\tvec3 vertexToLight = lPos - vec3(vPosition.xyz);\t\t\t\tfloat distance = length( vertexToLight );\t\t\t\t\t\tfloat distanceFact = 1.0 / (arrLightPositions[i].w * distance); \t\t\tvertexToLight = normalize(vertexToLight); \t\t\t\t\t\tfloat angle = max(0.0, dot(n, vertexToLight));\t\t\t\t\tfloat intensity = angle * distanceFact;\t\t\t\t\t\t\tcurrentLight = currentLight + vec4(arrLightColors[i].x*intensity, arrLightColors[i].y*intensity, arrLightColors[i].z*intensity, 1.0);\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// directional light\t\t\t\t\t\t\t\t\t\n\t\tfloat dirlight = max(0.0, dot(n, vecDirLight));\t\t\tcurrentLight = currentLight + vec4(colorDirLight.x*dirlight, colorDirLight.y*dirlight, colorDirLight.z*dirlight, 1.0);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// ambient light\t\t\t\t\t\t\t\t\t\t\n\t\tcurrentLight = currentLight + arrLightColors[4];\t\t\t\tcurrentLight = max(currentLight, vec4(0.0,0.0,0.0,0.0));\t\t\t//v_color = currentLight;\t\t\t\t\t\t\t\t\n\t\tv_color = min(currentLight, vec4(1.0,1.0,1.0,1.0));\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
l.Mo="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform mat4 normaltransform;\t\t\t\t\t\t\t\t\n\tuniform mat4 worldtransform;\t\t\t\t\t\t\t\t\n\tuniform vec4 arrLightPositions[4];\t\t\t\t\t\t\t\n\tuniform vec4 arrLightColors[5]; \t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t\n    attribute vec3 vNormal;\t\t\t\t\t\t\t\t\t\t\n\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t\n    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\n\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\n\tattribute vec3 vBinormal;\t\t\t\t\t\t\t\t\t\n\tattribute vec3 vTangent;\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t// Output:\t\t\t\t\t\t\t\t\t\t\t\t\t\n    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\n\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\n\tvarying vec3 v_lightVector[4];\t\t\t\t\t\t\t\t\n\tvarying vec3 v_lightColor[4];\t\t\t\t\t\t\t\t\n\tvarying vec3 ambientLight;\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t\n    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n        gl_Position = worldviewproj * vPosition;\t\t\t\t\n        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\n\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec4 pos = vec4(dot(vPosition, worldtransform[0]), dot(vPosition, worldtransform[1]), dot(vPosition, worldtransform[2]), dot(vPosition, worldtransform[3]));\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t// transform normal, binormal and tangent\t\t\t\t\t\n\t\tvec3 normal = vec3(dot(vNormal.xyz, worldtransform[0].xyz), dot(vNormal.xyz, worldtransform[1].xyz), dot(vNormal.xyz, worldtransform[2].xyz));\t\t\n\t\tvec3 tangent = vec3(dot(vTangent.xyz, worldtransform[0].xyz), dot(vTangent.xyz, worldtransform[1].xyz), dot(vTangent.xyz, worldtransform[2].xyz));     \n\t\tvec3 binormal = vec3(dot(vBinormal.xyz, worldtransform[0].xyz), dot(vBinormal.xyz, worldtransform[1].xyz), dot(vBinormal.xyz, worldtransform[2].xyz));     \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 temp = vec3(0.0, 0.0, 0.0);\t\t\t\t\t\t\n\t\tfor(int i=0; i<4; ++i) \t\t\t\t\t\t\t\t\t\n\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\tvec3 lightPos = vec3(arrLightPositions[i].xyz);\t\t\n\t\t\tvec3 vertexToLight = lightPos - vec3(pos.xyz); \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// transform the light vector 1 with U, V, W\t\t\n\t\t\ttemp.x = dot(tangent.xyz, vertexToLight);\t\t\t\t\n\t\t\ttemp.y = dot(binormal.xyz, vertexToLight);\t\t\t\t\n\t\t\ttemp.z = dot(normal.xyz, vertexToLight);\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// normalize light vector\t\t\t\t\t\n\t\t\ttemp = normalize(temp); \t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// move from -1..1 to 0..1 and put into output\t\t\n\t\t\ttemp = temp * 0.5;\t\t\t\t\t\t\t\n\t\t\ttemp = temp + vec3(0.5,0.5,0.5);\t\t\t\n\t\t\tv_lightVector[i] = temp;\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// calculate attenuation\t\t\t\t\t\n\t\t\tfloat distanceFact = 1.0 / sqrt(dot(vertexToLight, vertexToLight) * arrLightPositions[i].w); \n\t\t\tv_lightColor[i] = min(vec3(arrLightColors[i].x*distanceFact, arrLightColors[i].y*distanceFact, arrLightColors[i].z*distanceFact), vec3(1,1,1));\t\t\n\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t// ambient light\n\t\tambientLight = arrLightColors[4].xyz;\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
l.Qp="\t\t\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        gl_FragColor = texture2D(texture1, texCoord);\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Ef="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        gl_FragColor = texture2D(texture1, texCoord) * v_color;\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Un="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        gl_FragColor = texture2D(texture1, texCoord) * v_color;\t\t\tif(gl_FragColor.a < 0.5)\t\t\t\t\t\t\t\t\t\t\tdiscard;\t\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Ul="\t\t\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tgl_FragColor = col1 * col2;\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Op="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tgl_FragColor = col1 * col2 * 3.0;\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Rn="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tvec4 final = col1 * col2 * v_color;\t\t\t\t\t\t\t\tgl_FragColor = vec4(final.x, final.y, final.z, col1.w);\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Tn="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\tvarying vec3 v_lightVector[4];\t\t\t\t\t\t\t\t\tvarying vec3 v_lightColor[4];\t\t\t\t\t\t\t\t\tvarying vec3 ambientLight;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec4 colorMapSample = texture2D(texture1, v_texCoord1);\t\t\tvec3 normalMapVector = texture2D(texture2, v_texCoord1).xyz;\t\t//normalMapVector -= vec3(0.5, 0.5, 0.5);\t\t\t\t\t\n\t\t//normalMapVector = normalize(normalMapVector); \t\t\t\n\t\tnormalMapVector *= vec3(2.0, 2.0, 2.0);\t\t\t\t\t\n\t\tnormalMapVector -= vec3(1.0, 1.0, 1.0);\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 totallight = vec3(0.0, 0.0, 0.0);\t\t\t\t\t\t\n\t\tfor(int i=0; i<4; ++i) \t\t\t\t\t\t\t\t\t\n\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// process light\t\t\t\t\t\t\t\t\t\n\t\t\t//vec3 lightvect = v_lightVector[i] + vec3(-0.5, -0.5, -0.5); \n\t\t\tvec3 lightvect = (v_lightVector[i] * vec3(2.0, 2.0, 2.0)) - vec3(1.0, 1.0, 1.0); \n\t\t\tlightvect = normalize(lightvect);\t\t\t\t\t\n\t\t\tfloat luminance = dot(lightvect, normalMapVector); // normal DOT light\t\t\n\t\t\tluminance = clamp(luminance, 0.0, 1.0);\t// clamp result to positive numbers\t\t\n\t\t\tlightvect = luminance * v_lightColor[i];\t// luminance * light color \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// add to previously calculated lights\t\t\t\t\n\t\t\ttotallight = totallight + lightvect;\t\t\t\t\n\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\ttotallight = totallight + ambientLight;\t\t\t\t\t\n\t\tgl_FragColor = colorMapSample * vec4(totallight.x, totallight.y, totallight.z, 0.0);\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
l.Wn="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\t\tvec4 color1 = texture2D(texture1, texCoord);\t\t\t\t\tvec4 color2 = texture2D(texture2, texCoord);\t\t\t\t\tcolor1 = ((1.0 - v_color.w) * color1) + (v_color.w * color2);\t// interpolate texture colors based on vertex alpha\t \n\t\tgl_FragColor = color1 * v_color;\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Ff="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform vec4 fogColor;\t\t\t\t\t\t\t\t\t\t\tuniform float fogDensity;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\t\tvec4 tmpFragColor = texture2D(texture1, texCoord) * v_color;\t\t\t\t\t\t\t\t\tfloat z = gl_FragCoord.z / gl_FragCoord.w; \t\t\t\t\t\t\t\t\t\t\t\t\n\t\tfloat fogFactor = clamp(exp2( -fogDensity * z * 1.442695), 0.0, 1.0); \t\n\t\tgl_FragColor = mix(fogColor, tmpFragColor, fogFactor);\t\t\t\t\t\t\t\t\t\n\t\tgl_FragColor.a = tmpFragColor.a;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Vl="\t\t\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform vec4 fogColor;\t\t\t\t\t\t\t\t\t\t\tuniform float fogDensity;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tvec4 tmpFragColor = col1 * col2;\t\t\t\t\t\t\t\t\tfloat z = gl_FragCoord.z / gl_FragCoord.w; \t\t\t\t\t\t\t\t\t\t\t\t\n\t\tfloat fogFactor = clamp(exp2( -fogDensity * z * 1.442695), 0.0, 1.0); \t\n\t\tgl_FragColor = mix(fogColor, tmpFragColor, fogFactor);\t\t\t\t\t\t\t\t\t\n\t\tgl_FragColor.a = tmpFragColor.a;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Vn="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform vec4 fogColor;\t\t\t\t\t\t\t\t\t\t\tuniform float fogDensity;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\t\tvec4 tmpFragColor = texture2D(texture1, texCoord) * v_color;\t\t\t\t\t\t\t\t\tif(tmpFragColor.a < 0.5)\t\t\t\t\t\t\t\t\t\t\tdiscard;\t\t\t\t\t\t\t\t\t\t\t\t\tfloat z = gl_FragCoord.z / gl_FragCoord.w; \t\t\t\t\t\t\t\t\t\t\t\t\n\t\tfloat fogFactor = clamp(exp2( -fogDensity * z * 1.442695), 0.0, 1.0); \t\n\t\tgl_FragColor = mix(fogColor, tmpFragColor, fogFactor);\t\t\t\t\t\t\t\t\t\n\t\tgl_FragColor.a = tmpFragColor.a;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Pp="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform vec4 fogColor;\t\t\t\t\t\t\t\t\t\t\tuniform float fogDensity;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tvec4 tmpFragColor = col1 * col2 * 3.0;\t\t\t\t\t\t\t\t\tfloat z = gl_FragCoord.z / gl_FragCoord.w; \t\t\t\t\t\t\t\t\t\t\t\t\n\t\tfloat fogFactor = clamp(exp2( -fogDensity * z * 1.442695), 0.0, 1.0); \t\n\t\tgl_FragColor = mix(fogColor, tmpFragColor, fogFactor);\t\t\t\t\t\t\t\t\t\n\t\tgl_FragColor.a = tmpFragColor.a;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Xn="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform vec4 fogColor;\t\t\t\t\t\t\t\t\t\t\tuniform float fogDensity;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\t\tvec4 color1 = texture2D(texture1, texCoord);\t\t\t\t\tvec4 color2 = texture2D(texture2, texCoord);\t\t\t\t\tcolor1 = ((1.0 - v_color.w) * color1) + (v_color.w * color2);\t// interpolate texture colors based on vertex alpha\t \n\t\tvec4 tmpFragColor = color1 * v_color;\t\t\t\t\t\t\t\t\tfloat z = gl_FragCoord.z / gl_FragCoord.w; \t\t\t\t\t\t\t\t\t\t\t\t\n\t\tfloat fogFactor = clamp(exp2( -fogDensity * z * 1.442695), 0.0, 1.0); \t\n\t\tgl_FragColor = mix(fogColor, tmpFragColor, fogFactor);\t\t\t\t\t\t\t\t\t\n\t\tgl_FragColor.a = tmpFragColor.a;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
l.Sn="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform vec4 fogColor;\t\t\t\t\t\t\t\t\t\t\tuniform float fogDensity;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tvec4 final = col1 * col2 * v_color;\t\t\t\t\t\t\t\tvec4 tmpFragColor = vec4(final.x, final.y, final.z, col1.w);\t\t\t\t\t\t\t\t\tfloat z = gl_FragCoord.z / gl_FragCoord.w; \t\t\t\t\t\t\t\t\t\t\t\t\n\t\tfloat fogFactor = clamp(exp2( -fogDensity * z * 1.442695), 0.0, 1.0); \t\n\t\tgl_FragColor = mix(fogColor, tmpFragColor, fogFactor);\t\t\t\t\t\t\t\t\t\n\t\tgl_FragColor.a = tmpFragColor.a;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";function Zd(){this.Cl=[];this.Cb=[];this.he=1}function $d(a,b){for(var c=0;c<a.Cl.length;++c){var d=a.Cl[c];if(d.l==b)return d}return null}function ae(a,b,c){if(b==null||b=="")return null;var d=$d(a,b);if(d!=null)return d;if(c){b=d=new be(b);if(b!=null){$d(a,b.l)!=null&&n.na&&n.na.print("ERROR! Cannot add the sound multiple times: "+b.l);a.Cl.push(b)}return d}return null}
function Jc(a,b,c,d){if(b==null)return null;var e=null;e=typeof b=="string"?ae(a,b,true):b;if(e==null||e.$b==null)return null;ce(a);for(b=0;b<a.Cb.length;)if(a.Cb[b].src===e){a.Cb[b].src.$b.pause();a.Cb.splice(b,1)}else++b;try{e.$b.currentTime=0}catch(f){}if(typeof d==="undefined")d=1;e.$b.volume=d*a.he;e.$b.play();var g=new de(e);g.qo=d;a.Cb.push(g);e.am&&e.$b.removeEventListener("ended",e.am,false);e.$b.am=null;if(c){g.ko=true;a=function(){if(!g.qi){try{this.currentTime=0}catch(i){}this.play()}};
e.$b.addEventListener("ended",a,false);e.$b.am=a}return g}Zd.prototype.stop=function(a){if(a){a.src.$b.pause();a.qi=true;ce(this)}};function ee(a,b){a.he=b;if(a.he<0)a.he=0;if(a.he>1)a.he=1;try{for(b=0;b<a.Cb.length;++b){var c=a.Cb[b];c.src.$b.volume=c.qo*a.he}}catch(d){}}function ce(a){for(var b=0;b<a.Cb.length;)if(fe(a.Cb[b]))a.Cb.splice(b,1);else++b}function Lc(a,b){for(var c=0;c<a.Cb.length;++c){var d=a.Cb[c];if(d&&d.src&&d.src.l==b){a.Cb.splice(c,1);d.qi=true;d.src.$b.pause();return}}}n.Rd=new Zd;
function be(a){this.l=a;var b=null;try{b=new Audio;b.src=a}catch(c){}this.loaded=true;this.$b=b}function de(a){this.src=a;this.ko=this.qi=false;this.qo=1;this.startTime=(new Date).getTime()}function fe(a){if(a.qi)return true;if(a.ko)return false;var b=(new Date).getTime(),c=a.src.duration;return c>0&&b>a.startTime+c};function ge(a,b,c,d,e,f,g){if((b==null||b==true)&&n.na==null)n.na=new fa(a,d);this.Wo=a;this.Wb=document.getElementById(this.Wo);this.la=new he;this.S=null;this.Zo=false;this.fg=null;this.db=new sd;this.ve=new n.dp;this.li=this.xh=false;this.Pm=0;this.Ac=60;this.il=this.fl=this.gl=this.Gb=null;this.wi=this.yo=false;this.Ng=[];(this.Yn=g?true:false)&&ie(this);this.fp=f==null?'Error: This browser does not support WebGL (or it is disabled).<br/>See <a href="www.ambiera.com/copperlicht/browsersupport.html">here</a> for details.':
f;this.Uh=[];this.Th=[];this.Eh=false;this.Aj=this.zj=this.Fb=this.Eb=0;this.Fh=true;this.nj=false;this.Rk=this.El=0;this.tj=null;e!=null&&je(this,true,e);ke(this);if(c)this.Ac=c;var i=this;setInterval(function(){i.tj!=null&&le(i);if(n.na){++i.Pm;var j=0,m=0;if(i.db){j=i.db;for(var o=m=0;o<j.Va.length;++o)j.Va[o].kc==false&&++m;j=m;m=i.db.Va.length}if(i.li&&j==0){i.li=false;me(i)}if(i.xh||j){o="Loading";if(j>0)o="Textures loaded: "+(m-j)+"/"+m;switch(i.Pm%4){case 0:o+="   ";break;case 1:o+=".  ";
break;case 2:o+=".. ";break;case 3:o+="...";break}ka(n.na,o)}else ka(n.na,null)}},500);ne(Z(),this)}function oe(a){if(a.la==null)return null;return a.la.Ig()}
function pe(a){document.onkeydown=function(f){qe(a,f)};document.onkeyup=function(f){te(a,f)};var b=a.Wb;if(b!=null){b.onmousemove=function(f){ue(a,f)};b.onmousedown=function(f){ve(a,f)};b.onmouseup=function(f){we(a,f)};b.onmouseover=function(){a.Fh=true};b.onmouseout=function(){a.Fh=false};xe(a);try{var c=function(f){(f=f)||(f=event);if(f)ye(a,f.detail<0||f.wheelDelta>0?1:-1)};b.addEventListener("mousewheel",c,false);b.addEventListener("DOMMouseScroll",c,false)}catch(d){}try{c=function(f){a.nj=false;
we(a,f.changedTouches[0])&&ze(a,f,true)};b.addEventListener("touchstart",function(f){if(f.touches!=null){a.nj=f.touches.length==2;if(a.nj)a.El=Ae(a,f)}ve(a,f.changedTouches[0])&&ze(a,f,true)},false);b.addEventListener("touchend",c,false);b.addEventListener("touchcancel",c,false);b.addEventListener("touchleave",c,false);b.addEventListener("touchmove",function(f){if(a.nj&&f.touches!=null&&f.touches.length>=2){f=Ae(a,f);var g=f-a.El;a.El=f;ye(a,g)}else ue(a,f.changedTouches[0])&&ze(a,f,true)},false)}catch(e){}}}
function Ae(a,b){a=b.touches;if(a[0].pageX==null)return 0;return Math.sqrt((a[0].pageX-a[1].pageX)*(a[0].pageX-a[1].pageX)+(a[0].pageY-a[1].pageY)*(a[0].pageY-a[1].pageY))}ge.prototype.load=function(a,b,c){if(!Be(this)){je(this,false,this.fp);return false}var d=this;this.xh=true;(new na(a,a.indexOf(".ccbz")!=-1)).load(function(e){d.fm(e,a,b);c&&c()});return true};
function Be(a){if(a.S!=null)return true;var b=a.Wb;if(b==null)return false;var c=n.vl!=null&&n.vl.Sq;a.S=new Dd;if(c||a.S.eb(b)==false)if(n.vl!=null){a.S=new n.vl;if(a.S.eb(b)==false)return false}else return false;if(a.db)a.db.S=a.S;pe(a);var d=1E3/a.Ac,e=q();function f(){var g=q(),i=g-e;if(i>d){e=g-i%d;a.Yn&&Ce(a);De(a);if(n.na!=null){a.la.Ig();g=n.na;if(g.Em!=null){g.frames+=1;i=(new Date).getTime();if(i-g.cm>1E3){var j="FPS: "+(g.frames/(i-g.cm)*1E3).toFixed(2);g.Em.nodeValue=j;g.cm=i;g.frames=
0}}}}window.requestAnimationFrame(f)}window.requestAnimationFrame(f);return true}function ie(){document.body.style.margin="0";document.body.style.padding="0";document.body.style.overflow="hidden"}function Ce(a){var b=window.innerHeight||window.clientHeight;a.Wb.setAttribute("width",(window.innerWidth||window.clientWidth)+"px");a.Wb.setAttribute("height",b+"px")}
ge.prototype.fm=function(a,b,c){this.xh=false;var d=new Ee;a=d.Wp(a,b,this.db,this.ve,this);if(a!=null)if(!c||this.la==null||this.la!=null&&this.la.Hb.length==0){this.la=a;if(d.Om){this.Km=d.sn;this.ap=b}if(a.yn)this.li=true;else me(this)}else for(b=0;b<a.Hb.length;++b)this.la.Ol(a.Hb[b])};function me(a){a.hk(a.la.Ig());De(a);a.il!=null&&a.il()}
function De(a){if(!(a.la==null||a.S==null))if(!(a.xh||a.li)){ke(a);Fe(a);var b=a.la.Ig();if(!a.Zo&&b){for(var c=false,d=0;d<a.Ng.length;++d){var e=a.Ng[d];e.vq();if(e.Up()){if(e.ik!=null&&!e.$l){var f=oe(a);e.ik.execute(f.La,f);e.ik=null}if(e.jk!=null&&e.$l){f=oe(a);e.jk.execute(f.La,f);e.jk=null}a.Ng.splice(d,1);--d}else c=true}c&&Ge(b);a.Gb&&a.Gb();d=a.S;b.wh=d;if(b.Ma==0)b.Ma=q();b.Ap=null;c=false;if(b.ih.length==0)e=false;else{e=q();f=false;for(var g=0;g<b.ih.length;){var i=b.ih[g];if(i.tq<e){i.Ce.ub&&
i.Ce.ub.removeChild(i.Ce);b.ih.splice(g,1);f=true;b.wd&&i.Ce.ab&&He(b.wd,i.Ce.ab)}else++g}e=f}if(e)c=true;if(b.La.Gb(b,q()))c=true;if(b.ga){e=new D(false);b.ga.kb.Ca(e);e=E(e,b.ga.Ec);e=!e.D(b.rj)}else e=true;d=d?Ed(d):false;if(b.Ik||b.Lj==0&&(e||d)||b.Lj==1&&(e||c||d)||b.Lj==2||Ie(Z())){b.Ik=false;c=true}else c=false;if(c){c=a.S;d=b.ah;if(c.Z!=null){Sd(c);e=c.Z;e.clearDepth(c.Vf?0:1);e.depthMask(true);e.clearColor(n.Zc(d)/255,n.Xc(d)/255,n.Wc(d)/255,1);e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}a.gl&&
a.gl();c=a.S;b.Sj=[];b.ug=[];b.Ye=[];b.Mj=[];b.Ij=[];b.La.Ka(b);b.Ui=null;for(d=d=b.wp=0;d<b.Mj.length;++d){b.ec=Je;b.Mj[d].nb(c)}Ke(b,c);b.ec=Le;for(d=0;d<b.Ij.length;++d)b.Ij[d].nb(c);if(b.ga){b.ga.kb.Ca(b.rj);b.rj=E(b.rj,b.ga.Ec)}a.fl&&a.fl();b=n.Da;b!=null&&Me(b,a.S);b=a.S;b.Z!=null&&b.Z.flush()}}Fe(a)}}ge.prototype.Ol=function(a){if(this.la){this.la.Hb.push(a);this.la.Hb.length==1&&this.la.Bo(a)}};
function kc(a,b,c){if(!a.la)return false;var d=a.la.Hb;b=b;if(c)b=b.toLowerCase();for(var e=0;e<d.length;++e){var f=d[e].l;if(c)f=f.toLowerCase();if(b==f){a.hk(d[e]);return true}}return false}
ge.prototype.hk=function(a){if(!a)return false;var b=a.gk()=="panorama",c=a.gk()=="free",d=null;this.la.Bo(a);if(!a.zn){a.zn=true;var e=false,f=Ne(a,"camera");if(f)for(var g=0;g<f.length;++g){var i=f[g];if(i&&i.tm){d=i;e=true;Oe(d,this.S.width,this.S.height);break}}if(!e){e=4/3;if(this.S.width&&this.S.height)e=this.S.width/this.S.height;d=new Pe;Qe(d,e);vc(a.La,d);e=null;if(!b){e=new Re(d,this);Yb(d,e)}if(c){if(a.Ck!=null)d.f=a.Ck.e();if(a.aj!=null)e!=null?pc(e,a.aj):oc(d,a.aj)}e&&Se(e,!b)}a.ga=d;
a.wd=Te(a,true);Ue(this,a.La,a.wd)}Z().qb=a;a.Lj=this.la.Cp;Ge(a);return true};function Fe(a){if(a.fg!=null){var b=a.la.Ig();if(b!=null)if(a.fg.r===b){a.S&&Oe(a.fg,a.S.Mb(),a.S.Lb());b.ga=a.fg;a.fg=null}}}function qe(a,b){var c=oe(a);if(c==null)return false;if(b==null)b=window.event;var d=false;c=c.ga;if(c!=null)d=c.De(b);for(c=0;c<a.Th.length;++c)if(a.Th[c].De(b))d=true;return ze(a,b,d)}
function te(a,b){var c=oe(a);if(c==null)return false;if(b==null)b=window.event;var d=false;c=c.ga;if(c!=null)d=c.Ee(b);for(c=0;c<a.Uh.length;++c)if(a.Uh[c].Ee(b))d=true;return ze(a,b,d)}function ze(a,b,c){if(c){try{b.preventDefault()}catch(d){}return true}return false}function ke(a){for(var b=0,c=0,d=a.Wb;d!=null;){b+=d.offsetLeft;c+=d.offsetTop;d=d.offsetParent}a.xm=b;a.ym=c}function Ve(a,b){return b.pageX?b.pageX-a.xm:b.clientX-a.Wb.offsetLeft+document.body.scrollLeft}
function We(a,b){return b.pageY?b.pageY-a.ym:b.clientY-a.Wb.offsetTop+document.body.scrollTop}function ve(a,b){if(b==null)b=window.event;a.Eh=true;a.Fh=true;if(b){a.zj=Ve(a,b);a.Aj=We(a,b);a.Eb=a.zj;a.Fb=a.Aj}var c=oe(a);if(c==null)return false;var d=false;if(a.Sm)d=a.Sm();if(!d){d=c.ga;d!=null&&d.Ud(b);d=b;for(var e=0;e<c.Lc.length;++e)c.Lc[e].Ud(d)}return ze(a,b,true)}function Xe(a){if(a.wi){a.Eb=0;a.Fb=0;a.zj=0;a.Aj=0}else{a.zj=a.Eb;a.Aj=a.Fb}}
function we(a,b){if(b==null)b=window.event;a.Eh=false;var c=oe(a);if(c==null)return false;if(b){a.Eb=Ve(a,b);a.Fb=We(a,b)}var d=false;if(a.Tm)d=a.Tm();if(!d){d=c.ga;d!=null&&d.pd(b);d=b;for(var e=0;e<c.Lc.length;++e)c.Lc[e].pd(d)}return ze(a,b,true)}function ye(a,b){a=oe(a);if(a!=null){var c=a.ga;c!=null&&c.Hf(b);for(c=0;c<a.Lc.length;++c)a.Lc[c].Hf(b)}}
function ue(a,b){if(b==null)b=window.event;if(b){a.Eb=Ve(a,b);a.Fb=We(a,b)}if(a.wi){var c=b.movementY||b.mozMovementY||b.webkitMovementY||0;a.Eb=b.movementX||b.mozMovementX||b.webkitMovementX||0;a.Fb=c}c=oe(a);if(c==null)return false;var d=c.ga;d!=null&&d.Fe(b);d=b;for(var e=0;e<c.Lc.length;++e)c.Lc[e].Fe(d);return ze(a,b,true)}l=ge.prototype;l.Gb=null;l.Tm=null;l.Sm=null;l.fl=null;l.gl=null;l.il=null;
function Ye(a,b,c){a=a.S;if(a==null)return null;var d=a.kb,e=a.Pd;if(d==null||e==null)return null;d=E(d,e);var f=new Gb;f.qk(d);d=Kb(f);e=Lb(f).substract(d);f=Nb(f).substract(d);var g=a.Mb();a=a.Lb();c=c/a;return d.add(x(e,b/g)).add(x(f,c))}
function Ze(a,b){var c=new D(false),d=a.S;if(!d.kb)return null;d.kb.Ca(c);c=E(c,d.Pd);a=d.Mb()/2;d=d.Lb()/2;if(d==0||a==0)return null;b=new s(b.c,b.b,b.d);b.W=1;c=c;var e=b.e();e.za=b.W;b.c=e.c*c.p+e.b*c.v+e.d*c.w+e.za*c.J;b.b=e.c*c.u+e.b*c.q+e.d*c.A+e.za*c.K;b.d=e.c*c.s+e.b*c.t+e.d*c.n+e.za*c.B;b.W=e.c*c.G+e.b*c.H+e.d*c.I+e.za*c.L;c=b.W==0?1:1/b.W;if(b.d<0)return null;e=new Qa;e.c=a*b.c*c+a;e.b=d-d*b.b*c;return e}function mc(a,b){if(b!=null)a.fg=b}
function Ue(a,b,c){if(b){for(var d=0;d<b.ia.length;++d){var e=b.ia[d];if(e)if(e.k()=="collisionresponse")e.ad(c);else if(e.k()=="onclick"||e.k()=="onmove")e.ja=c;else if(e.k()=="gameai")e.ja=c;else if(e.k()=="3rdpersoncamera")e.ja=c}for(d=0;d<b.X.length;++d)(e=b.X[d])&&Ue(a,e,c)}}
ge.prototype.im=function(a){if(!a||!this.la)return false;if(this.Km==null)return false;for(var b=null,c=-1,d=0;d<this.la.Hb.length;++d)if(a==this.la.Hb[d].l){c=d;b=this.la.Hb[d];break}if(c==-1)return false;a=(new Ee).im(this.Km,b,c,this.ap,this.db,this.ve,this);if(a!=null){b=this.la.Ig()==b;this.la.Hb[c]=a;b&&this.hk(a)}return true};function le(a){if(!a.xh&&!a.li){a.tj.style.display="none";a.tj=null}}
function je(a,b,c){if(a.Wb!=null){var d=document.createElement("div");a.Wb.parentNode.appendChild(d);var e=document.createElement("div");ke(a);var f=b?23:100,g=b?30:0,i=a.xm+(a.Wb.width-200)/2,j=a.ym+a.Wb.height/2;b||(j+=30);c=c.replace("$PROGRESS$","");e.style.cssText="position: absolute; left:"+i+"px; top:"+j+"px; color:#ffffff; padding:5px; background-color:#000000; height:"+f+"px; width:200px; border-radius:5px; border:1px solid #777777;  opacity:0.5;";c='<p style="margin:0; padding-left:'+g+
'px; padding-bottom:5px;">'+c+"</p> ";if(b)c+='<img style="position:absolute; left:5px; top:3px;" src="copperlichtdata/loading.gif" />';e.innerHTML=c;d.appendChild(e);if(b)a.tj=d}}
function xe(a){function b(){var d=a.Wb;if(a.yo){d.qq=d.requestPointerLock||d.mozRequestPointerLock||d.webkitRequestPointerLock;d.qq()}}function c(){var d=a.Wb;a.wi=document.PointerLockElement===d||document.pointerLockElement===d||document.mozPointerLockElement===d||document.webkitPointerLockElement===d?true:false}document.addEventListener("fullscreenchange",b,false);document.addEventListener("mozfullscreenchange",b,false);document.addEventListener("webkitfullscreenchange",b,false);document.addEventListener("pointerlockchange",
c,false);document.addEventListener("mozpointerlockchange",c,false);document.addEventListener("webkitpointerlockchange",c,false)}function $e(a,b,c){if(c==null)c=a.Wb;a.yo=b;c.requestFullscreen=c.requestFullscreen||c.Vq||c.mozRequestFullScreen||c.msRequestFullscreen||c.webkitRequestFullscreen;c.requestFullscreen()};function $(){this.i=-1;this.f=new s;this.R=new s;this.ma=new s(1,1,1);this.V=true;this.l="";this.ib=0;this.Ga=-1;this.ub=null;this.X=[];this.ia=[];this.$=new D;this.ab=this.r=null}l=$.prototype;l.eb=function(){this.f=new s;this.R=new s;this.ma=new s(1,1,1);this.X=[];this.ia=[];this.$=new D};l.f=null;l.R=null;l.ma=null;l.V=true;l.l="";l.Ga=-1;l.ab=null;l.ub=null;l.k=k("none");l.lb=function(){return new y};
function N(a,b){for(var c=0;c<a.ia.length;++c){var d=a.ia[c];if(d.k()==b)return d}return null}function af(a,b){for(var c=0;c<a.ia.length;++c){var d=a.ia[c].Df(b);if(d!=null)return d}return null}function bf(a){var b=a.lb().e();zb(a.$,b);return b}
function cf(a,b,c,d,e){b.l=new String(a.l);b.V=a.V;b.ib=a.ib;b.f=a.f.e();b.R=a.R.e();b.ma=a.ma.e();b.i=a.i;b.r=a.r;c&&vc(c,b);for(var f=0;f<a.X.length;++f){var g=a.X[f];if(g){var i=-1;if(c&&c.r)i=Xc(c.r);g=g.h(b,g.Ga,i);if(g!=null){g.Ga=i;vc(b,g)}}}for(f=0;f<a.ia.length;++f)Yb(b,a.ia[f].h(a,a.r,d,e));if(a.$)b.$=a.$.e()}$.prototype.h=k(null);function Yb(a,b){b!=null&&a.ia.push(b)}function df(a,b){if(b!=null){var c;for(c=0;c<a.ia.length;++c)if(a.ia[c]===b){a.ia.splice(c,1);return}}}
function vc(a,b){if(b){b.r=a.r;b.ub&&b.ub.removeChild(b);b.ub=a;a.X.push(b)}}$.prototype.removeChild=function(a){for(var b=0;b<this.X.length;++b)if(this.X[b]===a){a.ub=null;this.X.splice(b,1);return}};$.prototype.Ka=function(a){if(this.V)for(var b=0;b<this.X.length;++b)this.X[b].Ka(a)};$.prototype.Gb=function(a,b){var c=false;if(this.V){var d,e=this.ia.length;for(d=0;d<e;){c=this.ia[d].gb(this,b)||c;var f=e;e=this.ia.length;f>=e&&++d}P(this);for(d=0;d<this.X.length;++d)c=this.X[d].Gb(a,b)||c}return c};
$.prototype.Zl=function(){var a=new D;vb(a,this.R);xb(a,this.f);if(this.ma.c!=1||this.ma.b!=1||this.ma.d!=1){var b=new D;yb(b,this.ma);a=E(a,b)}return a};function P(a){a.$=a.ub!=null?E(a.ub.$,a.Zl()):a.Zl()}$.prototype.nb=aa();function O(a){return new s(a.$.J,a.$.K,a.$.B)}$.prototype.Yc=k(0);$.prototype.sc=k(null);function ef(a){for(a=a;a;){if(!a.V)return false;a=a.ub}return true}$.prototype.po=aa();$.prototype.zi=aa();function Pe(){this.eb();this.g=new y;this.tm=this.zc=false;this.fa=new s(0,0,10);this.Jb=new s(0,1,0);this.kb=new D;this.Ec=new D;this.hd=n.PI/2.5;this.Gc=4/3;this.Gg=0.1;this.Fg=3E3;this.Oi=this.Yj=true;this.ki=false;tb(this.kb,this.hd,this.Gc,this.Gg,this.Fg)}Pe.prototype=new $;function ff(a){tb(a.kb,a.hd,a.Gc,a.Gg,a.Fg)}Pe.prototype.k=k("camera");function Qe(a,b){if(!n.D(a.Gc,b)){a.Oi=false;a.Gc=b;ff(a)}}function gf(a,b){if(!n.D(a.hd,b))if(!isNaN(b)){a.hd=b;ff(a)}}
function oc(a,b){if(b){a.fa=b.e();if(a.Yj){P(a);a.R=Ja(b.substract(O(a)))}}}Pe.prototype.Gb=function(a,b){a=$.prototype.Gb.call(this,a,b);this.ki||hf(this);return a};function hf(a){var b=O(a),c=a.fa.e();if(b.D(c))c.c+=1;ub(a.Ec,b,c,a.Jb)}l=Pe.prototype;l.Ka=function(a){if(a.ga===this){jf(a,this,2);$.prototype.Ka.call(this,a)}};l.nb=function(a){this.ki||hf(this);if(this.Gc==0||this.Oi){Oe(this,a.width,a.height);this.Gc==0&&Qe(this,0.75)}this.kb.Ca(a.kb);this.Ec.Ca(a.Pd)};
l.Ud=function(a){for(var b=0;b<this.ia.length;++b)this.ia[b].Ud(a)};l.Hf=function(a){for(var b=0;b<this.ia.length;++b)this.ia[b].Hf(a)};l.pd=function(a){for(var b=0;b<this.ia.length;++b)this.ia[b].pd(a)};l.Fe=function(a){for(var b=0;b<this.ia.length;++b)this.ia[b].Fe(a)};l.De=function(a){for(var b=false,c=0;c<this.ia.length;++c)if(this.ia[c].De(a))b=true;return b};l.Ee=function(a){for(var b=false,c=0;c<this.ia.length;++c)if(this.ia[c].Ee(a))b=true;return b};
l.h=function(a,b,c){var d=new Pe;cf(this,d,a,b,c);if(this.fa)d.fa=this.fa.e();if(this.Jb)d.Jb=this.Jb.e();if(this.kb)d.kb=this.kb.e();if(this.Ec)d.Ec=this.Ec.e();d.hd=this.hd;d.Gc=this.Gc;d.Gg=this.Gg;d.Fg=this.Fg;if(this.g)d.g=this.g.e();return d};function Oe(a,b,c){if(!(b==0||c==0))if(n.D(a.Gc,0)||a.Oi){Qe(a,b/c);a.Oi=true}};function kf(){this.eb();this.g=new y;this.zc=false;this.U=null;this.Lq=true;this.ab=null}kf.prototype=new $;l=kf.prototype;l.lb=function(){if(this.U)return this.U.g;return this.g};l.Tp=ea("U");l.Co=ca("U");l.k=k("mesh");l.Ka=function(a){var b=this.U;if(this.V&&b){for(var c=false,d=false,e=0;e<b.wa.length;++e)if(dd(b.wa[e].O))c=true;else d=true;c&&jf(a,this,lf);d&&jf(a,this,mf);$.prototype.Ka.call(this,a)}};
l.nb=function(a){a.ad(this.$);for(var b=0;b<this.U.wa.length;++b){var c=this.U.wa[b];if(dd(c.O)==(this.r.ec==lf)){Fd(a,c.O);Gd(a,c)}}};l.Yc=function(){if(this.U)return this.U.wa.length;return 0};l.sc=function(a){if(this.U!=null)if(a>=0&&a<this.U.wa.length)return this.U.wa[a].O;return null};l.h=function(a,b,c){var d=new kf;cf(this,d,a,b,c);if(this.U)d.U=this.U.h();d.Sh=this.Sh;d.zc=this.zc;if(this.g)d.g=this.g.e();return d};function nf(){this.U=new kd;var a=[0,1,2,0,2,3],b=new id;this.U.sd(b);b.O.Pb=true;b.ea=a;b.m.push(this.Pa(-1,-1,-1,0,0,1,1,1));b.m.push(this.Pa(1,-1,-1,0,0,1,0,1));b.m.push(this.Pa(1,1,-1,0,0,1,0,0));b.m.push(this.Pa(-1,1,-1,0,0,1,1,0));b=new id;this.U.sd(b);b.O.Pb=true;b.ea=a;b.m.push(this.Pa(1,-1,-1,-1,0,0,1,1));b.m.push(this.Pa(1,-1,1,-1,0,0,0,1));b.m.push(this.Pa(1,1,1,-1,0,0,0,0));b.m.push(this.Pa(1,1,-1,-1,0,0,1,0));b=new id;this.U.sd(b);b.O.Pb=true;b.ea=a;b.m.push(this.Pa(-1,-1,1,1,0,0,1,1));
b.m.push(this.Pa(-1,-1,-1,1,0,0,0,1));b.m.push(this.Pa(-1,1,-1,1,0,0,0,0));b.m.push(this.Pa(-1,1,1,1,0,0,1,0));b=new id;this.U.sd(b);b.O.Pb=true;b.ea=a;b.m.push(this.Pa(1,-1,1,0,0,-1,1,1));b.m.push(this.Pa(-1,-1,1,0,0,-1,0,1));b.m.push(this.Pa(-1,1,1,0,0,-1,0,0));b.m.push(this.Pa(1,1,1,0,0,-1,1,0));b=new id;this.U.sd(b);b.O.Pb=true;b.ea=a;b.m.push(this.Pa(1,1,-1,0,-1,0,1,1));b.m.push(this.Pa(1,1,1,0,-1,0,0,1));b.m.push(this.Pa(-1,1,1,0,-1,0,0,0));b.m.push(this.Pa(-1,1,-1,0,-1,0,1,0));b=new id;this.U.sd(b);
b.O.Pb=true;b.ea=a;b.m.push(this.Pa(1,-1,1,0,1,0,1,1));b.m.push(this.Pa(1,-1,-1,0,1,0,0,1));b.m.push(this.Pa(-1,-1,-1,0,1,0,0,0));b.m.push(this.Pa(-1,-1,1,0,1,0,1,0))}nf.prototype=new kf;l=nf.prototype;l.k=k("sky");l.Pa=function(a,b,c,d,e,f,g,i){d=new Pb(true);d.f.c=a;d.f.b=b;d.f.d=c;d.Ba.c=g;d.Ba.b=i;return d};l.Ka=function(a){if(this.V){jf(a,this,1);$.prototype.Ka.call(this,a)}};
l.nb=function(a){var b=this.r.ga;if(b&&this.U){var c=new D(false);this.$.Ca(c);xb(c,O(b));b=(b.Gg+b.Fg)*0.5;var d=new D;yb(d,new s(b,b,b));a.ad(E(c,d));c=this.U;if(c!=null)for(b=0;b<c.wa.length;++b){d=c.wa[b];Fd(a,d.O);Gd(a,d)}}};l.h=function(a,b,c){var d=new nf;cf(this,d,a,b,c);if(this.U)d.U=this.U.e();d.Sh=this.Sh;d.zc=this.zc;if(this.g)d.g=this.g.e();return d};new kf;function of(){this.eb();this.g=new y;this.wg=this.Zh=10;this.uh=false;this.Cc=new id;this.Og=new Pb(true);this.Pg=new Pb(true);this.Qg=new Pb(true);this.Rg=new Pb(true);var a=this.Cc.ea;a.push(0);a.push(2);a.push(1);a.push(0);a.push(3);a.push(2);a=this.Cc.m;a.push(this.Og);a.push(this.Pg);a.push(this.Qg);a.push(this.Rg);this.Og.Ba.c=1;this.Og.Ba.b=1;this.Pg.Ba.c=1;this.Pg.Ba.b=0;this.Qg.Ba.c=0;this.Qg.Ba.b=0;this.Rg.Ba.c=0;this.Rg.Ba.b=1;for(var b=0;b<4;++b)z(this.g,a[b].f)}of.prototype=new $;l=of.prototype;
l.lb=ea("g");l.k=k("billboard");l.Ka=function(a){if(this.V){jf(a,this,dd(this.Cc.O)?lf:mf);$.prototype.Ka.call(this,a)}};
l.nb=function(a){var b=this.r.ga;if(b)if(this.uh){e=O(this);var c=O(b),d=b.Jb;b=b.fa.substract(c);b.normalize();c=Ia(d,b);za(c)==0&&c.set(d.b,d.c,d.d);c.normalize();Ca(c,0.5*this.Zh);d=Ia(c,b);d.normalize();Ca(d,0.5*this.wg);this.uh&&d.set(0,-0.5*this.wg,0);Ca(b,1);wa(this.Og.f,e);this.Og.f.ua(c);this.Og.f.ua(d);wa(this.Pg.f,e);this.Pg.f.ua(c);ta(this.Pg.f,d);wa(this.Qg.f,e);ta(this.Qg.f,c);ta(this.Qg.f,d);wa(this.Rg.f,e);ta(this.Rg.f,c);this.Rg.f.ua(d);this.Cc.update(true);e=new D(true);a.ad(e);
Fd(a,this.Cc.O);Gd(a,this.Cc)}else{var e=O(this);a.Vj==null&&Yd(a);d=a.Vj;b=new D(true);yb(b,new s(this.Zh*0.5,this.wg*0.5,0));c=a.Pd.e();xb(c,new s(0,0,0));var f=new D(true);ob(c,f);xb(f,e);b=E(f,b);a.ad(b);Fd(a,this.Cc.O);Gd(a,d)}};l.Yc=k(1);l.sc=function(){return this.Cc.O};l.h=function(a,b,c){var d=new of;cf(this,d,a,b,c);if(this.g)d.g=this.g.e();d.Zh=this.Zh;d.wg=this.wg;d.uh=this.uh;d.Cc.O=this.Cc.O.e();return d};function pf(){this.eb();this.g=new y;this.va=new id;this.Fa=new s(0,-0.03,0);this.Qb=new s(0,0,0);this.$j=this.pj=0;this.$a=[]}pf.prototype=new $;l=pf.prototype;l.Fa=null;l.kd=10;l.Qb=null;l.$e=1E3;l.Bh=2E3;l.Ch=200;l.bg=10;l.vj=20;l.yj=4278190080;l.wj=4294967295;l.cg=5;l.dg=5;l.$f=7;l.Dh=7;l.mh=false;l.Sf=500;l.Sf=0;l.Tf=false;l.jj=500;l.zd=null;l.ng=false;l.Qj=20;l.Rj=20;
l.h=function(a,b,c){var d=new pf;cf(this,d,a,b,c);if(this.g)d.g=this.g.e();d.Fa=this.Fa.e();d.kd=this.kd;d.Qb=this.Qb.e();d.$e=this.$e;d.Bh=this.Bh;d.Ch=this.Ch;d.bg=this.bg;d.vj=this.vj;d.yj=this.yj;d.wj=this.wj;d.cg=this.cg;d.dg=this.dg;d.$f=this.$f;d.Dh=this.Dh;d.mh=true;d.Sf=this.Sf;d.Gk=this.Gk;d.Tf=this.Tf;d.jj=this.jj;d.zd=this.zd;d.ng=this.ng;d.Qj=this.Qj;d.Rj=this.Rj;d.va.O=this.va.O.e();return d};l.lb=ea("g");l.k=k("particlesystem");
l.Ka=function(a){if(this.V){jf(a,this,dd(this.va.O)?lf:mf);$.prototype.Ka.call(this,a)}};l.nb=aa();l.Yc=k(1);l.sc=function(){return this.va.O};
l.Gb=function(a,b){var c=false;if(this.V)if(this.pj==0){this.pj=b;c=false}else{c=b-this.pj;this.pj=b;if(this.V){var d=false;d=this.vj-this.bg;var e=1E3/(d?this.bg+Math.random()*d:this.bg);d=this.$a.length;this.$j+=c;if(this.$j<=e)d=false;else{e=this.$j/e+0.5;this.$j=0;if(d+e>this.Ch)e-=d+e-this.Ch;if(e<=0)d=false;else{var f=this.Fa.e();jb(this.$,f);for(var g=ib(this.$).c,i=xa(this.Qb),j=d;j<d+e;++j){var m=new qf;m.$c=new s(0,0,0);if(!i){if(this.Qb.c!=0)m.$c.c=Math.random()*this.Qb.c-this.Qb.c*0.5;
if(this.Qb.b!=0)m.$c.b=Math.random()*this.Qb.b-this.Qb.b*0.5;if(this.Qb.d!=0)m.$c.d=Math.random()*this.Qb.d-this.Qb.d*0.5}m.startTime=b;m.Gi=f.e();if(this.kd){var o=f.e(),p=Math.random()*this.kd*2-this.kd;p*=n.yd;var h=Math.cos(p);p=Math.sin(p);var w=o.c,t=o.b;o.c=w*h-t*p;o.b=w*p+t*h;p=Math.random()*this.kd*2-this.kd;p*=n.yd;h=Math.cos(p);p=Math.sin(p);w=o.b;t=o.d;o.b=w*h-t*p;o.d=w*p+t*h;Ka(o,Math.random()*this.kd*2-this.kd);m.Gi=o}m.pi=this.Bh-this.$e==0?b+this.$e:b+this.$e+Math.random()*(this.Bh-
this.$e);m.color=n.Zn(this.yj,this.wj,Math.random()*100/100);m.Fo=m.color;m.Go=m.Gi.e();if(this.cg==this.$f&&this.dg==this.Dh){m.Ci=this.cg;m.Di=this.dg}else{o=Math.random()*100/100;h=1-o;m.Ci=this.cg*o+this.$f*h;m.Di=this.dg*o+this.Dh*h}m.Ci*=g;m.Di*=g;m.nm=m.Ci;m.om=m.Di;mb(this.$,m.$c);this.$a.unshift(m)}d=true}}if(!this.mh&&!this.Tf&&!this.ng)e=false;else{e=0;f=null;if(this.mh)for(e=0;e<this.$a.length;++e){f=this.$a[e];if(f.pi-b<this.Sf)f.color=n.Zn(f.Fo,this.Gk,(f.pi-b)/this.Sf)}if(this.Tf){g=
Fa(this.zd,ib(this.$));for(e=0;e<this.$a.length;++e){f=this.$a[e];i=(b-f.startTime)/this.jj;i=n.qc(i,0,1);i=1-i;f.Gi=La(f.Go,g,i)}}if(this.ng){g=ib(this.$).c;for(e=0;e<this.$a.length;++e){f=this.$a[e];i=(b-f.startTime)/(f.pi-f.startTime);f.nm=f.Ci+this.Qj*i*g;f.om=f.Di+this.Rj*i*g}}e=true}d=e||d;e=new s(this.$.J,this.$.K,this.$.B);this.va.g.reset(e.c,e.b,e.d);if(this.$a.length!=0)d=true;for(e=0;e<this.$a.length;){f=this.$a[e];if(b>f.pi)this.$a.splice(e,1);else{f.$c.ua(x(f.Gi,c));z(this.va.g,f.$c);
++e}}c=this.$f*0.5;this.va.g.M.c+=c;this.va.g.M.b+=c;this.va.g.M.d+=c;this.va.g.C.c-=c;this.va.g.C.b-=c;this.va.g.C.d-=c;c=new D(false);ob(this.$,c);zb(c,this.va.g);c=d}else c=false}return $.prototype.Gb.call(this,a,b)||c};l.Ka=function(a){if(this.V){if(this.$a.length!=0)jf(a,this,dd(this.va.O)?lf:mf);$.prototype.Ka.call(this,a)}};
l.nb=function(a){if(this.r.ga)if(this.$a.length!=0){if(this.$a.length*4>this.va.m.length||this.$a.length*6>this.va.ea.length){for(var b=this.va.m.length,c=this.va.m;this.va.m.length<this.$a.length*4;){var d=null;d=new Pb(true);d.Ba.set(0,0);c.push(d);d=new Pb(true);d.Ba.set(0,1);c.push(d);d=new Pb(true);d.Ba.set(1,1);c.push(d);d=new Pb(true);d.Ba.set(1,0);c.push(d)}b=b;c=this.$a.length*6;d=this.va.ea;for(var e=this.va.ea.length;e<c;e+=6){d.push(0+b);d.push(2+b);d.push(1+b);d.push(0+b);d.push(3+b);
d.push(2+b);b+=4}}b=a.Pd;c=new s(-b.s,-b.t,-b.n);d=0;var f=null;for(e=0;e<this.$a.length;++e){var g=this.$a[e];f=0.5*g.nm;var i=new s(b.p*f,b.v*f,b.w*f);f=-0.5*g.om;var j=new s(b.u*f,b.q*f,b.A*f);f=this.va.m[0+d];f.f=g.$c.add(i).add(j);f.pa=g.color;f.j=c;f=this.va.m[1+d];f.f=g.$c.add(i).substract(j);f.pa=g.color;f.j=c;f=this.va.m[2+d];f.f=g.$c.substract(i).substract(j);f.pa=g.color;f.j=c;f=this.va.m[3+d];f.f=g.$c.substract(i).add(j);f.pa=g.color;f.j=c;d+=4}b=new D(true);a.ad(b);this.va.update(false,
true);Fd(a,this.va.O);Gd(a,this.va,this.$a.length*2*3)}};function qf(){this.Gi=this.$c=null;this.Fo=this.color=this.pi=this.startTime=0;this.Go=null;this.Di=this.Ci=this.om=this.nm=0};function rf(){this.Nh=new s(0,0,0);this.pa=new ra;this.Ea=100;this.$g=0.01;this.Fa=null;this.sh=false}l=rf.prototype;l.e=function(){var a=new rf;a.Nh=this.Nh.e();a.pa=this.pa.e();a.Ea=this.Ea;a.$g=this.$g;a.sh=this.sh;a.Fa=this.Fa!=null?this.Fa.e():null;return a};l.Nh=null;l.pa=null;l.$g=null;l.Ea=null;l.Fa=null;l.sh=false;function sf(){this.Ya=new rf;this.g=new y;this.eb()}sf.prototype=new $;l=sf.prototype;l.k=k("light");l.Ya=null;
l.h=function(a,b,c){var d=new sf;cf(this,d,a,b,c);d.Ya=this.Ya.e();d.g=this.g.e();return d};l.Ka=function(a){this.V&&jf(a,this,tf);$.prototype.Ka.call(this,a);this.Ya.Nh=O(this)};l.lb=ea("g");l.nb=function(a){this.Ya.sh?Rd(a,this.Ya):Qd(a,this.Ya)};function uf(){this.eb();this.g=new y;this.Dg=0;this.Te=false;this.Bb=[]}uf.prototype=new $;l=uf.prototype;l.Dg=0;l.Te=false;l.Bb=[];l.lb=ea("g");l.k=k("path");l.h=function(a,b,c){var d=new uf;cf(this,d,a,b,c);if(this.g)d.g=this.g.e();d.Dg=this.Dg;d.Te=this.Te;d.Bb=[];for(a=0;a<this.Bb.length;++a)d.Bb.push(this.Bb[a].e());return d};function vf(a,b){if(b<0||b>=a.Bb.length)return new s(0,0,0);a.$||P(a);b=a.Bb[b];b=b.e();mb(a.$,b);return b}
function wf(a,b,c){if(a.Te)return b<0?c+b:b>=c?b-c:b;return b<0?0:b>=c?c-1:b}
function xf(a,b,c){var d=a.Bb.length;if(a.Te)b*=d;else{b=n.qc(b,0,1);b*=d-1}var e=new s;if(d==0)return e;if(d==1)return e;b=b;var f=n.Mp(b),g=Math.floor(b)%d,i=a.Bb[wf(a,g-1,d)];e=a.Bb[wf(a,g+0,d)];b=a.Bb[wf(a,g+1,d)];var j=a.Bb[wf(a,g+2,d)],m=2*f*f*f-3*f*f+1;d=-2*f*f*f+3*f*f;g=f*f*f-2*f*f+f;f=f*f*f-f*f;i=b.substract(i);Ca(i,a.Dg);j=j.substract(e);Ca(j,a.Dg);e=x(e,m);e.ua(x(b,d));e.ua(x(i,g));e.ua(x(j,f));if(!c){a.$||P(a);mb(a.$,e)}return e};function yf(){this.eb();this.g=new y;this.Um=this.Ah=this.le=0;this.Vo=false;this.Eg=this.Xk=this.Qm=0;this.jg=false;this.Kc=null;this.yp=false;this.Vm=this.Il=0}yf.prototype=new $;yf.prototype.lb=ea("g");yf.prototype.k=k("sound");yf.prototype.Ka=function(a){if(this.V){jf(a,this,mf);$.prototype.Ka.call(this,a)}};
function zf(a,b,c,d){var e=a.Eg;if(d)if(b)if(d=d.ga){var f=O(d);d.fa.substract(f);c=f.vb(c);if(!(c<a.le)){c-=a.le;d=a.Ah-a.le;if(d>0){if(c>d)c=d;d=10;if(c!=0)d=a.le/c;e*=d;if(e>10)e=10}else e=10}if(e>1)e=1;if(b)try{b.src.$b.volume=e}catch(g){}}}function Af(a,b){if(!a.Kc&&a.Ib){a.yp=false;a.Kc=Jc(n.Rd,a.Ib,b);if(!a.jg){b=O(a);zf(a,a.Kc,b,a.r)}}}
yf.prototype.Gb=function(a,b){try{var c=O(this);this.Kc&&!this.jg&&zf(this,this.Kc,c,a);switch(this.Um){case 0:break;case 1:if(this.Kc&&fe(this.Kc)){this.Kc=null;var d=this.Qm-this.Xk;if(d<2)d=2;this.Il=b+Math.random()*d+this.Xk}else if(!this.Kc&&(!this.Il||b>this.Il))this.Ib&&Af(this,false);break;case 2:this.Kc||this.Ib&&Af(this,true);break;case 3:if(!this.Vm)if(this.Ib){Af(this,false);++this.Vm}break}}catch(e){}return false};
yf.prototype.h=function(a,b,c){var d=new yf;cf(this,d,a,b,c);if(this.g)d.g=this.g.e();return d};function Bf(a){this.eb();this.Qa=a;this.g=new y;this.cf=this.bf=100;this.pf=this.qf=50;this.ef=this.df=0.5;this.sf=1/6;this.rf=1/6;this.vg=this.Id=true;this.Hc=0;this.ue=this.Ia=null;this.mg=true;this.Qe=this.yk=false;this.zg=1;this.gd=this.cb="";this.tf=0;this.Ih=this.rh=this.Jh=this.kj=this.hl=this.Xg=false;this.bi=this.ci=null;this.Am=this.Bm="";this.Vi=0}Bf.prototype=new $;l=Bf.prototype;l.gd="";l.tf=0;l.zg=1;l.Mn=k(false);l.lb=ea("g");l.k=k("2doverlay");
l.lm=function(a){this.cb=a;this.Qe=this.cb!=null&&this.cb!="";if(this.gd=="")this.gd="12;default;arial;normal;bold;true"};l.Ka=function(a){if(this.V){jf(a,this,Le);$.prototype.Ka.call(this,a)}};
l.nb=function(a){var b=Cf(this,true,a),c=false;if(this.Qa!=null&&this.Xg){c=this.Qa.Eb;var d=this.Qa.Fb;c=b.x<=c&&b.y<=d&&b.x+b.Ta>=c&&b.y+b.Ra>=d}if(c&&this.Jh)Md(a,b.x,b.y,b.Ta,b.Ra,this.rh,true);else this.vg&&Md(a,b.x,b.y,b.Ta,b.Ra,this.Hc,true);d=this.Ia;if(c&&this.ue&&this.Ih)d=this.ue;if(d!=null&&d.kc){var e=d.Mb(),f=d.Lb();if(this.mg){if(e&&f&&b.Ra&&b.Ta){var g=b.Ta;e=g*(f/e);if(e>b.Ra){f=b.Ra/e;g*=f;e*=f}b.Ta=g;b.Ra=e;Nd(a,b.x,b.y,b.Ta,b.Ra,d,true,null,null,null,!this.yk)}}else Nd(a,b.x,b.y,
b.Ta,b.Ra,d,true,null,null,null,!this.yk)}if(this.Qe&&this.gd&&this.cb!=""){a:{e=b.Ta;(d=this.ci==null||false)||(d=this.Bm!=this.cb||this.Am!=this.gd);if(d){Df(this,a);d=document.createElement("canvas");if(d!=null){d.width=1;d.height=1;g=null;try{g=d.getContext("2d");if(g==null)break a}catch(i){break a}var j=this.gd;f=12;var m="Arial",o=false,p=false;if(j.indexOf("#fnt_")==0)j=j.substr(5);j=j.split(";");for(var h=0;h<j.length;++h){var w=j[h],t=w.toLowerCase();if(h==0)f=parseInt(t);else if(h==2)m=
w;else if(h==3){if(t.indexOf("italic")!=-1)o=true}else if(h==4)if(t.indexOf("bold")!=-1)p=true}j="";if(o)j+="italic ";if(p)j+="bold ";this.Vi=f*96/72;j+=this.Vi+"px ";j+=m;f=j;g.font=f;if(this.zg==2){m=[];o=this.cb;p=g;w=h=j="";t=o.length;for(var L=0,A=e-6,u="c",H=0;H<t;++H){u=o.charAt(H);var M=false;if(u=="\r"){M=true;u=" ";if(o.charAt(H+1)=="\n"){o=o.substr(0,H).concat(o.substr(H+2));--t}}else if(u=="\n"){M=true;u=" "}if(u==" "||u==0||H==t-1){if(h.length){var J=p.measureText(w).width,X=p.measureText(h).width;
if(L+X+J>A){L=X;m.push(j);j=h}else{j=j.concat(w);j=j.concat(h);L+=J+X}w=h=""}w=w.concat(u);if(M){j=j.concat(w);j=j.concat(h);m.push(j);w=h=j="";L=0}}else h=h.concat(u)}j=j.concat(w);j=j.concat(h);m.push(j);o=this.Vi*1.2;j=m.length;p=0;d.width=e;d.height=Math.max(1,j*o);g.fillStyle="rgba(0, 0, 0, 1)";g.fillRect(0,0,d.width,d.height);g.fillStyle="rgba(255, 255, 255, 1)";g.textBaseline="top";g.font=f;for(e=0;e<m.length;++e){g.fillText(m[e],0,p);p+=o}}else{e=g.measureText(this.cb);d.width=e.width;d.height=
this.Vi*1.2;g.fillStyle="rgba(0, 0, 0, 1)";g.fillRect(0,0,d.width,d.height);g.fillStyle="rgba(255, 255, 255, 1)";g.textBaseline="top";g.font=f;g.fillText(this.cb,0,0)}this.bi=this.ci=d=ad(a,d,true);this.Bm=this.cb;this.Am=this.gd}}}d=this.ci;g=this.tf;if(c){if(this.bi)d=this.bi;g=this.kj}if(d){c=d.hg;e=d.gg;this.zg==1?Od(a,b.x+(b.Ta-c)/2,b.y+(b.Ra-e)/2,c,e,d,g):Od(a,b.x,b.y,c,e,d,g)}}else Df(this,a)};function Df(a,b){b.deleteTexture(a.ci);b.deleteTexture(a.bi);a.ci=null;a.bi=null}
Bf.prototype.Yc=k(0);function Cf(a,b,c){b=c.Mb();c=c.Lb();var d={};if(a.Id){d.x=a.bf;d.y=a.cf;d.Ta=a.qf;d.Ra=a.pf}else{d.x=a.df*b;d.y=a.ef*c;d.Ta=a.sf*b;d.Ra=a.rf*c}return d}
Bf.prototype.h=function(a,b,c){var d=new Bf;cf(this,d,a,b,c);d.bf=this.bf;d.cf=this.cf;d.qf=this.qf;d.pf=this.pf;d.df=this.df;d.ef=this.ef;d.sf=this.sf;d.rf=this.rf;d.Id=this.Id;d.vg=this.vg;d.Hc=this.Hc;d.Ia=this.Ia;d.ue=this.ue;d.mg=this.mg;d.Qe=this.Qe;d.zg=this.zg;d.cb=this.cb;d.gd=this.gd;d.tf=this.tf;d.Xg=this.Xg;d.hl=this.hl;d.kj=this.kj;d.Jh=this.Jh;d.rh=this.rh;d.Ih=this.Ih;return d};function Ef(a,b){Bf.call(this,a);this.Pf=null;this.gc=this.fc=0;this.Bj=false;this.Jc=this.lj=this.en=this.dn=this.tl=this.ul=0;Yb(this,new Ff(a,b,this))}Ef.prototype=new Bf;Ef.prototype.k=k("mobile2dinput");Ef.prototype.Mn=k(true);
Ef.prototype.nb=function(a){var b=Cf(this,true,a),c=false;if(this.Qa!=null){var d=this.Qa.Eb,e=this.Qa.Fb;this.Bj=b.x<=d&&b.y<=e&&b.x+b.Ta>=d&&b.y+b.Ra>=e;if(this.Xg)c=this.Bj}if(c&&this.Jh)Md(a,b.x,b.y,b.Ta,b.Ra,this.rh,true);else this.vg&&Md(a,b.x,b.y,b.Ta,b.Ra,this.Hc,true);d=this.Ia;if(c&&this.ue&&this.Ih)d=this.ue;e=c=0;if(d!=null&&d.kc){var f=d.Mb(),g=d.Lb();if(this.mg){if(f&&g&&b.Ra&&b.Ta){c=b.Ta;e=c*(g/f);if(e>b.Ra){f=b.Ra/e;c*=f;e*=f}b.Ta=c;b.Ra=e;Nd(a,b.x,b.y,b.Ta,b.Ra,d,true);c=b.Ta;e=
b.Ra}}else{Nd(a,b.x,b.y,b.Ta,b.Ra,d,true);c=b.Ta;e=b.Ra}}this.ul=c;this.tl=e;this.dn=b.x;this.en=b.y;if(this.lj==0&&this.Pf!=null&&this.Pf.kc&&d!=null&&d.kc){f=this.fc*Math.sqrt(1-0.5*this.gc*this.gc);g=this.gc*Math.sqrt(1-0.5*this.fc*this.fc);f=(f+1)*0.5;g=(g+1)*0.5;var i=1/(d.Mb()/Number(this.Pf.Mb()));d=1/(d.Lb()/Number(this.Pf.Lb()));i=i*c;d=d*e;Nd(a,b.x+f*c-i*0.5,b.y+g*e-d*0.5,i,d,this.Pf,true)}};function Gf(){this.eb();this.g=new y;this.zc=false;this.ab=this.Ha=null;this.vh=0;this.zb=[];this.yb=0.25;this.Ne=q();this.rb=this.Sa=this.Jk=0;this.Vb=false;this.yc=0;this.ed=250;this.ae=true;this.Yi=false;this.Xf=[];this.Pi=0;this.An=false;this.Yk=20;this.xb=[]}Gf.prototype=new $;n.hn=function(){this.xa=null;this.Ej=this.Wf=-1};Gf.prototype.lb=ea("g");Gf.prototype.ac=function(a){if(!this.Ha)return false;a=rd(this.Ha,a);if(!a)return false;Hf(this,a.ud,a.N);this.yb=a.Ac;return true};
function ic(a,b,c){if(!a.Ha)return false;var d=a.Ha;if(!d)return false;var e=rd(d,b);if(e){Hf(a,e.ud,e.N);e.Ac!=0&&If(a,e.Ac);a.Vb=c}else if(b){b=b.toLowerCase();if(b=="all"){Hf(a,0,Math.floor(d.dd));d.Dk!=0&&If(a,d.Dk);a.Vb=c}else if(b=="none"){Hf(a,0,0);a.Vb=c}}return true}l=Gf.prototype;l.Co=function(a){if(a){this.Ha=a;this.g=a.lb();Hf(this,0,Math.floor(a.dd))}};l.k=k("animatedmesh");
l.Ka=function(a){if(this.V&&this.Ha){var b=this.zb,c=false,d=false;if(b!=null)for(var e=0;e<b.length;++e)if(dd(b[e]))c=true;else d=true;c&&jf(a,this,lf);d&&jf(a,this,mf);$.prototype.Ka.call(this,a)}};l.Yc=function(){if(this.zb!=null)return this.zb.length;if(this.U)return this.U.wa.length;return 0};l.sc=function(a){if(this.zb)if(a>=0&&a<this.zb.length)return this.zb[a];else if(this.Ha&&this.Ha.td&&a>=0&&this.zb.length==a&&a<256){a=new cd;this.zb.push(a);return a}return null};
l.h=function(a,b,c){var d=new Gf;cf(this,d,a,b,c);d.Ha=this.Ha;if(this.g)d.g=this.g.e();d.zc=this.zc;d.ab=this.ab;d.vh=this.vh;d.zb=[];for(a=0;a<this.zb.length;++a)d.zb.push(this.zb[a].e());d.yb=this.yb;d.Ne=this.Ne;d.Jk=this.Jk;d.Sa=this.Sa;d.rb=this.rb;d.Vb=this.Vb;d.yc=this.yc;d.Yk=this.Yk;d.ed=this.ed;d.ae=this.ae;d.Yi=false;d.Xf=[];for(a=d.Pi=0;a<this.xb.length;++a){b=new n.hn;b.xa=this.xb[a].xa;b.Wf=this.xb[a].Wf;b.Ej=this.xb[a].Ej;d.xb.push(b)}return d};function If(a,b){a.yb=b}
function Jf(a,b){a.Vb=b}function Hf(a,b,c){if(!a.Ha)return false;var d=Math.floor(a.Ha.dd)-1,e=a.Sa,f=a.rb;if(c<b){a.Sa=n.qc(c,0,d);a.rb=n.qc(b,a.Sa,d)}else{a.Sa=n.qc(b,0,d);a.rb=n.qc(c,a.Sa,d)}if(e!=a.Sa||f!=a.rb){b=a.yc;a.yc=n.qc(a.Sa,a.Sa,a.rb);a.Ne=q()-Math.floor((a.yc-a.Sa)/a.yb);a.ae&&a.ed&&Kf(a,b)}return true}
function Lf(a){var b=a.Ha;if(b){var c=false;if((c=Mf(a,a.yc))||b.pm){a:{for(c=0;c<a.zb.length;++c)if(a.zb[c].Bc){c=true;break a}c=false}if(b.Ad){b.pm=false;pd(b,null,null);var d=0,e=0,f;for(d=0;d<b.ra.length;++d){var g=b.ra[d];for(e=0;e<g.Yg.length;++e){f=b.Za[g.Yg[e]];f.xe=g.Re.e()}}for(d=0;d<b.Za.length;++d){f=b.bk[d];for(e=0;e<f.length;++e)f[e]=false}for(d=0;d<b.jf.length;++d)qd(b,b.jf[d],null,c)}b.pb.C.set(0,0,0);b.pb.M.set(0,0,0);if(b.Za.length){c=b.Za[0];jd(c);b.pb.C=c.g.C.e();b.pb.M=c.g.M.e();
for(d=1;d<b.Za.length;++d){c=b.Za[d];jd(c);if(c.xe==null){z(b.pb,c.g.C);z(b.pb,c.g.M)}else{e=c.g.e();zb(c.xe,e);z(b.pb,e.C);z(b.pb,e.M)}}}a.g=b.lb().e();for(c=0;c<b.Za.length;++c)b.Za[c].update(true)}a.Jk=a.yc}}
Gf.prototype.Gb=function(a,b){var c=q();if(this.vh==0||c-this.vh>this.Yk){var d;d=0;if(this.Sa==this.rb)d=this.Sa;else if(this.yb==0)d=this.Sa;else{d=0;if(this.Vb){var e=false;d=Math.abs(Math.floor((this.rb-this.Sa)/this.yb));if(this.yb>0){d=this.Sa+(b-this.Ne)%d*this.yb;e=d<this.yc}else{d=this.rb-(b-this.Ne)%d*-this.yb;e=d>this.yc}e&&this.ae&&Kf(this,this.yc)}else if(this.yb>0){d=(b-this.Ne)*this.yb;d=this.Sa+d;if(d>this.rb)d=this.rb}else{d=(b-this.Ne)*-this.yb;d=this.rb-d;if(d<this.Sa)d=this.Sa}d=
d}this.yc=d;this.vh=c}a=$.prototype.Gb.call(this,a,b);this.xb.length!=0&&Nf(this);return a};Gf.prototype.nb=function(a){var b=this.r.Ui;if(b)if(!Ob(b,bf(this)))return;if(b=this.Ha){a.ad(this.$);!b.Ad||Lf(this);this.An=true;for(var c=0;c<b.Za.length;++c){var d=b.Za[c];if(c<this.zb.length)d.O=this.zb[c];if(dd(d.O)==(this.r.ec==lf)){d.xe!=null&&a.ad(E(this.$,d.xe));Fd(a,d.O);Gd(a,d);d.xe!=null&&a.ad(this.$)}}}};
function Of(a,b){b=b.length;if(b>a.Xf.length)for(;a.Xf.length<b;){var c={};c.vc=new s(0,0,0);c.Ob=new s(1,1,1);c.wc=new Ab;a.Xf.push(c)}}function Kf(a,b){if(a.An){var c=a.Ha;if(c){Mf(a,b);a.Pi=q();a.Yi=true;Of(a,c.ra);for(b=0;b<c.ra.length;++b){var d=a.Xf[b],e=c.ra[b];d.vc=e.vc.e();d.Ob=e.Ob.e();d.wc=e.wc.e()}}}}
function Mf(a,b){var c=a.Ha;if(c){var d=1;if(a.Yi){var e=q();if(e-a.Pi>a.ed)a.Yi=false;else{d=(e-a.Pi)/a.ed;Of(a,c.ra);for(e=0;e<c.ra.length;++e){var f=a.Xf[e],g=c.ra[e];g.vc=f.vc.e();g.Ob=f.Ob.e();g.wc=f.wc.e()}}}a=d;if(!c.Ad||n.D(c.Pk,b)&&a==1)c=false;else{c.Pk=b;if(a<0)c=false;else{if(n.D(a,1))for(d=0;d<c.ra.length;++d){e=c.ra[d];f=e.vc.e();g=e.Ob.e();var i=e.wc.e();od(c,b,e,f,e.so,g,e.Ao,i,e.zo);e.vc=f.e();e.Ob=g.e();e.wc=i.e()}else for(d=0;d<c.ra.length;++d){e=c.ra[d];var j=e.vc.e(),m=e.Ob.e(),
o=e.wc.e();f=j.e();g=m.e();i=o.e();od(c,b,e,f,e.so,g,e.Ao,i,e.zo);e.vc=La(j,f,a);e.Ob=La(m,g,a);Cb(e.wc,o,i,a)}for(b=0;b<c.ra.length;++b){a=c.ra[b];if(a.ff.length||a.se.length||a.kf.length){if(!a.wc)a.wc=new Ab;if(!a.vc)a.vc=new s;a.Zf=Db(a.wc);d=a.Zf;e=a.vc;d.p+=e.c*d.G;d.u+=e.b*d.G;d.s+=e.d*d.G;d.v+=e.c*d.H;d.q+=e.b*d.H;d.t+=e.d*d.H;d.w+=e.c*d.I;d.A+=e.b*d.I;d.n+=e.d*d.I;d.J+=e.c*d.L;d.K+=e.b*d.L;d.B+=e.d*d.L;d.Oa=false;a.Hm=false;if(a.se.length&&a.Ob&&!(n.D(a.Ob.c,1)&&n.D(a.Ob.b,1)&&n.D(a.Ob.d,
1))){e=a.Ob;d.p*=e.c;d.u*=e.c;d.s*=e.c;d.G*=e.c;d.v*=e.b;d.q*=e.b;d.t*=e.b;d.H*=e.b;d.w*=e.d;d.A*=e.d;d.n*=e.d;d.I*=e.d}}else a.Zf=a.zh.e()}c=c.pm=true}}return c}}Gf.prototype.po=function(){if(this.r!=null)for(var a=0;a<this.xb.length;){var b=0,c=this.xb[a].Ej;if(c!=-1)b=Pf(this.r,this,c);if(b&&b.k()=="dummytrans"){this.xb[a].xa=b;++a}else this.xb.splice(a,1)}};
function Nf(a){var b=a.Ha;if(b&&b.Ad){Mf(a,a.yc);pd(b,null,null);b=b.ra;for(var c=0;c<a.xb.length;++c){var d=a.xb[c];if(d.Wf>=0&&d.Wf<b.length&&d.xa!=null){var e=b[d.Wf];if(e)d.xa.lg=e.Re.e()}}}}Gf.prototype.zi=function(a,b){for(var c=0;c<this.xb.length;++c)if(this.xb[c].xa==a)this.xb[c].xa=b&&b.k()=="dummytrans"?b:null};function Qf(){this.g=new y;this.Yo=this.Ep=0}Qf.prototype=new $;function Rf(){this.eb();this.g=new y;this.lg=new D}Rf.prototype=new $;Rf.prototype.h=function(a,b,c){var d=new Rf;cf(this,d,a,b,c);if(this.g)d.g=this.g.e();if(this.lg)d.lg=this.lg;return d};Rf.prototype.Zl=ea("lg");Rf.prototype.k=k("dummytrans");function Sf(){this.eb();this.g=new y}Sf.prototype=new $;Sf.prototype.k=k("terrain");function Tf(){this.Dm=0;this.ck=new Qa(1,1);this.Cn=this.Dn=0.5;this.mi=n.Cf(190,255,255,255);this.zm=true;this.wn=n.Cf(190,0,100,0);this.Fk=false;this.Tk=0;this.Mm=new D;this.Zi=false;this.O=new cd;this.O.Bc=false;this.O.i=-1;this.O.be=false;this.Gm=this.gf=null}Tf.prototype=new kf;l=Tf.prototype;l.k=k("water");
l.Ka=function(a){if(this.V){jf(a,this,lf);$.prototype.Ka.call(this,a);var b=a.ga,c=q(),d=false;if(this.Tk){d=100;if(b){var e=O(b),f=Sa(this.lb()).getLength();e=O(this).vb(e);if(e>f)d*=e/f;if(d>1E3)d=1E3;b.Ec.D(this.Mm)||(d=10);this.Mm=b.Ec.e()}d=this.Tk+d<c}else d=true;if(d){this.Tk=c;jf(a,this,Je)}if(this.Fk)jf(a,this,Le);else if(b){b=O(b);c=O(this);if(b.b<c.b){c=bf(this);b.c>=c.C.c&&b.c<=c.M.c&&b.d>=c.C.d&&b.d<=c.M.d&&jf(a,this,Le)}}}};l.Gb=function(a,b){kf.prototype.Gb.call(this,a,b);return true};
l.nb=function(a){var b=this.r.ga;if(b&&this.U){if((b=this.r.Ui)&&this.r.ec!=Le)if(!Ob(b,bf(this)))return;if(this.r.ec==lf){if(!(this.O.i==-1||this.gf==null))if(!this.Zi){a.ad(this.$);if(b=this.U){this.g=b.g;this.O.bb=this.gf;if(b&&b.wa&&b.wa.length>0)this.O.pc=b.wa[0].O.bb;for(var c=0;c<b.wa.length;++c){var d=b.wa[c];if(d){Fd(a,this.O);Gd(a,d)}}}}}else if(this.r.ec==Je){if(Uf(this,a)){c=a.Wi;a.Vf=true;if(Xd(a,this.gf,true,true,this.r.ah)){this.Zi=true;b=this.r.ga;d=b.kb;var e=b.Ec,f=b.Jb,g=b.fa,i=
b.f,j=b.Yj,m=b.ki;b.ki=true;b.Yj=false;var o=O(this).b,p=g.e(),h=i.e();h.b=-i.b+2*o;b.f=h;p.b=-g.b+2*o;b.fa=p;var w=new D;ub(w,h,p,new s(0,1,0));b.Ec=w;p=new Wa;o=new s(0,o,0);h=new s(0,1,0);p.j=h.e();ab(p,o);o=p.e();p=x(o.j,-o.Xa);mb(w,p);h=o.j.e();h.normalize();var t=ib(w);if(!n.D(t.c,0)&&!n.D(t.b,0)&&!n.D(t.d,0)&&(!n.D(t.c,1)||!n.D(t.b,1)||!n.D(t.d,1))){h.c*=1/(t.c*t.c);h.b*=1/(t.b*t.b);h.d*=1/(t.d*t.d)}jb(w,h);h.normalize();o.j=h.e();ab(o,p);w=new D;p=w=d.e();h=n.Eo(o.j.c+p.w)/p.p;t=n.Eo(o.j.b+
p.A)/p.q;h=-2/(h*o.j.c+t*o.j.b+-1*o.j.d+(1+p.n)/p.B*o.Xa);p.s=o.j.c*h;p.t=o.j.b*h;p.n=o.j.d*h+1;p.B=o.Xa*h;this.Gm=w;Ke(this.r,a,this);b.ki=m;b.kb=d;b.Ec=e;b.fa=g;b.f=i;b.Jb=f;b.Yj=j;a.Vf=false;Xd(a,c,false,true);this.Zi=false}a.Vf=false}}else if(this.r.ec==Le&&!this.Zi){this.zm&&!this.Fk&&Md(a,0,0,a.Mb(),a.Lb(),this.wn,true);this.Fk&&Nd(a,10,10,250,200,this.gf,false)}}};l.h=function(a,b,c){var d=new Tf;cf(this,d,a,b,c);if(this.U)d.U=this.U.e();d.Sh=this.Sh;d.zc=this.zc;if(this.g)d.g=this.g.e();return d};
function Uf(a,b){if(a.hp)return a.gf!=null;a.hp=true;Vf(a,b);if(!a.gf)return false;var c=b.Z;a.O.i=Ud(b,a.Aq,a.Sp,true,c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,function(){var d=b.Z,e=Vd(b,a.O.i);if(e){var f=d.getUniformLocation(e,"mWaterColor");d.uniform4f(f,n.Zc(a.mi)/255,n.Xc(a.mi)/255,n.Wc(a.mi)/255,n.Sd(a.mi)/255);f=q()/1E3%1E3;var g=d.getUniformLocation(e,"mWaveMovement");d.uniform2f(g,a.ck.c*f,a.ck.b*f);f=d.getUniformLocation(e,"mWaveLength");d.uniform1f(f,a.Dn*100);e=d.getUniformLocation(e,"mWaveHeight");
d.uniform1f(e,a.Cn)}});return true}Tf.prototype.Aq="\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\tuniform float mWaveLength;\t\t\t\t\t\t\t\t\t\tuniform vec2 mWaveMovement;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec2 WavesTexCoord;\t\t\t\t\t\t\t\t\t\tvarying vec3 TexCoord;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec4 pos = worldviewproj * vPosition;\t\t\t\t\t        gl_Position = pos;\t\t\t\t\t\t\t\t\t\t\t\tWavesTexCoord = (vPosition.xz / mWaveLength) + mWaveMovement;\t\t\tTexCoord.x = 0.5 * (pos.w + pos.x);\t\t\t\t\t\t\t\tTexCoord.y = 0.5 * (pos.w + pos.y);\t\t\t\t\t\t\t\tTexCoord.z = pos.w;\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
Tf.prototype.Sp="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\tuniform float\t\tmWaveHeight;\t\t\t\t\t\t\t\tuniform vec4\t\tmWaterColor;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 WavesTexCoord;\t\t\t\t\t\t\t\t\t\tvarying vec3 TexCoord;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec4 normalClr = texture2D(texture2, WavesTexCoord.xy);\t\t\tvec2 waveMovement = mWaveHeight * (normalClr.xy - 0.5);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec2 projTexCoord = clamp((TexCoord.xy / TexCoord.z) + waveMovement, 0.0, 1.0);\t\t\t\tvec4 reflectiveColor = texture2D(texture1, vec2(projTexCoord.x, -projTexCoord.y) );\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgl_FragColor = mWaterColor * reflectiveColor;\t\t\t\t\tgl_FragColor.a = mWaterColor.a;\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
function Vf(a,b){if(b!=null){var c=b.Mb(),d=b.Lb(),e=512,f=512;switch(a.Dm){case 0:e=c/2;f=d/2;break;case 1:e=c/3;f=d/3;break;case 2:e=c/4;f=d/4;break}e=wd(b,e);f=wd(b,f);e=Math.min(e,f);f=Math.min(e,f);if(e<64)e=64;if(f<64)f=64;a.gf=Wd(b,e,f)}}function Wf(a,b){a.Gm.Ca(b.kb)};function Xf(){this.eb()}Xf.prototype.eb=function(){this.La=new $;this.La.r=this;this.l="";this.ah=0;this.wd=null;this.Nb=new ra;this.Nb.nc=0;this.Nb.ic=0;this.Nb.dc=0;this.zd=1;this.oh=false;this.Rb=n.Cf(255,200,200,200);this.nh=0.0010;this.wh=null;this.Ma=0;this.ga=null;this.Ik=false;this.rj=new D;this.Ap=null;this.Lj=2;this.ec=0;this.Sj=[];this.ug=[];this.Ye=[];this.Mj=[];this.Ij=[];this.Lc=[];this.wp=this.gp=0;this.Dp=false;this.Ui=null;this.zn=false;this.ih=[];this.Qk=new s};Xf.prototype.gk=k("unknown");
function Ke(a,b,c){a.ec=Yf;var d=null;if(a.ga){d=O(a.ga);a.ga.nb(b)}a.ec=Zf;a.nn&&a.nn.nb(b);Pd(b);b.Nb=a.Nb.e();b.oh=a.oh;b.Rb.Jf=1;b.Rb.nc=n.Zc(a.Rb)/255;b.Rb.ic=n.Xc(a.Rb)/255;b.Rb.dc=n.Wc(a.Rb)/255;b.nh=a.nh;var e,f=0;d!=null&&a.Ye.length>0&&a.Ye.sort(function(j,m){j=ya(d,O(j));m=ya(d,O(m));if(j>m)return 1;if(j<m)return-1;return 0});a.ec=tf;for(e=0;e<a.Ye.length;++e)a.Ye[e].nb(b);f+=a.Ye.length;c&&Wf(c,b);e=c=null;var g=b.kb,i=b.Pd;if(g!=null&&i!=null&&d!=null){e=new Gb;e.qk(E(g,i));if(a.Dp)c=
e.lb(d)}a.Ui=e;a.ec=mf;for(e=0;e<a.Sj.length;++e){g=a.Sj[e];if(c==null||Va(c,bf(g))){g.nb(b);f+=1}}a.ec=lf;d!=null&&a.ug.length>0&&a.ug.sort(function(j,m){j=ya(d,O(j));m=ya(d,O(m));if(j<m)return 1;if(j>m)return-1;return 0});for(e=0;e<a.ug.length;++e){g=a.ug[e];if(c==null||Va(c,bf(g))){g.nb(b);f+=1}}a.gp=f}Xf.prototype.getName=ea("l");Xf.prototype.km=ca("l");function $f(a,b){a.ga=b}function Ge(a){a.Ik=true}
function jf(a,b,c){if(c==null)c=mf;switch(c){case Zf:a.nn=b;break;case mf:a.Sj.push(b);break;case tf:a.Ye.push(b);break;case Yf:break;case lf:a.ug.push(b);break;case Le:a.Ij.push(b);break;case Je:a.Mj.push(b);break}}function Ne(a,b){if(a.La==null)return null;var c=[];ag(a,a.La,b,c);return c}function ag(a,b,c,d){b.k()==c&&d.push(b);for(var e=0;e<b.X.length;++e)ag(a,b.X[e],c,d)}function rc(a,b){if(a.La==null)return null;var c=[];bg(a,a.La,b,c);return c}
function bg(a,b,c,d){N(b,c)!=null&&d.push(b);for(var e=0;e<b.X.length;++e)bg(a,b.X[e],c,d)}function cg(a,b){if(a.La==null)return null;return dg(a,a.La,b)}function dg(a,b,c){if(b.l==c)return b;for(var d=0;d<b.X.length;++d){var e=dg(a,b.X[d],c);if(e)return e}return null}function G(a,b){if(a.La==null)return null;return Pf(a,a.La,b)}function Pf(a,b,c){if(b.Ga==c)return b;for(var d=0;d<b.X.length;++d){var e=Pf(a,b.X[d],c);if(e)return e}return null}
function eg(a,b){if(b!=null){for(var c=0;c<a.Lc.length;++c)if(a.Lc[c]===b)return;a.Lc.push(b)}}
function Te(a,b,c){var d=Ne(a,"mesh");if(d==null)return null;var e=null;if(c){c.clear();e=c}else e=new fg;for(c=0;c<d.length;++c){var f=d[c];if(f&&f.zc){var g=null;if(f.ab)g=f.ab;else{g=null;if(f.ub&&f.ub.k()=="terrain")g=gd;g=f.U&&ld(f.U)>100?new gg(f.U,f,64,g):new ng(f.U,f,g)}if(b&&f.ab==null)f.ab=g;Yc(e,g)}}d=Ne(a,"animatedmesh");for(c=0;c<d.length;++c)if((a=d[c])&&a.Ha&&!a.Ha.Ad&&a.Ha.ai&&!a.Ha.ai.M.D(a.Ha.ai.C)){g=a.ab?a.ab:new og(a.Ha.ai,a);if(b&&a.ab==null)a.ab=g;Yc(e,g)}return e}
function Vc(a,b,c){var d={};d.Ce=b;d.tq=c+q();a.ih.push(d)}function pg(a,b,c,d,e){if(b&&b.V&&(b.k()=="2doverlay"||b.k()=="mobile2dinput"))if(!e||e&&b.Mn()){var f=Cf(b,true,a.wh);if(f.x<=c&&f.y<=d&&f.x+f.Ta>=c&&f.y+f.Ra>=d)return b}for(f=0;f<b.X.length;++f){var g=pg(a,b.X[f],c,d,e);if(g)return g}return null}function Xc(a){for(var b=0;b<1E3;++b){var c=Math.round(Math.random()*1E4+10);if(G(a,c)==null)return c}return-1}
Xf.prototype.zi=function(a,b){if(a&&b){for(var c=0;c<a.X.length&&c<b.X.length;++c){var d=a.X[c],e=b.X[c];d&&e&&d.k()==e.k()&&b.zi(d,e)}return-1}};var Zf=1,mf=0,tf=2,Yf=3,lf=4,Le=5,Je=6;function qg(){this.eb()}qg.prototype=new Xf;qg.prototype.gk=k("panorama");function rg(){this.eb();this.Ck=new s;this.aj=new s}rg.prototype=new Xf;rg.prototype.gk=k("free");function Ee(){this.a=this.la=null;this.Hk="";this.Ab=0;this.aa=this.db=null;this.Jj="";this.sn=this.ve=null;this.Om=false;this.Qo=function(a){var b="";a=new Uint8Array(a);for(var c=0;c<a.byteLength;c++)b+=String.fromCharCode(a[c]);return b};this.Wp=function(a,b,c,d,e){this.Hk=b;this.db=c;this.aa=e;this.ve=d;if(this.db!=null)Z().db=c;if(a!=null&&b.indexOf(".ccbz")!=-1)a=this.Qo(a);if(a==null||a.length==0){la(n.na,"Error: Could not load file '"+b+"'");a=navigator.appVersion;a!=null&&a.indexOf("Chrome")!=
-1&&la(n.na,"<i>For using local files with Chrome, add the parameter '--allow-file-access-from-files' when starting the browser.<br/>Or use Firefox instead. Or run it from a web server. Or from CopperCube.</i>",true);return null}if(b.indexOf(".ccbz")!=-1)a=JSInflate.Vp(a);else if(b.indexOf(".ccbjs")!=-1)a=n.Hp(a);this.la=b=new he;this.Do();this.a=new yd(a);if(!this.fm())return null;this.sn=a;return b};this.Do=function(){var a=this.Hk,b=a.lastIndexOf("/");if(b!=-1)a=a.substring(0,b+1);this.Jj=a};this.fm=
function(){if(V(this.a)!=1701014630)return false;V(this.a);Cd(this.a,4);for(var a=0;zd(this.a)>0;){var b=this.mb();++a;if(a==1&&b!=1)return false;switch(b){case 1:this.$p();break;case 12:this.aq();break;default:this.ya()}}return true};this.ya=function(){this.a.Na=0+this.Ab};this.mb=function(){var a=0;a=Cd(this.a,2);var b=0;this.Xi=b=Cd(this.a,4);this.Ab=this.a.Na+b;return a};this.an=function(){var a=new D(false);this.mp(a);return a};this.mp=function(a){for(var b=0;b<16;++b)sb(a,b,W(this.a))};this.op=
function(){var a=new Ab;a.za=W(this.a);a.c=W(this.a);a.b=W(this.a);a.d=W(this.a);return a};this.wo=function(a){for(var b=0,c=[],d=[0,12416,925824,63447168,4194836608,2181570688],e=[],f=0;f<a;++f)e.push(Cd(this.a,1));for(;b<a;){f=0;var g=this.uq[e[b]];if(b+g>=a)return c.join("");for(var i=g;i>=0;--i){f+=e[b];++b;if(i!=0)f<<=6}if(b>a)break;f-=d[g];if(f<1114111)c.push(this.Lp(f));else return c.join("")}return c.join("")};this.Q=function(){var a=Cd(this.a,4);if(a>104857600)return"";if(a<=0)return"";return this.wo(a)};
this.uq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,
3,3,4,4,4,4,5,5,5,5];this.Lp=function(a){if(a>65535){a-=65536;return String.fromCharCode(55296+(a>>10),56320+(a&1023))}else return String.fromCharCode(a)};this.$p=function(){for(var a=this.Ab;zd(this.a)>0&&this.a.Na<a;)switch(this.mb()){case 1004:this.la.fh=V(this.a);break;case 20:this.mq();break;case 2:var b=null;switch(V(this.a)){case 0:b=new rg;this.uo(b);break;case 1:b=new qg;this.vo(b);break;default:this.ya()}this.la.Ol(b);break;default:this.ya()}};this.im=function(a,b,c,d,e,f,g){this.Hk=d;this.db=
e;this.aa=g;this.ve=f;this.a=new yd(a);this.Do();V(this.a);V(this.a);Cd(this.a,4);a=-1;d=this.mb();if(d!=1)return null;for(b=this.Ab;zd(this.a)>0&&this.a.Na<b;){d=this.mb();switch(d){case 2:d=V(this.a);++a;if(a==c){c=null;switch(d){case 0:c=new rg;this.uo(c);break;case 1:c=new qg;this.vo(c);break;default:this.ya()}return c}else this.ya();default:this.ya()}}return null};this.mq=function(){V(this.a);this.la.Po=this.Q();for(var a=this.Ab;zd(this.a)>0&&this.a.Na<a;)switch(this.mb()){case 35:V(this.a);
V(this.a);V(this.a);V(this.a);var b=V(this.a);if((b&1)!=0)this.la.yn=true;this.ya();break;case 37:b=V(this.a);V(this.a);if((b&1)!=0)if(n.na==null)n.na=new fa(elementIdOfCanvas,showFPSCounter);else ga(n.na);if((b&2)!=0){V(this.a);this.Q()}break;default:this.ya()}};this.uo=function(a){var b=this.Ab;for(this.nq(a);zd(this.a)>0&&this.a.Na<b;)switch(this.mb()){case 1007:a.Ck=this.P();a.aj=this.P();break;case 8:this.pp(a);break;case 1008:a.zd=W(this.a);break;case 1009:a.oh=S(this.a);a.nh=W(this.a);a.Rb=
V(this.a);break;default:this.ya()}};this.vo=function(){this.ya()};this.P=function(){var a=new s;a.c=W(this.a);a.b=W(this.a);a.d=W(this.a);return a};this.ql=function(){var a=new ra;a.nc=W(this.a);a.ic=W(this.a);a.dc=W(this.a);a.Jf=W(this.a);return a};this.Kq=function(){var a=W(this.a),b=W(this.a),c=W(this.a),d=W(this.a);if(a>1)a=1;if(b>1)b=1;if(c>1)c=1;if(d>1)d=1;return n.Cf(d*255,a*255,b*255,c*255)};this.Rh=function(){var a=new Qa;a.c=W(this.a);a.b=W(this.a);return a};this.oc=function(){var a=new y;
a.C=this.P();a.M=this.P();return a};this.nq=function(a){if(this.mb()==26){a.l=this.Q();a.ah=V(this.a)}else this.$o()};this.$o=function(){this.a.position-=10};this.pp=function(a){for(var b=this.Ab;zd(this.a)>0&&this.a.Na<b;)switch(this.mb()){case 9:this.cn(a,a.La,0);break;default:this.ya()}};this.cn=function(a,b,c){if(b!=null){var d=this.Ab,e=V(this.a),f=V(this.a),g=this.Q(),i=this.P(),j=this.P(),m=this.P(),o=S(this.a),p=V(this.a),h=null,w=0;if(c==0){b.V=o;b.l=g;b.ib=p}for(;zd(this.a)>0&&this.a.Na<
d;)switch(this.mb()){case 9:this.cn(a,h?h:b,c+1);break;case 10:switch(e){case 2037085030:h=new nf;h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;this.gm(h);vc(b,h);h=h;P(h);break;case 1752395110:h=new kf;h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;this.gm(h);vc(b,h);h=h;P(h);break;case 1835950438:h=new Gf;h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;this.eq(h);vc(b,h);h=h;P(h);break;case 1953526632:h=new Qf(this.aa,null);h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=
p;h.Ga=f;h.r=a;this.hq(h);vc(b,h);h=h;P(h);break;case 1819042406:h=new of;h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;this.fq(h);vc(b,h);h=h;P(h);break;case 1835098982:h=new Pe;h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.r=a;h.Ga=f;this.gq(h);vc(b,h);h=h;P(h);break;case 1751608422:h=new sf;h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;this.iq(h);vc(b,h);h=h;P(h);break;case 1935946598:h=new yf;h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;this.dq(h);vc(b,h);h=h;
P(h);break;case 1752461414:h=new uf;h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;this.jq(h);vc(b,h);h=h;P(h);break;case 1954112614:h=new Rf;h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;h.g=this.oc();for(var t=0;t<16;++t)sb(h.lg,t,W(this.a));vc(b,h);h=h;P(h);break;case 1868837478:h=new Bf(this.aa);h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;this.cq(h);vc(b,h);h=h;P(h);break;case 1668575334:h=new pf;h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;this.lq(h);
vc(b,h);h=h;P(h);break;case 1835283046:h=new Ef(this.aa,a);h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;this.bq(h);vc(b,h);h=h;P(h);break;case 1920103526:h=new Sf;h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;h.g=this.oc();vc(b,h);h=h;P(h);this.ya();break;case 1920235366:h=new Tf;h.i=e;h.f=i;h.R=j;h.ma=m;h.V=o;h.l=g;h.ib=p;h.Ga=f;h.r=a;this.pq(h);vc(b,h);h=h;P(h);break;default:if(c==0)a.Nb=this.ql();this.ya();break}break;case 11:t=this.$m();h&&h.sc(w)&&h.sc(w).qk(t);++w;break;
case 25:t=h;if(t==null&&c==0)t=a.La;this.lp(t,a);break;default:this.ya()}h&&h.po()}};this.gm=function(a){var b=this.Ab;a.g=this.oc();S(this.a);S(this.a);a.zc=S(this.a);for(S(this.a);zd(this.a)>0&&this.a.Na<b;)switch(this.mb()){case 14:var c=this.np();a.U=c;break;default:this.ya()}};this.np=function(){var a=new kd;a.g=this.oc();for(var b=this.Ab;zd(this.a)>0&&this.a.Na<b;)switch(this.mb()){case 15:var c=this.bn();c!=null&&a.sd(c);break;default:this.ya()}return a};this.bn=function(){var a=new id;a.g=
this.oc();for(var b=this.Ab;zd(this.a)>0&&this.a.Na<b;)switch(this.mb()){case 11:a.O=this.$m();break;case 16:for(var c=Math.floor(this.Xi/2),d=0;d<c;++d)a.ea.push(Cd(this.a,2));break;case 17:c=Math.floor(this.Xi/36);for(d=0;d<c;++d){var e=new Pb;e.f=this.P();e.j=this.P();e.pa=V(this.a);e.Ba=this.Rh();e.yg=new Qa;a.m.push(e)}break;case 18:c=Math.floor(this.Xi/44);for(d=0;d<c;++d){e=new Pb;e.f=this.P();e.j=this.P();e.pa=V(this.a);e.Ba=this.Rh();e.yg=this.Rh();a.m.push(e)}break;case 19:c=this.Xi/60;
a.Md=[];a.vd=[];for(d=0;d<c;++d){e=new Pb;e.f=this.P();e.j=this.P();e.pa=V(this.a);e.Ba=this.Rh();e.yg=new Qa;a.Md.push(this.P());a.vd.push(this.P());a.m.push(e)}break;default:this.ya()}return a};this.$m=function(){var a=new cd;a.i=V(this.a);V(this.a);V(this.a);V(this.a);V(this.a);W(this.a);V(this.a);V(this.a);S(this.a);S(this.a);a.Bc=S(this.a);a.Af=S(this.a);Bd(this.a,1);a.be=S(this.a);S(this.a);S(this.a);S(this.a);for(var b=0;b<4;++b){var c=this.ld();switch(b){case 0:a.bb=c;break;case 1:a.pc=c;
break}S(this.a);S(this.a);S(this.a);if(Cd(this.a,2)!=0)switch(b){case 0:a.Pb=true;break;case 1:break}}return a};this.rl=function(){return this.Q()};this.sl=function(){var a=this.Jj+this.rl();return ae(n.Rd,a,true)};this.ld=function(){var a=this.rl(),b=this.Jj+a;if(this.db!=null&&a!="")return td(this.db,b,true);return null};this.hq=function(a){var b=this.Ab;a.g=this.oc();a.Ep=V(this.a);for(a.Yo=V(this.a);zd(this.a)>0&&this.a.Na<b;)switch(this.mb()){case 3:this.kq(a);break;default:this.ya()}};this.kq=
function(a){var b=this.Ab;a.caption=this.Q();a.Bg=this.ld();this.Rh();V(this.a);a.Rq=this.Q();for(a.Zq=S(this.a);zd(this.a)>0&&this.a.Na<b;)switch(this.mb()){case 6:a.Oq=true;a.Tq=this.Q();break;case 4:a.Pq=true;a.hk=this.Q();break;case 5:a.Qq=true;a.$q=this.Q();a.ar=this.Q();break;default:this.ya()}};this.gq=function(a){a.g=this.oc();a.fa=this.P();a.Jb=this.P();a.hd=W(this.a);a.Gc=W(this.a);a.Gg=W(this.a);a.Fg=W(this.a);a.tm=S(this.a);ff(a)};this.pq=function(a){V(this.a);a.Dm=V(this.a);a.ck.c=W(this.a);
a.ck.b=W(this.a);a.Dn=W(this.a);a.Cn=W(this.a);a.mi=V(this.a);a.zm=S(this.a);a.wn=V(this.a);this.gm(a)};this.iq=function(a){a.g=this.oc();if(V(this.a)==2)a.Ya.sh=true;a.Ya.pa=this.ql();this.ql();S(this.a);a.Ya.Fa=this.P();var b=W(this.a);a.Ya.Ea=b;if(b!=0)a.Ya.$g=1/b};this.fq=function(a){a.Cc.g=this.oc();a.g=a.Cc.g;a.Zh=W(this.a);a.wg=W(this.a);var b=Bd(this.a,1);a.uh=(b&2)!=0};this.dq=function(a){a.g=this.oc();a.Ib=this.sl();a.le=W(this.a);a.Ah=W(this.a);a.Um=V(this.a);a.Vo=S(this.a);a.Qm=V(this.a);
a.Xk=V(this.a);a.Eg=W(this.a);a.jg=S(this.a);V(this.a)};this.jq=function(a){a.g=this.oc();a.Dg=W(this.a);a.Te=S(this.a);V(this.a);for(var b=V(this.a),c=0;c<b;++c)a.Bb.push(this.P())};this.lq=function(a){a.Fa=this.P();a.kd=V(this.a);a.Qb=this.P();a.$e=V(this.a);a.Bh=V(this.a);a.Ch=V(this.a);a.bg=V(this.a);a.vj=V(this.a);a.yj=V(this.a);a.wj=V(this.a);a.cg=W(this.a);a.dg=W(this.a);a.$f=W(this.a);a.Dh=W(this.a);var b=V(this.a);if(b&1){a.mh=true;a.Sf=V(this.a);a.Gk=V(this.a)}else a.mh=false;if(b&2){a.Tf=
true;a.jj=V(this.a);a.zd=this.P()}else a.Tf=false;if(b&4){a.ng=true;a.Qj=W(this.a);a.Rj=W(this.a)}else a.ng=false};this.bq=function(a){V(this.a);a.Id=S(this.a);if(a.Id){a.bf=V(this.a);a.cf=V(this.a);a.qf=V(this.a);a.pf=V(this.a)}else{a.df=W(this.a);a.ef=W(this.a);a.sf=W(this.a);a.rf=W(this.a)}a.vg=S(this.a);a.Hc=V(this.a);a.Ia=this.ld();a.ue=this.ld();a.mg=S(this.a);a.Pf=this.ld();a.lj=V(this.a);if(a.lj==1)a.Jc=V(this.a)};this.cq=function(a){if(V(this.a)&1)a.yk=true;a.Id=S(this.a);if(a.Id){a.bf=V(this.a);
a.cf=V(this.a);a.qf=V(this.a);a.pf=V(this.a)}else{a.df=W(this.a);a.ef=W(this.a);a.sf=W(this.a);a.rf=W(this.a)}a.vg=S(this.a);a.Hc=V(this.a);a.Ia=this.ld();a.ue=this.ld();a.mg=S(this.a);a.Qe=S(this.a);a.zg=Bd(this.a,1);a.cb=this.Q();a.gd=this.Q();a.tf=V(this.a);a.Xg=S(this.a);a.hl=S(this.a);a.kj=V(this.a);a.Jh=S(this.a);a.rh=V(this.a);a.Ih=S(this.a)};this.lp=function(a,b){if(a){var c=null;switch(V(this.a)){case 100:b=new $b;b.re=this.P();c=b;break;case 101:b=new Wb;b.Y=this.P();b.N=this.P();b.nd=V(this.a);
b.Ub=S(this.a);Xb(b);c=b;break;case 102:b=new sg;b.dh=this.P();b.Fa=this.P();b.Ea=W(this.a);b.$h=W(this.a);b.eb();c=b;break;case 103:b=new tg;b.Ea=this.P();W(this.a);b.Li=!n.D(W(this.a),0);W(this.a);b.wf=this.P();c=V(this.a);V(this.a);V(this.a);if(c&1)b.ak=true;b.Db=W(this.a);c=b;break;case 104:b=new Re(a,this.aa);b.ag=W(this.a);b.Xb=W(this.a);b.Yb=W(this.a);b.ie=W(this.a);b.ne=S(this.a);c=V(this.a);if(c&1){b.nk=false;b.Mg=true}else{b.nk=true;b.Mg=false}if(c&2)b.Cj=V(this.a);if(a){b.Ho=n.yi(a.hd);
b.dm=b.Ho+10;b.Bq=(b.dm-b.lo)/50}c=b;break;case 105:b=new ug(a,this.aa);b.Ea=W(this.a);b.Yb=W(this.a);b.ne=S(this.a);c=V(this.a);if(c&2){b.on=true;b.Db=W(this.a)}if(c&4){b.um=true;b.me=W(this.a);b.ke=W(this.a);b.ni=W(this.a)}c=b;break;case 106:var d=new vg(b);d.hi=V(this.a);d.uj=S(this.a);d.Lh=this.Q();d.Fj=S(this.a);d.Ke=this.P();d.Rf=Bd(this.a,1);d.bh=this.Q();c=V(this.a);if(c&1)d.fi=V(this.a);if(d.Rf==3||d.Rf==4)d.o=this.hb(b);c=d;break;case 107:c=new yc(b,this.aa);c.Oe=S(this.a);c.xc=S(this.a);
V(this.a);c.o=this.hb(b);c=c;break;case 108:d=new wg(b);d.kh=V(this.a);d.Kj=V(this.a);d.Qh=W(this.a);d.tg=V(this.a);c=V(this.a);if(c&1){d.vm=1;d.pl=this.P()}d.o=this.hb(b);c=d;break;case 109:b=new xg;b.md=V(this.a);b.vf=V(this.a);b.Ag=V(this.a);b.Ub=S(this.a);c=V(this.a);b.Va=[];for(d=0;d<c;++d)b.Va.push(this.ld());c=b;break;case 110:c=new yg(b,this.aa);c.Oe=S(this.a);c.xc=S(this.a);V(this.a);c.$d=this.hb(b);c.Yd=this.hb(b);c=c;break;case 111:c=new zg(b);c.Cg=V(this.a);V(this.a);c.o=this.hb(b);c=
c;break;case 112:c=new Ag(b,this.aa);c.Yf=V(this.a);c.Jc=V(this.a);c.Gq=S(this.a);V(this.a);c.o=this.hb(b);c=c;break;case 113:d=new Bg(b);d.bd=V(this.a);d.Ed=W(this.a);d.Ug=W(this.a);d.Mf=S(this.a);d.Sb=V(this.a);d.Xj=this.Q();d.Zg=this.Q();d.Mh=W(this.a);d.Vh=V(this.a);d.wb=this.P();d.Ld=this.Q();d.Qd=this.Q();d.cj=this.Q();d.Ni=this.Q();if(d.bd==3)d.Kh=V(this.a);c=V(this.a);if(c&1)d.ig=V(this.a);else{d.ig=1E4;if(d.Ed!=0)d.ig=d.Mh/(d.Ed/1E3)}d.cd=this.hb(b);d.Wd=this.hb(b);d.Zd=this.hb(b);d.Xd=this.hb(b);
c=d;break;case 114:b=new Cg;b.Wh=V(this.a);b.wb=this.P();b.hj=V(this.a);b.ge=W(this.a);b.Zj=W(this.a);c=V(this.a);b.xc=c&1?true:false;c=b;break;case 115:b=new Dg(b,this.aa);V(this.a);b.Pj=W(this.a);b.Xb=W(this.a);b.Yb=W(this.a);b.ie=W(this.a);b.wb=this.P();b.Ld=this.Q();b.Qd=this.Q();b.oj=this.Q();b.Oj=this.Q();c=V(this.a);if(c&1)b.ej=true;if(c&2){b.ii=true;b.Ii=W(this.a);b.Qf=W(this.a)}if(c&4)b.ll=true;c=b;break;case 116:c=new Eg(b);c.Oo=S(this.a);V(this.a);c.o=this.hb(b);c=c;break;case 117:c=new n.Le(b);
c.Tb=this.Q();V(this.a);this.Zm(c.mc,b);c=c;break;default:this.ya();return}c&&Yb(a,c)}else this.ya()};this.Zm=function(a,b){for(var c=V(this.a),d=0;d<c;++d){var e=new Fg;e.i=V(this.a);e.l=this.Q();switch(e.i){case 1:e.hc=W(this.a);break;case 2:e.Qc=this.Q();break;case 6:e.yf=this.P();break;case 7:e.di=this.ld();break;case 9:e.Tg=this.hb(b);break;case 0:case 4:case 5:case 8:case 3:default:e.jc=V(this.a);break}a.push(e)}};this.hb=function(a){if(V(this.a)){var b=new Qc(a);this.jp(b,a);return b}return null};
this.jp=function(a,b){var c=this.mb();if(c!=29)this.ya();else for(var d=this.Ab;zd(this.a)>0&&this.a.Na<d;){c=this.mb();if(c==30)(c=this.ip(V(this.a),b))&&Rc(a,c);else this.ya()}};this.aq=function(){for(var a=this.Ab;zd(this.a)>0&&this.a.Na<a;)switch(this.mb()){case 13:var b=V(this.a),c=this.Q(),d=V(this.a);if(b&4){if(b=md(this.ve,c))b.ra.length>0||b.Za.length>0?this.ya():this.oq(b,d)}else if(b&8){b=null;try{b=this.wo(d)}catch(e){la(n.na,"error reading script: "+e)}if(b!=null){d=Z();Gg(d,b)}}this.ya();
break;default:this.ya()}};this.eq=function(a){a.g=this.oc();S(this.a);V(this.a);var b=V(this.a),c=V(this.a);a.yb=W(this.a);Bd(this.a,1);a.Vb=S(this.a);var d=V(this.a);if(d==0){a.ed=250;a.ae=true}else if(d&1){a.ed=V(this.a);a.ae=a.ed>0}a.Co(this.kp(a));a.Sa=b;a.rb=c;if(d&2){b=V(this.a);for(c=0;c<b;++c){d=new n.hn;d.Ej=V(this.a);d.Wf=V(this.a);a.xb.push(d)}}};this.kp=function(a){var b=this.rl(),c=md(this.ve,b);if(c==null){c=new n.Bl;c.l=b;c!=null&&this.ve.Wk.push(c);c=c}if(a!=null&&c!=null){if(c.td==
null)c.td=[];c.td.push(a)}return c};this.oq=function(a,b){if(a!=null){var c=V(this.a);a.Dk=W(this.a);if(c&1)a.ai=this.oc();c=this.Ab;b=this.a.Na+b;for(var d=[],e=0;zd(this.a)>0&&this.a.Na<c&&this.a.Na<b;){var f=this.mb();if(f==33){f=new n.rp;f.l=this.Q();f.zh=this.an();f.qh=this.an();a.ra.push(f);e=V(this.a);d.push(f);e>=0&&e<d.length&&d[e].X.push(f);e=V(this.a);for(var g=0;g<e;++g)f.Yg.push(V(this.a));g=V(this.a);for(e=0;e<g;++e){var i=new n.sp;i.frame=W(this.a);i.position=this.P();f.ff.push(i)}g=
V(this.a);for(e=0;e<g;++e){i=new n.up;i.frame=W(this.a);i.scale=this.P();f.se.push(i)}g=V(this.a);for(e=0;e<g;++e){i=new n.tp;i.frame=W(this.a);i.rotation=this.op();f.kf.push(i)}g=V(this.a);for(e=0;e<g;++e){i=new n.vp;i.oi=Cd(this.a,2);i.Hi=V(this.a);i.Ei=W(this.a);f.zf.push(i)}}else if(f==15){f=this.bn();f!=null&&a.sd(f)}else if(f==34){f=new n.Gh;f.l=this.Q();f.ud=W(this.a);f.N=W(this.a);f.Ac=W(this.a);a.$k.push(f)}else this.ya()}try{a.Pk=-1;a.bp=-1;b=c=0;var j,m;for(d=0;d<a.ra.length;++d){f=false;
for(c=0;c<a.ra.length;++c){m=a.ra[c];for(e=0;e<m.X.length;++e)if(m.X[e]===a.ra[d])f=true}f||a.jf.push(a.ra[d])}for(c=0;c<a.Za.length;++c){d=[];a.bk.push(d);j=a.Za[c];var o=j.m.length;for(f=0;f<o;++f)d.push(false)}a.Ad=false;d=o=0;var p,h;for(o=0;o<a.ra.length;++o){h=a.ra[o];if(h.ff.length||h.se.length||h.kf.length||h.zf.length){a.Ad=true;break}}if(a.Ad)for(o=a.dd=0;o<a.ra.length;++o){h=a.ra[o];if(h.ff.length){var w=h.ff[h.ff.length-1];if(w.frame>a.dd)a.dd=w.frame}if(h.se.length){var t=h.se[h.se.length-
1];if(t.frame>a.dd)a.dd=t.frame}if(h.kf.length){var L=h.kf[h.kf.length-1];if(L.frame>a.dd)a.dd=L.frame}}if(a.Ad&&!a.Wm){a.Wm=true;for(o=0;o<a.ra.length;++o){h=a.ra[o];for(d=0;d<h.zf.length;++d){var A=h.zf[d],u=A.Hi;p=a.Za[A.oi];var H=p.m[u];A.rn=H.f.e();A.qn=H.j.e()}}}nd(a,null,null);for(c=0;c<a.ra.length;++c){m=a.ra[c];for(b=0;b<m.Yg.length;++b){j=a.Za[m.Yg[b]];j.xe=m.Re.e()}}if(a.Za.length==0){a.pb.C.set(0,0,0);a.pb.M.set(0,0,0)}else{j=a.Za[0];a.pb.C=j.g.C.e();a.pb.M=j.g.M.e();for(c=1;c<a.Za.length;++c){j=
a.Za[c];if(j.xe==null){z(a.pb,j.g.C);z(a.pb,j.g.M)}else{var M=j.g.e();zb(j.xe,M);z(a.pb,M.C);z(a.pb,M.M)}}}}catch(J){la(n.na,"error finalizing skinned mesh: "+J)}if(a.td&&a.td.length){for(e=0;e<a.td.length;++e)(j=a.td[e])&&Hf(j,j.Sa,j.rb);a.td=null}}};this.ip=function(a,b){var c=0;switch(a){case 0:c=new Ub;c.mj=V(this.a);c.mf=V(this.a);c.ba=S(this.a);V(this.a);return c;case 1:b=new Vb;b.oe=V(this.a);b.Nc=V(this.a);b.ba=S(this.a);b.ha=this.P();if(b.oe==4)b.Mi=this.P();b.hf=S(this.a);b.Mc=V(this.a);
c=V(this.a);if(c&1){b.Nd=true;b.Rc=V(this.a)}return b;case 2:b=new Zb;b.xl=V(this.a);b.pg=V(this.a);b.ba=S(this.a);b.ha=this.P();b.Nj=false;c=V(this.a);if(c&1){b.Nj=true;b.Jl=V(this.a)}return b;case 3:c=new dc;c.zl=V(this.a);c.qg=V(this.a);c.ba=S(this.a);c.ha=this.P();V(this.a);return c;case 4:c=new ec;c.md=V(this.a);c.Zb=V(this.a);c.ba=S(this.a);c.Bg=this.ld();if(c.md==1)c.Kk=V(this.a);V(this.a);return c;case 5:b=new Ic;c=V(this.a);b.af=(c&1)!=0;b.Ib=this.sl();b.le=W(this.a);b.Ah=W(this.a);b.Eg=
W(this.a);b.jg=S(this.a);b.Oc=V(this.a);b.kg=S(this.a);b.ml=this.P();return b;case 6:c=new Mc;c.pn=V(this.a);return c;case 7:c=new fc;V(this.a);c.Nk=this.Q();return c;case 8:c=new gc;V(this.a);c.Ml=this.Q();c.fa=this.Q();return c;case 9:c=new hc;c.og=V(this.a);c.ba=S(this.a);c.Ub=S(this.a);c.wk=this.Q();V(this.a);return c;case 10:c=new jc(this.aa);c.lf=this.Q();V(this.a);return c;case 11:c=new lc(this.aa);c.Lf=V(this.a);V(this.a);return c;case 12:b=new nc;b.oe=V(this.a);b.Nc=V(this.a);b.ba=S(this.a);
b.ha=this.P();b.hf=S(this.a);b.Mc=V(this.a);c=V(this.a);if(c&1){b.Nd=true;b.Rc=V(this.a)}return b;case 13:a=new qc;a.Yh=V(this.a);a.ee=V(this.a);a.Ri=W(this.a);a.of=V(this.a);a.Sc=W(this.a);c=V(this.a);if(c&1){a.nf=V(this.a);a.Uj=S(this.a);a.Vg=this.P()}if(c&2)a.Sg=this.hb(b);if(c&4)a.Tj=this.P();return a;case 14:this.ya();return null;case 15:c=new Rb;V(this.a);c.Zb=V(this.a);c.ba=S(this.a);c.cb=this.Q();return c;case 16:c=new Ac;V(this.a);c.Kb=this.Q();c.jl=V(this.a);c.xf=V(this.a);c.Od=this.Q();
return c;case 17:a=new Gc;c=V(this.a);a.Kb=this.Q();a.Ti=V(this.a);a.xf=V(this.a);a.Od=this.Q();a.o=this.hb(b);if(c&1)a.ei=this.hb(b);return a;case 18:c=new Hc;c.Xh=V(this.a);c.ba=S(this.a);V(this.a);return c;case 19:c=new Nc;V(this.a);c.Kb=this.Q();c.sj=S(this.a);return c;case 20:c=new Tc(this.aa);V(this.a);c.lf=this.Q();this.Om=true;return c;case 22:c=new Wc;c.rg=V(this.a);c.zk=S(this.a);V(this.a);c.o=this.hb(b);return c;case 23:c=new Uc;c.sg=V(this.a);c.Ek=S(this.a);c.Fl=V(this.a);V(this.a);return c;
case 24:c=new Hg;c.Tb=this.Q();V(this.a);this.Zm(c.mc,b);return c;case 25:a=new Zc(this.aa);c=V(this.a);a.af=(c&1)!=0;a.Si=V(this.a);a.Kl=this.Q();V(this.a);a.Oc=V(this.a);a.kg=S(this.a);a.Vk=V(this.a);a.Ki=this.hb(b);a.Ji=this.hb(b);return a;case 26:c=new Kc;V(this.a);c.Ib=this.sl();return c;default:this.ya()}return null}};function Ig(){this.i=-1}l=Ig.prototype;l.k=k("none");l.gb=k(false);l.Ud=aa();l.Hf=aa();l.pd=aa();l.Fe=aa();l.De=k(false);l.Ee=k(false);l.reset=aa();l.Df=k(null);l.h=k(null);function Re(a,b){this.i=-1;this.tc=0;this.ne=false;this.Mg=true;this.ti=this.ze=this.Ie=this.Ge=this.Be=this.em=this.nk=false;this.Cj=0;this.Lg=new s(0,0,0);this.hm=this.Vd=this.bm=0;this.lo=20;this.dm=100;this.Bq=(this.dm-this.lo)/50;this.Ho=90;this.tc=q();this.oa=a;this.aa=b;this.Cd=this.Bd=-1;a&&pc(this,a.fa)}Re.prototype=new Ig;l=Re.prototype;l.k=k("camerafps");l.ag=88;l.Xb=0.06;l.Yb=200;l.ie=0;l.ne=false;l.xj=true;function Se(a,b){a.xj=b}
function pc(a,b){if(a.oa!=null){b=b.substract(a.oa.f);b=Ja(b);a.Vd=b.c;a.hm=b.b;if(a.Vd>a.ag)a.Vd-=360}}l=Re.prototype;
l.gb=function(a){if(this.oa==null)return false;if(this.oa.r.ga!==this.oa)return false;var b=q(),c=b-this.tc;if(c==0)return false;if(c>250)c=250;this.tc=b;var d=this.oa.f.e();if(this.xj&&(this.Ie||this.ze)){var e=this.oa.f.substract(this.oa.fa);if(this.ne)e.b=0;e.normalize();this.Ie&&d.ua(x(e,this.Xb*-c));this.ze&&d.ua(x(e,this.Xb*c))}if(this.xj&&(this.Be||this.Ge)){e=Ia(this.oa.f.substract(this.oa.fa),this.oa.Jb);e.normalize();if(this.Be){e=x(e,this.Xb*-c);d.ua(e);oc(this.oa,this.oa.fa.add(e))}if(this.Ge){e=
x(e,this.Xb*c);d.ua(e);oc(this.oa,this.oa.fa.add(e))}}if(this.Cj!=0){e=d.substract(this.oa.f);if(xa(e)){if(this.bm!=0&&!xa(this.Lg)){e=b-this.bm;if(e>0&&e<this.Cj){e=this.Lg.getLength()*(1-e/this.Cj)*c;var f=this.Lg.e();f.normalize();Ca(f,e*0.5);d.ua(f)}else this.Lg.set(0,0,0)}}else{this.Lg=e;Ca(this.Lg,1/c);this.bm=b}}this.oa.f=d;d=new s(0,0,1);e=new D;vb(e,new s(this.Vd,this.hm,0));mb(e,d);e=false;if(this.aa!=null)e=this.aa.wi;var g=0;var i=f=2.0E-5,j=false;if(this.aa!=null&&a.r!=null&&!e){j=a.r;
j=j.La==null||j.wh==null?null:pg(j,j.La,this.aa.Eb,this.aa.Fb,true);j=j!=null}if(this.Mg){f*=3;i*=3}if(!j)if(e)g=this.aa.Fb;else if(this.nk){var m=this.aa.S.Lb(),o=this.aa.Fb;if(m>0&&o>0&&this.aa.Fh)g=Math.sin((o-m/2)/m)*100*0.5}else if(this.Mg||this.em)if(this.aa.Eh){m=this.aa.Fb;g=this.Cd==-1?0:m-this.Cd;if(g!=0)this.aa.Rk=b;this.Cd=m}else this.Cd=-1;g+=0;c=c;if(c>100)c=100;if(g>300)g=300;if(g<-300)g=-300;this.Vd+=g*c*this.Yb*i;if(this.Vd<-this.ag)this.Vd=-this.ag;if(this.Vd>this.ag)this.Vd=this.ag;
g=0;if(!j)if(e)g=this.aa.Eb;else if(this.nk){b=this.aa.S.Mb();i=this.aa.Eb;if(b>0&&i>0&&this.aa.Fh)g=Math.sin((i-b/2)/b)*100*0.5}else if(this.Mg||this.em)if(this.aa.Eh){i=this.aa.Eb;g=this.Bd==-1?0:i-this.Bd;if(g!=0)this.aa.Rk=b;this.Bd=i}else this.Bd=-1;g+=0;if(g>300)g=300;if(g<-300)g=-300;this.hm+=g*c*this.Yb*f;if(e||this.Mg||this.em)Xe(this.aa);if(this.xj&&this.ti)(a=N(a,"collisionresponse"))&&!a.fe&&Jg(a,this.ie);oc(this.oa,this.oa.f.add(d));return false};
l.Ud=function(a){Ig.prototype.Ud.call(this,a)};l.Hf=aa();l.pd=function(a){Ig.prototype.pd.call(this,a)};l.Fe=function(a){Ig.prototype.Fe.call(this,a)};l.Ai=function(a,b){if(b==37||b==65){if(this.Be=a)this.Ge=false;return true}if(b==39||b==68){if(this.Ge=a)this.Be=false;return true}if(b==38||b==87){if(this.Ie=a)this.ze=false;return true}if(b==40||b==83){if(this.ze=a)this.Ie=false;return true}if(b==32){this.ti=a;return true}return false};l.De=function(a){return this.Ai(true,a.keyCode)};
l.Ee=function(a){return this.Ai(false,a.keyCode)};function ug(a,b){this.i=-1;this.Yb=1E4;this.Ea=100;this.ne=false;this.tc=q();this.oa=a;this.aa=b;this.on=false;this.Kd=this.Jd=this.Db=0;this.um=false;this.ni=this.ke=this.me=0;this.Dc=90;this.dl=-66666;this.Cd=this.Bd=-1}ug.prototype=new Ig;l=ug.prototype;l.k=k("cameramodelviewer");l.Yb=0.06;l.Ea=100;l.ne=false;
l.gb=function(){if(this.oa==null)return false;if(this.oa.r.ga!==this.oa)return false;var a=q(),b=a-this.tc;if(b>250)b=250;this.tc=a;a=this.oa.f.e();var c=this.oa.fa.e(),d=c.substract(O(this.oa)),e=0,f=0;if(this.aa.Eh){var g=this.aa.Eb,i=this.aa.Fb;e=(this.Bd==-1?0:g-this.Bd)*this.Yb/5E4;f=(this.Cd==-1?0:i-this.Cd)*this.Yb/5E4;this.Bd=g;this.Cd=i}else this.Cd=this.Bd=-1;if(this.on&&this.Db!=0){if(n.qa(e)){e=this.Jd;this.Jd*=0.9;if(this.Jd>0)this.Jd=Math.max(0,this.Jd-b/this.Db);else if(this.Jd<0)this.Jd=
Math.min(0,this.Jd+b/this.Db)}else this.Jd=e*(this.Db/1E3);if(n.qa(f)){f=this.Kd;this.Kd*=0.9;if(this.Kd>0)this.Kd=Math.max(0,this.Kd-b/this.Db);else if(this.Kd<0)this.Kd=Math.min(0,this.Kd+b/this.Db)}else this.Kd=f*(this.Db/1E3)}d=Ia(d,this.oa.Jb);d.b=0;d.normalize();if(!n.qa(e)){Ca(d,b*e);a.ua(d)}if(!this.ne&&!n.qa(f)){e=this.oa.Jb.e();e.normalize();b=a.add(x(e,b*f));f=b.e();f.b=c.b;e=this.Ea/10;if(f.vb(c)>e)a=b}if(this.ne){if(n.D(this.dl,-66666))this.dl=a.b;a.b=this.dl}Xe(this.aa);if(this.um){b=
n.yi(this.oa.hd);if(this.Dc<this.me)this.Dc=this.me;if(this.Dc>this.ke)this.Dc=this.ke;f=this.ni;f=Math.abs(this.Dc-b)/8;if(f<this.ni)f=this.ni;if(b<this.ke-f&&b<this.Dc){b+=f;if(b>this.ke)b=this.ke}if(b>this.me+f&&b>this.Dc){b-=f;if(b<this.me)b=this.me}gf(this.oa,n.Pn(b))}d=a.substract(c);va(d,this.Ea);a=c.add(d);this.oa.f=a;return false};l.Hf=function(a){this.Dc+=a*this.ni;if(this.Dc<this.me)this.Dc=this.me;if(this.Dc>this.ke)this.Dc=this.ke};function vg(a){this.hi=5E3;this.uj=this.Lk=this.vn=false;this.Fj=true;this.fi=0;this.Uk=true;this.Rf=Kg;this.Wj=false;this.Dd=a;this.Ma=0;this.vn=false;this.Gd=this.qj=null;this.Wj=false;this.Lh=null;this.fi=0;this.bh=this.Ke=null;this.Lm=0;this.Gn=false}vg.prototype=new Ig;var Kg=0;vg.prototype.k=k("followpath");
vg.prototype.h=function(a,b,c,d){a=new vg;a.hi=this.hi;a.uj=this.uj;a.Fj=this.Fj;a.Lh=this.Lh;a.fi=this.fi;a.Ke=this.Ke?this.Ke.e():null;a.Rf=this.Rf;a.bh=this.bh;a.o=this.o?this.o.h(c,d):null;return a};
vg.prototype.gb=function(a,b){if(a==null||!this.Dd||!this.hi)return false;if(a!==this.qj){if(this.qj=a)this.Lk=this.qj.k()=="camera";return false}if(!this.Gd)if(!this.vn)if(this.Lh.length)if(this.Dd){var c=cg(this.Dd,this.Lh);c&&c.k()=="path"&&Lg(this,c)}if(this.Gd==null)return false;c=false;var d=null;if(this.Lk&&this.Fj){c=!this.Uk;d=a;if(this.Dd.ga!==d){if(this.Gd.Bb.length)d.f=vf(this.Gd,0);this.Uk=true;return false}else this.Uk=false;if(!this.Ma||!c)this.Ma=b}if(!this.Ma)this.Ma=this.Dd.Ma;d=
(b-this.Ma+this.fi)/this.hi;if(d>1&&!this.Gd.Te)switch(this.Rf){case Kg:d%=1;break;case 1:d=1;break;case 2:d=1;if(!this.Wj){if(this.Dd)if(this.bh.length)if((c=cg(this.Dd,this.bh))&&c.k()=="camera"){(b=this.Dd.wh)&&Oe(c,b.Mb(),b.Lb());this.Dd.ga=c}this.Wj=true}break;case 3:if(d>this.Lm+1&&this.o!=null){this.o.execute(a);this.Lm=d}d%=1;break;case 4:d=1;if(!this.Gn&&this.o!=null){this.o.execute(a);this.Gn=true}break}else this.Wj=false;b=xf(this.Gd,d);c=!b.D(a.f);a.f=b;if(this.uj&&this.Gd.Bb.length){d=
xf(this.Gd,d+0.0010);if(!n.qa(d.vb(b))){var e=d.substract(b);va(e,100);if(this.Lk){d=a;a=b.add(e);c=c||!a.D(d.fa);oc(d,a)}else{if(!this.Ke||xa(this.Ke))d=Ja(e);else{d=new D;vb(d,Ja(e));b=new D;vb(b,this.Ke);d=E(d,b);d=wb(d)}c=c||!d.D(a.R);a.R=d}}}return c};function Lg(a,b){a.Gd=b}vg.prototype.Df=function(a){if(this.o)return Sc(this.o,a);return null};function Wb(a,b,c,d,e,f){this.Y=new s(0,0,0);this.N=new s(40,40,40);this.Ma=q();this.nd=3E3;this.tn=this.Wg=this.hh=this.Ub=false;this.mn=null;this.ln=0;this.Kf=this.bj=false;this.lh=0;if(a)this.Y=a.e();if(b)this.N=b.e();if(c)this.nd=c;if(d)this.Ub=d;Xb(this);if(e)this.hh=e;if(f)this.Wg=f}Wb.prototype=new Ig;Wb.prototype.k=k("flystraight");
Wb.prototype.h=function(a,b,c,d){a=new Wb;a.Y=this.Y.e();a.N=this.N.e();a.ha=this.ha.e();a.Ll=this.Ll;a.Gl=this.Gl;a.nd=this.nd;a.Ub=this.Ub;a.Wg=this.Wg;a.bj=this.bj;a.Kf=this.Kf?this.Kf.h(c,d):null;a.lh=this.lh;return a};
Wb.prototype.gb=function(a,b){var c=b-this.Ma,d=false;if(c!=0){var e=this.Y.e();if(!this.Ub&&c>=this.nd){e=this.N.e();d=true}else e.ua(x(this.ha,c%this.nd*this.Gl));if(this.Wg){if(a.k()=="camera"){oc(a,e);var f=N(a,"camerafps");f!=null&&pc(f,e)}}else a.f=e;if(this.tn&&this.Ma!=b){if(a){P(a);b=bf(a);e=false;f=rc(a.r,"gameai");for(var g=0;g<f.length;++g)if(f[g]!==this.mn){var i=N(f[g],"gameai");if(!(i&&!(i.Sb>0)))if(Va(b,bf(f[g]))){wc(i,this.ln,f[g]);e=true;break}}b=e}else b=false;d=b||d}if(d){if(a.r)a.r.Qk=
a.f.e();if(this.Kf){d=true;if(this.lh>0&&c>this.lh)d=false;d&&this.Kf.execute(a)}this.hh&&df(a,this);this.bj&&a.r&&Vc(a.r,a,0)}return true}return false};function Xb(a){a.ha=a.N.substract(a.Y);a.Ll=a.ha.getLength();a.ha.normalize();a.Gl=a.Ll/a.nd};function sg(a,b,c,d){this.dh=new s;this.Fa=new s(0,1,0);this.ji=new s;this.ye=new s;this.Ma=q();this.$h=0.01;this.Ea=100;if(a)this.dh=a.e();if(b)this.Ea=b;if(c)this.Fa=c.e();if(d)this.$h=d;this.eb()}sg.prototype=new Ig;sg.prototype.k=k("flycircle");sg.prototype.h=function(){var a=new sg;a.dh=this.dh.e();a.Fa=this.Fa.e();a.ji=this.ji.e();a.ye=this.ye.e();a.$h=this.$h;a.Ea=this.Ea;return a};
sg.prototype.gb=function(a,b){b=b-this.Ma;if(b!=0){b=b*this.$h;b=x(this.ji,Math.cos(b)).add(x(this.ye,Math.sin(b)));Ca(b,this.Ea);a.f=this.dh.add(b);return true}return false};sg.prototype.eb=function(){this.Fa.normalize();this.ye=this.Fa.b!=0?new s(50,0,0):new s(0,50,0);this.ye=Ia(this.ye,this.Fa);this.ye.normalize();this.ji=Ia(this.ye,this.Fa);this.ji.normalize()};function $b(a){this.re=new s;if(a)this.re=a.e();this.Ma=q();this.fn=false;this.wl=0;this.wm=null}$b.prototype=new Ig;$b.prototype.k=k("rotation");$b.prototype.h=function(){var a=new $b(this.ta,this.Qa);a.re=this.re.e();a.Ma=this.Ma;return a};
$b.prototype.gb=function(a,b){var c=b-this.Ma;if(this.fn){if(this.wl-this.Ma==0)return false;b=(b-this.Ma)/(this.wl-this.Ma);if(b>1){a.R=this.re.e();df(a,this)}else{c=new Ab;var d=x(this.re,n.yd);Fb(c,d.c,d.b,d.d);var e=new Ab;d=x(this.wm,n.yd);Fb(e,d.c,d.b,d.d);Cb(e,e,c,b);d=new s;Eb(e,d);Ca(d,n.pe);a.R=d;return true}}else if(c!=0){a.R.ua(x(this.re,c/10));this.Ma=b;return true}return false};function xg(a,b,c){this.Va=[];this.Ub=true;this.vf=20;this.Zk=this.Ag=this.md=0;if(a)this.Va=a;if(b)this.vf=b;if(c==true)this.loop=false}xg.prototype=new Ig;xg.prototype.k=k("animatetexture");xg.prototype.h=function(){var a=new xg;a.Va=this.Va;a.Ub=this.Ub;a.vf=this.vf;a.md=this.md;a.Ag=this.Ag;return a};
xg.prototype.gb=function(a,b){if(a==null||this.Va==null)return false;var c=false,d=null;if(this.Va.length){var e=this.Zk==0?a.r.Ma:this.Zk;d=b-e;var f=e+this.vf*this.Va.length;e=0;e=!this.Ub&&b>=f?this.Va.length-1:this.vf>0?Math.floor(d/this.vf%this.Va.length):0;if(e<this.Va.length)if(this.md==1){if(this.Ag>=0&&this.Ag<a.Yc())if((d=a.sc(this.Ag))&&d.bb!==this.Va[e]){d.bb=this.Va[e];c=true}}else{b=a.Yc();for(f=0;f<b;++f)if((d=a.sc(f))&&d.bb!==this.Va[e]){d.bb=this.Va[e];c=true}}}return c};
xg.prototype.reset=function(){this.Zk=q()};function yc(a,b,c,d){this.Qa=b;this.Bp=0;this.qp=false;this.Hq=null;this.ta=a;this.ph=c;this.We=false;this.Oe=true;this.xc=false;this.we=this.ja=this.o=null;d!=true&&eg(a,this)}yc.prototype=new Ig;l=yc.prototype;l.k=k("onclick");l.h=function(a,b,c,d){a=new yc(this.ta,this.Qa);a.Oe=this.Oe;a.xc=this.xc;a.o=this.o?this.o.h(c,d):null;a.ja=this.ja;return a};l.gb=function(a){this.we=a;a=this.We;this.We=false;return a};
l.pd=function(a){var b=this.we;if(!b)return false;if(b.r!==this.ta)return false;if(q()-this.Qa.Rk<250)return false;var c=Ve(this.Qa,a);a=We(this.Qa,a);if(this.Qa.wi){a=this.ta.wh;if(!a)return false;c=a.Mb()/2;a=a.Lb()/2}if(this.we.ub==null){this.we=null;return false}if(ef(b)&&Mg(this,b,c,a)){this.We=true;this.ph&&this.ph();this.mk(b);Ge(this.ta);return true}};l.mk=function(a){this.o&&this.o.execute(a)};
function Mg(a,b,c,d){if(b==null)return false;if(b.k()=="2doverlay"){var e=Cf(b,false,a.Qa.S);if(e.x<=c&&e.y<=d&&e.x+e.Ta>=c&&e.y+e.Ra>=d)return true}c=Ye(a.Qa,c,d);if(c==null)return false;d=a.ta.ga;if(d==null)return false;d=O(d);e=new Ma;e.Y=d;e.N=c;return zc(a,a.ta,b,e,a.Oe,a.xc,a.ja,null)}function xc(a,b,c,d,e,f){if(!e||!b)return 999999999999;if(a=e.Hg(c,d,true,null,f))return c.vb(a);return 999999999999}
function zc(a,b,c,d,e,f,g,i){var j=c.lb(),m=0;m=new D(false);if(ob(c.$,m))if(Ua(j,lb(m,d.Y),lb(m,d.N))){m=null;if(c.Tp&&c.U)m=c;e=m==null||e;if(!e){j=m.ab;if(j==null){j=m.U&&ld(m.U)>100?new gg(m.U,m,0):new ng(m.U,m);m.ab=j}if(j){j=j.Hg(d.Y,d.N,true,null,true);if(j!=null)if(f){m=xc(a,b,d.Y,j,g,true);a=j.vb(d.Y);if(m+n.zp<a)return false;else{if(i!=null)i.Ja=j.vb(d.Y);return true}}else{if(i!=null)i.Ja=d.Y.vb(Ra(bf(c)));return true}}else e=true}if(e)if(f){d=d.Y.e();j=bf(c);m=Sa(j);Ca(m,0.5);f=n.Zp(m.c,
m.b,m.d);f=Math.sqrt(f*f+f*f);c=Ra(bf(c));m=xc(a,b,d,c,g,true);a=c.vb(d)-f;if(m<a)return false;else{if(i!=null)i.Ja=a;return true}}else{if(i!=null)i.Ja=d.Y.vb(Ra(bf(c)));return true}}return false}yc.prototype.Df=function(a){if(this.o)return Sc(this.o,a);return null};function yg(a,b){this.Qa=b;this.ta=a;this.$d=this.Yd=null;this.Ql=this.Hl=0}yg.prototype=new yc(null,null,null,true);yg.prototype.k=k("onmove");yg.prototype.h=function(a,b,c,d){a=new yg(this.ta,this.Qa);a.Oe=this.Oe;a.xc=this.xc;a.o=this.o?this.o.h(c,d):null;a.ja=this.ja;a.Yd=this.Yd?this.Yd.h(c,d):null;a.$d=this.$d?this.$d.h(c,d):null;return a};
yg.prototype.gb=function(a){var b=this.Hl==0,c=q();if(b||c-this.Hl>100){this.Hl=c;c=Mg(this,a,this.Qa.Eb,this.Qa.Fb);if(b)this.Ql=c;else if(c!=this.Ql){if((this.Ql=c)&&this.Yd)this.Yd.execute(a);else!c&&this.$d&&this.$d.execute(a);return true}}return false};yg.prototype.Df=function(a){var b=null;if(this.$d)if(b=Sc(this.$d,a))return b;if(this.Yd)if(b=Sc(this.Yd,a))return b;return null};function wg(a,b,c,d,e){this.Bp=0;this.pk=a;this.Qh=this.vm=this.Kj=this.kh=0;this.pl=null;this.tg=0;this.o=null;this.ph=d;if(b)this.Qh=b;if(c)this.tg=c;if(e)this.kh=1;this.Mk=false}wg.prototype=new Ig;l=wg.prototype;l.k=k("oncollide");l.h=function(a,b,c,d){a=new wg(this.pk);a.kh=this.kh;a.Kj=this.Kj;a.Qh=this.Qh;a.tg=this.tg;a.o=this.o?this.o.h(c,d):null;return a};
l.gb=function(a){if(a==null||this.pk==null)return false;var b=false,c=null;if(this.Kj==0)c=this.pk.ga;else if(this.tg!=-1)c=G(this.pk,this.tg);if(c){if(a===c)return false;var d=O(c),e=O(a),f=false;switch(this.vm){case 0:f=d.vb(e)<this.Qh;break;case 1:e=new D(false);if(ob(a.$,e)){d=d.e();mb(e,d);f=new y;f.C=x(this.pl,-0.5);f.M=x(this.pl,0.5);f=f.Kg(d)}}switch(this.kh){case 0:if(f&&!this.Mk){this.mk(c,a);b=true}break;case 1:if(!f&&this.Mk){this.mk(c,a);b=true}break}this.Mk=f}return b};
l.mk=function(a,b){this.ph&&this.ph.call(a,b);this.o&&this.o.execute(a)};l.Df=function(a){if(this.o)return Sc(this.o,a);return null};function tg(a,b,c,d){this.Ea=a;this.Li=true;this.wf=b;this.ja=c;this.Db=d;this.xn=false;this.Ve=this.xa=null;this.je=new s(0,0,0);this.fe=false;this.Ue=this.Fm=0;this.ak=false;if(this.Ea==null)this.Ea=new s(30,50,30);if(this.wf==null)this.wf=new s(0,0,0);if(this.Db==null)this.Db=5.0E-4;this.reset()}tg.prototype=new Ig;l=tg.prototype;l.k=k("collisionresponse");l.h=function(){var a=new tg;a.Ea=this.Ea.e();a.Li=this.Li;a.wf=this.wf.e();a.je=this.je.e();a.ak=this.ak;a.ja=this.ja;return a};
l.reset=function(){this.xa=null;this.Ve=q()};l.ad=ca("ja");
l.gb=function(a,b){var c=b-this.Ve;if(!this.ja)return false;if(c>150)c=150;if(c==0)return false;this.Ve=b;if(this.xa!==a){this.xa=a;this.je=a.f.e()}var d=a.f.e(),e=a.f.substract(this.je),f=new s(0,-0.1*a.r.zd,0);if(!this.Li)f.b=0;d=x(f,c);if(this.fe){f=(b-this.Fm)/1E3;if(f>5)f=5;Ca(d,f)}else Ca(d,0.0010);if(this.Ue>0){e.b+=this.Ue*0.0010*c;this.Ue-=c;if(this.Ue<0)this.Ue=0}c=e.add(d);if(!xa(c)){if(!this.xn)this.Db=this.Ea.getLength()*0.0010;c=null;if(a&&a.k()=="camera")c=a;var g;if(c)g=c.fa.substract(c.f);
f=new C;var i={};i.Ja=0;this.ja.Bi(a);var j=this.ja,m=this.je.substract(this.wf),o=this.Ea,p=this.Db;if(!j||o.c==0||o.b==0||o.d==0)d=m;else{var h={};h.Oh=m.e();h.ol=e.e();h.rc=o.e();h.ui=9.99999999E7;h.rq=j;h.sq=p;h.rk=0;h.ri=new s;j=Ha(h.Oh,h.rc);e=Ha(h.ol,h.rc);j=Ng(this,0,h,j,e);i.Ja=0;if(!xa(d)){h.Oh=Fa(j,h.rc);h.ol=d.e();h.rk=0;e=Ha(d,h.rc);j=Ng(this,0,h,j,e);i.Ja=h.rk==0?1:0;if(i.Ja<0.5&&h.si){d=fb(h.si);d.normalize();if(!(Math.abs(d.b)>Math.abs(d.c)&&Math.abs(d.b)>Math.abs(d.d)))i.Ja=1}}if(h.rk&&
f!=null){f.T=h.si.T.e();f.ca=h.si.ca.e();f.da=h.si.da.e();Ea(f.T,h.rc);Ea(f.ca,h.rc);Ea(f.da,h.rc)}Ea(j,h.rc);d=j}this.ja.Bi(null);d.ua(this.wf);if(i.Ja<0.5)this.fe=false;else{if(!this.fe)this.Fm=b;this.fe=true}if(a.f.D(d)){this.je=a.f.e();return false}a.f=d.e();if(this.ak)if(!this.fe)if(!(xa(f.T)&&xa(f.ca)&&xa(f.da))){b=a.R.b;d=f.T.add(f.ca).add(f.da);Ca(d,1/3);f.T.c-=d.c;f.T.d-=d.d;f.ca.c-=d.c;f.ca.d-=d.d;f.da.c-=d.c;f.da.d-=d.d;Ka(f.T,b);Ka(f.ca,b);Ka(f.da,b);f.T.c+=d.c;f.T.d+=d.d;f.ca.c+=d.c;
f.ca.d+=d.d;f.da.c+=d.c;f.da.d+=d.d;b=fb(f);f=new s;f.c=Math.atan2(b.d,b.b)*n.pe;f.b=a.R.b;f.d=-Math.atan2(b.c,b.b)*n.pe;a.R=f}if(c&&g){b=true;for(f=0;f<a.ia.length;++f)if((d=a.ia[f])&&d.k()=="cameramodelviewer"){b=false;break}if(b)c.fa=a.f.add(g)}}this.je.D(a.f);this.je=a.f.e();return false};
function Ng(a,b,c,d,e){var f=c.sq;if(b>5){a=e.e();va(a,f);return d.add(a)}c.sk=e.e();c.oo=e.e();c.oo.normalize();c.dk=d.e();c.Tl=false;c.ui=9.99999999E7;var g=new y;c.Oh.Ca(g.C);c.Oh.Ca(g.M);z(g,c.Oh.add(c.ol));ta(g.C,c.rc);g.M.ua(c.rc);var i=[],j=new D,m=1/c.rc.b,o=1/c.rc.d;j.p=1/c.rc.c;j.q=m;j.n=o;j.Oa=false;c.rq.Jg(g,j,i);for(g=0;g<i.length;++g)a:{j=i[g];var p=db(j);if(cb(p,c.oo)){var h=m=0,w=false,t=0;m=p.vb(c.dk);o=p.j.ka(c.sk);if(n.qa(o))if(Math.abs(m)>=1)break a;else{w=true;h=0}else{o=1/o;
h=(-1-m)*o;m=(1-m)*o;if(h>m){o=m;m=h;h=o}if(h>1||m<0)break a;h=n.qc(h,0,1);n.qc(m,0,1)}m=new s;o=false;var L=1;if(!w){p=c.dk.substract(p.j).add(x(c.sk,h));t=j.ca.substract(j.T);var A=j.da.substract(j.T);w=t.ka(t);var u=t.ka(A),H=A.ka(A),M=p.substract(j.T);t=M.ka(t);M=M.ka(A);A=t*H-M*u;t=M*w-t*u;if(A+t-(w*H-u*u)<0&&!(A<0||t<0)){o=true;L=h;m=p.e()}}if(!o){h=c.sk.e();p=c.dk.e();w=za(h);var J=A=t=0;u={};u.Ja=0;t=w;A=2*h.ka(p.substract(j.T));J=za(j.T.substract(p))-1;if(Og(a,t,A,J,L,u)){L=u.Ja;o=true;m=
j.T.e()}if(!o){A=2*h.ka(p.substract(j.ca));J=za(j.ca.substract(p))-1;if(Og(a,t,A,J,L,u)){L=u.Ja;o=true;m=j.ca.e()}}if(!o){A=2*h.ka(p.substract(j.da));J=za(j.da.substract(p))-1;if(Og(a,t,A,J,L,u)){L=u.Ja;o=true;m=j.da.e()}}H=j.ca.substract(j.T);J=j.T.substract(p);M=za(H);var X=H.ka(h),da=H.ka(J);t=M*-w+X*X;A=M*2*h.ka(J)-2*X*da;J=M*(1-za(J))+da*da;if(Og(a,t,A,J,L,u)){t=(X*u.Ja-da)/M;if(t>=0&&t<=1){L=u.Ja;o=true;m=j.T.add(x(H,t))}}H=j.da.substract(j.ca);J=j.ca.substract(p);M=za(H);X=H.ka(h);da=H.ka(J);
t=M*-w+X*X;A=M*2*h.ka(J)-2*X*da;J=M*(1-za(J))+da*da;if(Og(a,t,A,J,L,u)){t=(X*u.Ja-da)/M;if(t>=0&&t<=1){L=u.Ja;o=true;m=j.ca.add(x(H,t))}}H=j.T.substract(j.da);J=j.da.substract(p);M=za(H);X=H.ka(h);da=H.ka(J);t=M*-w+X*X;A=M*2*h.ka(J)-2*X*da;J=M*(1-za(J))+da*da;if(Og(a,t,A,J,L,u)){t=(X*u.Ja-da)/M;if(t>=0&&t<=1){L=u.Ja;o=true;m=j.da.add(x(H,t))}}}if(o){o=L*c.sk.getLength();if(!c.Tl||o<c.ui){c.ui=o;c.ri=m.e();c.Tl=true;c.si=j;++c.rk}}}}if(!c.Tl)return d.add(e);i=d.add(e);d=d.e();if(c.ui>=f){e=e.e();va(e,
c.ui-f);d=c.dk.add(e);e.normalize();ta(c.ri,x(e,f))}e=c.ri.e();g=d.substract(c.ri);g.normalize();j=new Wa;j.j=g.e();ab(j,e);e=i.substract(x(g,j.vb(i))).substract(c.ri);if(e.getLength()<f)return d;return Ng(a,b+1,c,d,e)}function Og(a,b,c,d,e,f){a=c*c-4*b*d;if(a<0)return false;d=Math.sqrt(a);a=(-c-d)/(2*b);b=(-c+d)/(2*b);if(a>b){c=b;b=a;a=c}if(a>0&&a<e){f.Ja=a;return true}if(b>0&&b<e){f.Ja=b;return true}return false}function Jg(a,b){if(a.Ue==0)a.Ue=b*100};function zg(a){this.gi=0;this.ta=a;this.o=null;this.Cg=0;this.gi=q()}zg.prototype=new Ig;zg.prototype.k=k("timer");zg.prototype.h=function(a,b,c,d){a=new zg(this.ta);a.o=this.o?this.o.h(c,d):null;a.gi=this.gi;a.Cg=this.Cg;return a};zg.prototype.gb=function(a){if(a==null)return false;if(this.Cg>0){var b=q();if(b-this.gi>this.Cg){this.gi=b;this.o&&this.o.execute(a);return true}}return false};
function Ag(a,b){this.ta=a;this.Aa=b;this.o=null;this.Cg=0;this.Fd=null;this.We=false;this!=null&&b.Uh.push(this);this!=null&&b.Th.push(this);eg(a,this)}Ag.prototype=new Ig;l=Ag.prototype;l.k=k("keypress");l.h=function(a,b,c,d){a=new Ag(this.ta,this.Aa);a.Yf=this.Yf;a.Jc=this.Jc;a.o=this.o?this.o.h(c,d):null;return a};l.gb=function(a){this.Fd=a;a=this.We;this.We=false;return a};l.De=function(a){if(this.Yf==0&&a.keyCode==this.Jc){Pg(this);return true}return false};
l.Ee=function(a){if(this.Yf==1&&a.keyCode==this.Jc){Pg(this);return true}return false};l.pd=function(a){if(this.Yf==1)if(a.button>1&&this.Jc==2)Pg(this);else a.button<=1&&this.Jc==1&&Pg(this)};l.Ud=function(a){if(this.Yf==0)if(a.button>1&&this.Jc==2)Pg(this);else a.button<=1&&this.Jc==1&&Pg(this)};l.Df=function(a){if(this.o)return Sc(this.o,a);return null};
function Pg(a){if(a.Fd&&a.Fd.r===a.ta&&ef(a.Fd)&&oe(a.Aa)===a.Fd.r){if(a.Fd.ub==null&&a.Fd.i!=-1){a.Fd=null;return}a.We=true;a.o&&a.o.execute(a.Fd);Ge(a.ta);return true}return null}
function Bg(a){this.Ug=this.Ed=this.bd=0;this.Mf=false;this.Sb=100;this.ig=3E3;this.Kh=-1;this.Zg=this.Xj="";this.Mh=100;this.Vh=0;this.wb=new s;this.Ni=this.cj=this.Qd=this.Ld="";this.Xd=this.Zd=this.Wd=this.cd=null;this.Sk=this.cl=this.Ic=0;this.Of=null;this.Qi=this.Pe=this.xd=this.eh=0;this.Xo=null;this.Ak=this.sm=this.xk=false;this.Bk=new Ma;this.Dj=0;this.we=this.ja=null;this.uf=a;this.Nm=0;this.Dl=new s;this.al=null;this.bl=0}Bg.prototype=new Ig;Bg.prototype.k=k("gameai");
Bg.prototype.h=function(a,b,c,d){a=new Bg(this.uf);a.bd=this.bd;a.Ed=this.Ed;a.Ug=this.Ug;a.Mf=this.Mf;a.Sb=this.Sb;a.Xj=this.Xj;a.Zg=this.Zg;a.Mh=this.Mh;a.Vh=this.Vh;a.Kh=this.Kh;a.ig=this.ig;a.wb=this.wb?this.wb.e():null;a.Ld=this.Ld;a.Qd=this.Qd;a.cj=this.cj;a.Ni=this.Ni;a.cd=this.cd?this.cd.h(c,d):null;a.Wd=this.Wd?this.Wd.h(c,d):null;a.Zd=this.Zd?this.Zd.h(c,d):null;a.Xd=this.Xd?this.Xd.h(c,d):null;return a};
Bg.prototype.gb=function(a,b){if(a==null||this.uf==null)return false;var c=b-this.Nm;if(c>150)c=150;this.Nm=b;var d=0,e=false;if(this.we!==a){this.we=a;P(a);this.Dl=O(a)}var f=O(a);if(this.Ic!=3)if(this.Ic==1){d=Qg(this,a);if(this.Of.substract(f).getLength()<d){this.Ic=0;this.ac(a,0);e=true}else{e=false;if(this.xd>2){d=this.xd*(this.Ed/1E3);if(this.Qi.substract(f).getLength()*1.2<d){this.Ic=0;this.ac(a,0);e=true}}if(!e){this.xd+=c;e=this.Of.substract(f);va(e,this.Ed/1E3*c);if(!this.Mf)e.b=0;a.f.ua(e)}e=
Rg(this,a,b-this.eh,this.Of.substract(f),this.Vh)}}else if(this.Ic==2){this.xd+=c;if(!this.xk&&this.xd>this.Pe/2){this.Ak=true;this.cd&&this.cd.execute(a);this.Ak=false;e=this.xk=true}if(this.xd>this.Pe)this.Ic=0;else e=Rg(this,a,b-this.eh,this.Of.substract(f),Math.min(this.Vh,this.Pe))}else if(this.Ic==0)if(this.bd==1||this.bd==2||this.bd==3){if(this.Ug<=0||!this.we||this.Zg.length==0||!this.uf)c=null;else if(!this.cl||b>this.cl){this.bl=this.Ug;this.al=null;Sg(this,this.uf.La,f,this.Zg);this.cl=
b+500+Math.random()*1E3;c=this.al}else c=null;if(c!=null){e=1E3;if(this.cd)if(d=Sc(this.cd,"Shoot"))e=d.Sc;d=e;!this.sm&&this.Wd&&this.Wd.execute(a);e=this.sm=true;if(O(c).vb(f)<d)if(!c||!a?false:Tg(this,Ra(bf(c)),Ra(bf(a)))){this.Bk.Y=Ra(bf(a));this.Bk.N=Ra(bf(c));Ug(this,a,c,O(c),f,b)}else Vg(this,a,O(c),f,b);else Vg(this,a,O(c),f,b)}else if(this.bd==2||this.bd==3)if(!this.Sk||b>this.Sk+this.ig){d=Qg(this,a);c=null;if(this.bd==3){var g=null;if(this.Kh!=-1&&this.uf!=null)g=G(this.uf,this.Kh);if(g!=
null&&g.k()=="path"){if(this.Dj>=g.Bb.length)this.Dj=0;c=vf(g,this.Dj)}++this.Dj}else{c=this.Mh;this.Sk=b;c=new s((Math.random()-0.5)*c,(Math.random()-0.5)*c,(Math.random()-0.5)*c);c.ua(this.Dl);if(!this.Mf)c.b=this.Dl.b}if(!(c.substract(f).getLength()<d)){Vg(this,a,c,f,b);e=true}}}return e};
function Rg(a,b,c,d,e){if(!b)return false;if(b.k()=="camera")return false;if(!a.Mf)d.b=0;var f=new D;vb(f,Ja(d));d=new D;vb(d,a.wb);f=E(f,d);a=wb(f);f=b.R.e();c=Math.min(c,e)/e;c=n.qc(c,0,1);Ca(a,n.yd);Ca(f,n.yd);e=new Ab;Fb(e,a.c,a.b,a.d);d=new Ab;Fb(d,f.c,f.b,f.d);Cb(d,d,e,c);Eb(d,a);Ca(a,n.pe);if(b.R.D(a))return false;b.R=a;return true}function Vg(a,b,c,d,e){a.Ic=1;a.Of=c;a.eh=e;a.Qi=d;a.xd=0;a.Pe=0;a.ac(b,1)}
function Ug(a,b,c,d,e,f){a.Ic=2;a.Of=d;a.eh=f;a.Xo=c;a.Qi=e;a.xd=0;a.Pe=500;a.xk=false;b=a.ac(b,2);if(b!=0)a.Pe=b}function Tg(a,b,c){if(!a.ja||!a.uf)return true;if(a.ja.Hg(b,c,true,null,true)!=null)return false;return true}function Sg(a,b,c,d){if(b&&b.V){var e=false,f=c.vb(O(b));if(f<a.bl){var g=N(b,"gameai");if(g&&d!=""&&g!==a&&g.Sb>0)e=g.Xj.indexOf(d)!=-1}if(e){a.bl=f;a.al=b}for(e=0;e<b.X.length;++e)Sg(a,b.X[e],c,d)}}function Qg(a,b){if(b!=null)return 10;a=Sa(bf(b));a.b=0;return a.getLength()}
Bg.prototype.Xl=function(a){switch(a){case 0:return this.Ld;case 1:return this.Qd;case 2:return this.Ni;case 3:return this.cj}return""};Bg.prototype.ac=function(a,b){if(!a||a.k()!="animatedmesh")return 0;var c=a.Ha;if(!c)return 0;if(c=rd(c,this.Xl(b))){Hf(a,c.ud,c.N);c.Ac!=0&&If(a,c.Ac);a.Vb=b==1||b==0;return(c.N-c.ud)*c.Ac*1E3}else{Hf(a,1,1);a.Vb=false}return 0};
function wc(a,b,c){if(c)if(a.Sb!=0){a.Sb-=b;if(a.Sb<0)a.Sb=0;if(a.Sb==0){a.Xd!=null&&a.Xd.execute(c);b=O(c);a.Ic=3;a.eh=0;a.Qi=b;a.xd=0;a.Pe=500;a.ac(c,3)}else a.Zd!=null&&a.Zd.execute(c)}}Bg.prototype.Df=function(a){var b=null;if(this.cd)if(b=Sc(this.cd,a))return b;if(this.Wd)if(b=Sc(this.Wd,a))return b;if(this.Zd)if(b=Sc(this.Zd,a))return b;if(this.Xd)if(b=Sc(this.Xd,a))return b;return null};n.So=[];function Bc(){this.Qc=this.l="";this.hc=this.jc=this.cc=0}
function Sb(a,b,c){if(a==null)return null;for(var d=a.toLowerCase(),e=n.So,f=0;f<e.length;++f){var g=e[f];if(g!=null&&g.getName().toLowerCase()==d)return g}f=Wg(a,c);if(f==null)c=null;else{c=new Bc;c.km(a);Ec(c,0);d=f.Ce;if(f.Tc=="health"&&d!=null){d=N(d,"gameai");d!=null&&Ec(c,d.Sb)}else if(f.Tc=="movementspeed"&&d!=null){f=N(d,"gameai");g=N(d,"keyboardcontrolled");if(d=N(d,"camerafps"))Dc(c,d.Xb);else if(g)Dc(c,g.Xb);else f&&Dc(c,f.Ed)}else if(f.Tc=="damage"&&d!=null)(d=af(d,"Shoot"))&&Ec(c,d.ee);
else if(f.Tc=="colsmalldistance"&&d!=null){d=N(d,"collisionresponse");d!=null&&Dc(c,d.Db)}else f.Tc=="soundvolume"&&Dc(c,n.Rd.he*100);c=c}if(c)return c;if(b==true){b=new Bc;b.km(a);e.push(b);return b}return null}
function Fc(a,b){var c=Wg(a.l,b);if(c!=null){b=c.Ce;if(c.Tc=="health"&&b!=null){c=N(b,"gameai");if(c!=null){var d=c.Sb;a=Xg(a);d=d-a;if(d>0)wc(c,d,b);else c.Sb=a}}else if(c.Tc=="movementspeed"&&b!=null){c=N(b,"gameai");d=N(b,"keyboardcontrolled");if(b=N(b,"camerafps"))b.Xb=Q(a);else if(d)d.Xb=Q(a);else if(c)c.Ed=Q(a)}else if(c.Tc=="damage"&&b!=null){if(b=af(b,"Shoot"))b.ee=Xg(a)}else if(c.Tc=="damage"&&b!=null){if(b=af(b,"Shoot"))b.ee=Xg(a)}else if(c.Tc=="colsmalldistance"&&b!=null){b=N(b,"collisionresponse");
if(b!=null){b.Db=Xg(a);b.xn=true}}else c.Tc=="soundvolume"&&ee(n.Rd,Q(a)/100)}}function Wg(a,b){if(a.length==0||b==null)return null;if(a[0]!="#")return null;var c=a.indexOf(".");if(c==-1)return null;var d=a.substr(c+1,a.length-c);if(d.length==0)return null;c=a.substr(1,c-1);a=null;if(c!="system"){a=cg(b,c);if(a==null)return null}b={};b.Ce=a;b.Tc=d;return b}Bc.prototype.getName=ea("l");Bc.prototype.km=ca("l");
function Tb(a){switch(a.cc){case 1:return String(a.jc);case 2:return a.hc%1==0?String(a.hc):a.hc.toFixed(6)}return a.Qc}function Xg(a){switch(a.cc){case 0:return Math.floor(a.Qc);case 1:return a.jc;case 2:return a.hc}return 0}function Q(a){switch(a.cc){case 0:return Number(a.Qc);case 1:return a.jc;case 2:return a.hc}return 0}function Cc(a,b){a.cc=0;a.Qc=b}function Ec(a,b){a.cc=1;a.jc=b}function Dc(a,b){a.cc=2;a.hc=b}
function Dg(a,b){this.tc=0;this.ta=a;this.ie=this.Yb=this.Pj=this.Xb=0;this.ii=this.ll=false;this.Qf=this.Ii=0;this.ge=15;this.wb=new s;this.Oj=this.oj=this.Qd=this.Ld="";this.Jm=this.Ve=q();this.ti=this.ze=this.Ie=this.Ge=this.Be=this.qp=this.Al=this.Bn=false;this.uc=0;this.vk=false;this.ek=true;this.ej=false;this.Aa=b;this!=null&&b.Uh.push(this);this!=null&&b.Th.push(this)}Dg.prototype=new Ig;l=Dg.prototype;l.k=k("keyboardcontrolled");
l.h=function(){var a=new Dg(this.ta,this.Aa);a.Xb=this.Xb;a.Pj=this.Pj;a.Yb=this.Yb;a.ie=this.ie;a.ge=this.ge;a.wb=this.wb?this.wb.e():null;a.Ld=this.Ld;a.Qd=this.Qd;a.oj=this.oj;a.Oj=this.Oj;a.ii=this.ii;a.Ii=this.Ii;a.Qf=this.Qf;a.ej=this.ej;return a};
l.Ai=function(a,b){if(b==37||b==65){if(this.Be=a)this.Ge=false;return true}if(b==39||b==68){if(this.Ge=a)this.Be=false;return true}if(b==38||b==87){if(this.Ie=a)this.ze=false;return true}if(b==40||b==83){if(this.ze=a)this.Ie=false;return true}if(b==32){this.ti=a;return true}return false};l.De=function(a){this.Al=a.shiftKey==1;return this.Ai(true,a.keyCode)};l.Ee=function(a){this.Al=a.shiftKey==1;return this.Ai(false,a.keyCode)};
l.gb=function(a,b){var c=b-this.tc;if(c>250)c=250;this.tc=b;var d=false;this.Ve=b;if(this.ej){var e=a.r.ga;if(e!=null){e=N(e,"3rdpersoncamera");if(e!=null){if(e.lc!==a)return false}else return false}}e=a.R;if(this.Be){e.b-=c*this.Yb*0.0010;d=true}if(this.Ge){e.b+=c*this.Yb*0.0010;d=true}var f=new D;vb(f,e);e=new s(0,0,1);var g=new D;vb(g,this.wb);f=E(f,g);jb(f,e);f=this.Al;var i=(f?this.Pj:this.Xb)*c,j=0;g=this.ze;var m=this.Ie;if(this.ii&&c)if(m||g){if(this.vk!=m)if(this.Qf==0)this.uc*=-1;else this.uc=
0;this.vk=!g;j=i/c;this.uc+=this.Ii*j*(c/1E3);if(this.uc>j)this.uc=j;i=this.uc*c}else if(this.Qf==0)this.uc=0;else{j=i/Number(c);this.uc-=this.Qf*j*(c/1E3);if(this.uc<0)this.uc=0;i=this.uc*c}va(e,i);if(m||g||this.ii&&this.uc!=0){d=e.e();if(g||!(m||g)&&!this.vk)Ca(d,-1);a.f.ua(d);this.Bn=d=true}if(m||g){this.ac(a,f?3:1,g);d=this.Bn=true}else{c=false;if(e=N(a,"collisionresponse"))c=e.fe;if(!c&&(this.ac(a,1,false,true)||this.ac(a,3,false,true)||this.ac(a,2,false,true)))this.ac(a,0,false)}if(this.ti)if((c=
N(a,"collisionresponse"))&&!c.fe){e=0;if(this.ta&&this.ta.zd!=0)e=Math.floor(this.ie*(1/this.ta.zd)*2E3);if(!this.ll||this.ll&&b-this.Jm>e){Jg(c,this.ie);this.ac(a,2,false);this.Jm=b;d=true}}return d};l.Xl=function(a){switch(a){case 0:return this.Ld;case 1:return this.Qd;case 2:return this.oj;case 3:return this.Oj}return""};
l.ac=function(a,b,c,d){if(!a||a.k()!="animatedmesh")return false;var e=a.Ha;if(!e)return false;if(e=rd(e,this.Xl(b))){var f=1*e.Ac;if(c)f*=-1;if(d)return a.rb==e.N&&a.Sa==e.ud;if(!(a.rb==e.N&&a.Sa==e.ud&&n.D(a.yb,f))){Hf(a,e.ud,e.N);f&&If(a,f);a.Vb=b==0||b==1||b==3}return false}else if(!d){Hf(a,1,1);a.Vb=false}return false};
function Cg(a){this.tc=0;this.ta=a;this.Wh=-1;this.ge=15;this.wb=new s;this.Zj=this.hj=0;this.xc=false;this.Ve=this.ja=0;this.Se=new s;this.jh=new s;this.lc=null;this.un=false;this.ek=true}Cg.prototype=new Ig;Cg.prototype.k=k("3rdpersoncamera");Cg.prototype.h=function(){var a=new Cg(this.ta);a.Wh=this.Wh;a.ge=this.ge;a.wb=this.wb.e();a.hj=this.hj;a.Zj=this.Zj;a.xc=this.xc;a.ja=this.ja;return a};
Cg.prototype.gb=function(a,b){var c=b-this.tc;if(c>250)c=250;this.tc=b;var d=false;if(a==null)return false;d=a.r;if(!this.un)if(this.Wh!=-1)if(d!=null){if((d=G(d,this.Wh))&&d!==this.lc){this.lc=d;this.ek=true}this.un=true}if(!this.lc)return false;d=false;var e=a.fa.e();a.fa=O(this.lc);a.fa.ua(this.jh);a.fa.b+=this.Zj;a.fa.D(e)||(d=true);if(this.ek){P(this.lc);P(a);this.jh=Sa(this.lc.lb());this.jh.b/=2;this.jh.c=0;this.jh.d=0;this.tc=b;this.ek=false}if(a.r.ga!==a)return false;if(xa(this.Se)){this.Se=
O(this.lc).substract(O(a));b=new D;vb(b,this.lc.R);e=this.Se;var f=e.e();e.c=f.c*b.p+f.b*b.u+f.d*b.s;e.b=f.c*b.v+f.b*b.q+f.d*b.t;e.d=f.c*b.w+f.b*b.A+f.d*b.n}b=this.lc.R;e=new D;vb(e,b);b=new D;vb(b,this.wb);e=E(e,b);b=a.f.e();switch(this.hj){case 0:break;case 2:b=O(this.lc).substract(this.Se);break;case 1:b=this.Se.e();jb(e,b);b=O(this.lc).substract(b);e=O(a).vb(b);f=this.Se.getLength();f=e>f*2.2;if(n.D(this.ge,0)||f)b=b;else{c=Math.sqrt(e)*(c/1E3)*this.ge;if(c>e)c=e;b=b.substract(a.f);va(b,c);b.ua(a.f);
b=b}break}if(this.xc&&this.ja!=null&&!a.f.D(b)){this.ja.Bi(this.lc);c=new Ma;c.Y=a.fa.e();c.N=b.e();var g=Na(c);e=g.getLength();f=this.Se.getLength()/10;va(g,f);c.N.ua(g);g=new C;g=this.ja.Hg(c.Y,c.N,true,g,true);if(g!=null){b=g.substract(c.Y);g=b.getLength();if(g<f)g=f;g-=f;if(g>e)g=e;va(b,g);b=c.Y.add(b)}this.ja.Bi(null)}if(!a.f.D(b)){d=true;a.f=b}return d};function Eg(a){this.Oo=this.gn=false;this.ta=a;this.o=null}Eg.prototype=new Ig;Eg.prototype.k=k("onfirstframe");
Eg.prototype.gb=function(a){if(this.gn)return false;this.gn=true;if(this.o){this.o.execute(a);return true}return false};function Ff(a,b,c){this.ta=b;this.sa=c;this.Qa=a;this.eg=false;eg(b,this);this.Ok=[];for(a=0;a<255;++a)this.Ok.push(false);this.Nf=[];this.Nf.push(new Qa(-1,0));this.Nf.push(new Qa(0,-1));this.Nf.push(new Qa(1,0));this.Nf.push(new Qa(0,1))}Ff.prototype=new Ig;Ff.prototype.k=k("mobileinput");
Ff.prototype.gb=function(){var a=false;if(this.sa.lj==1)Yg(this,this.eg&&this.sa.Bj,this.sa.Jc);else if(Math.sqrt(this.sa.fc*this.sa.fc+this.sa.gc*this.sa.gc)<0.3||!this.eg){if(!this.eg){a=this.sa.fc!=0&&this.sa.gc!=0;this.sa.fc=0;this.sa.gc=0}Yg(this,false,37);Yg(this,false,38);Yg(this,false,39);Yg(this,false,40)}else for(var b=0;b<4;++b){var c=this.Nf[b].c-this.sa.fc,d=this.Nf[b].b-this.sa.gc;c=Math.sqrt(c*c+d*d)<1;Yg(this,c,37+b)}return a};
function Yg(a,b,c){if(a.Ok[c]!=b){a.Ok[c]=b;var d={};d.keyCode=c;b?qe(a.Qa,d):te(a.Qa,d)}}Ff.prototype.pd=function(){this.eg=false};Ff.prototype.Ud=function(){this.eg=true};Ff.prototype.Fe=function(a){if(this.eg&&this.sa.Bj&&this.sa.ul!=0&&this.sa.tl!=0){var b=Ve(this.Qa,a)-this.sa.dn;a=We(this.Qa,a)-this.sa.en;this.sa.fc=b/this.sa.ul;this.sa.gc=a/this.sa.tl;this.sa.fc=n.qc(this.sa.fc,0,1);this.sa.gc=n.qc(this.sa.gc,0,1);this.sa.fc=this.sa.fc*2-1;this.sa.gc=this.sa.gc*2-1}};function vector3d(a,b,c){if(a!==null){this.x=a;this.y=b;this.z=c}else this.z=this.y=this.x=0}l=vector3d.prototype;l.add=function(a){return new vector3d(this.x+a.x,this.y+a.y,this.z+a.z)};l.substract=function(a){return new vector3d(this.x-a.x,this.y-a.y,this.z-a.z)};l.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};l.normalize=function(){var a=this.getLength();if(a!=0){a=1/a;this.x*=a;this.y*=a;this.z*=a}};
l.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};l.x=0;l.y=0;l.z=0;function Zg(){this.mo=-1;this.xg=[];this.th=false;this.Aa=this.S=this.db=this.$i=this.qb=null;this.Bf=[];this.Nn=[];this.Im=0;this.jn=false;this.kl=null;this.kn={};this.Cm=0}n.Da=null;function Z(){if(n.Da==null)n.Da=new Zg;return n.Da}function ne(a,b){a.Aa=b}function Ie(a){return a.Bf.length!=0}function Gg(a,b){try{eval(b)}catch(c){ma(n.na,c)}}function $g(a){++a.mo;return a.mo}
function Me(a,b){a.th=true;if(a.Bf.length!=null){a.S=b;for(b=0;b<a.Bf.length;++b)a.Bf[b]();a.S=null}a.th=false}
function ah(a,b,c,d,e){switch(c){case "Position Mode":b.Id=d=="absolute (pixels)";break;case "Pos X (percent)":b.df=d/100;break;case "Pos Y (percent)":b.ef=d/100;break;case "Width (percent)":b.qf=d;break;case "Height (percent)":b.pf=d;break;case "Pos X (pixels)":b.bf=d;break;case "Pos Y (pixels)":b.cf=d;break;case "Width (pixels)":b.sf=d/100;break;case "Height (pixels)":b.rf=d/100;break;case "Alpha":b.Hc=(d&255)<<24|b.Hc&16777215;break;case "Image":a=ud(a.db,d);b.Ia=a;break;case "Background Color":b.Hc=
e;break;case "Draw Text":b.Qe=d?true:false;break;case "TextColor":b.tf=e;break;case "Text":b.cb=d;break}}
function bh(a,b,c){switch(c){case "Position Mode":return b.Id;case "Pos X (percent)":return b.df*100;case "Pos Y (percent)":return b.ef*100;case "Width (percent)":return b.qf;case "Height (percent)":return b.pf;case "Pos X (pixels)":return b.bf;case "Pos Y (pixels)":return b.cf;case "Width (pixels)":return b.sf*100;case "Height (pixels)":return b.rf*100;case "Alpha":return n.Sd(b.Hc);case "Image":return b.Ia?b.Ia.l:null;case "Background Color":return b.Hc;case "Draw Text":return b.Qe;case "TextColor":return b.tf;
case "Text":return b.cb}return null}n.Le=function(a){this.Tb=null;this.mc=[];this.Pl=this.Fn=false;this.Hd=-1;this.Hn=false;this.ta=a};n.Le.prototype=new Ig;function ch(a,b,c){a.Fn=b;a.Pl=c;if(!a.Hn&&a.ta){b=Z().Aa;if(c){a!=null&&b.Uh.push(a);a!=null&&b.Th.push(a)}eg(a.ta,a)}}n.Le.prototype.k=k("extensionscript");n.Le.prototype.h=function(a,b,c,d){a=new n.Le(b);a.Tb=this.Tb;for(b=0;b<this.mc.length;++b){var e=this.mc[b];e!=null?a.mc.push(e.h(c,d)):a.mc.push(null)}return a};
n.Le.prototype.gb=function(a,b){if(a==null)return false;if(this.Tb==null||this.Tb.length==0)return false;var c=Z();c.$i=this;this.Hd==-1&&dh(this,a,c);if(this.Hd!=-1)try{_ccbScriptCache[this.Hd].onAnimate(a,b)}catch(d){ma(n.na,this.Tb+": "+d)}c.$i=null;return true};
function dh(a,b,c){var d="";a.Hd=$g(c);d+="if (typeof _ccbScriptCache == 'undefined') _ccbScriptCache = new Array(); ";d+="_ccbScriptCache[";d+=a.Hd;d+="] = new ";d+=a.Tb;d+="();";Gg(c,d);var e="_ccbScriptCache[";e+=a.Hd;e+="].";d="try {";d+=eh(e,a.mc);d+="} catch(e) { }";Gg(c,d);d=false;if(b.k()=="camera")d=true;a.Hn=d;d="try { ccbRegisterBehaviorEventReceiver(typeof ";d+=e;d+="onMouseEvent != 'undefined', typeof ";d+=e;d+="onKeyEvent != 'undefined'); } catch(e) { }";Gg(c,d)}
function fh(a,b,c){a.Fn&&_ccbScriptCache[a.Hd].onMouseEvent(b,c)}l=n.Le.prototype;l.pd=function(a){var b=false;if(a&&a.button==2)b=true;fh(this,b?4:2,0)};l.Hf=function(a){fh(this,1,a)};l.Ud=function(a){var b=false;if(a&&a.button==2)b=true;fh(this,b?5:3,0)};l.Fe=function(){fh(this,0,0)};l.De=function(a){this.Pl&&_ccbScriptCache[this.Hd].onKeyEvent(a.keyCode,true)};l.Ee=function(a){this.Pl&&_ccbScriptCache[this.Hd].onKeyEvent(a.keyCode,false)};
function Fg(){this.i=-1;this.yf=this.Qc=this.l=null;this.jc=this.hc=0;this.di=this.Tg=null}Fg.prototype.h=function(a,b){var c=new Fg;c.i=this.i;c.l=this.l;c.Qc=this.Qc;c.yf=this.yf?this.yf.e():null;c.hc=this.hc;c.jc=this.jc;if(this.Tg)c.Tg=this.Tg.h(a,b);c.di=this.di;return c};
function eh(a,b){for(var c="",d=0;d<b.length;++d){var e=b[d];if(e!=null){c+=a;c+=e.l;c+=" = ";switch(e.i){case 1:c+=e.hc;c+="; ";break;case 2:c+='"';var f=e.Qc.split('"').join('\\"');c+=f;c+='"; ';break;case 3:c+=e.jc?"true":"false";c+="; ";break;case 6:c+="new vector3d(";c+=e.yf.c;c+=", ";c+=e.yf.b;c+=", ";c+=e.yf.d;c+="); ";break;case 7:c+='"';c+=e.di?e.di.l:"";c+='"; ';break;case 8:c+="ccbGetSceneNodeFromId(";c+=e.jc;c+="); ";break;case 9:a:{f=Z();e=e.Tg;for(var g=0;g<f.xg.length;++g)if(f.xg[g]===
e){f=g;break a}f.xg.push(e);f=f.xg.length-1}c+=f;c+="; ";break;case 0:case 5:case 4:default:c+=e.jc;c+="; ";break}}}return c}function Hg(){this.i="ExtensionScript";this.mc=[];this.Tb=null}Hg.prototype.h=function(a,b){var c=new Hg;c.Tb=this.Tb;for(var d=0;d<this.mc.length;++d){var e=this.mc[d];e!=null?c.mc.push(e.h(a,b)):c.mc.push(null)}return c};
Hg.prototype.execute=function(a){if(!(this.Tb==null||this.Tb.length==0||a==null)){var b=Z(),c="";c="_ccbScriptTmp = new ";c+=this.Tb;c+="();";Gg(b,c);c="try { ";c+=eh("_ccbScriptTmp.",this.mc);c+="} catch(e) { }";Gg(b,c);c="try { _ccbScriptTmp.execute(ccbGetSceneNodeFromId(";c+=a.Ga;c+=")); } catch(e) { }";Gg(b,c)}};function gh(a){var b=n.Da.qb;if(b==null)return null;return G(b,a)}
function hh(a){var b=n.Da.qb;if(a==null)return null;var c=a.Ga,d=Xc(b);c=a.h(a.ub,c,d);if(c!=null){c.Ga=d;b.zi(a,c)}if((a=a.ab)&&b)if(a=a.h(c)){c.ab=a;b.wd&&Yc(b.wd,a)}return c}function ih(){var a=n.Da.qb;if(a==null)return null;return a.ga}function jh(a){var b=n.Da.qb;b!=null&&a!=null&&a.k()=="camera"&&$f(b,a)}function kh(a,b){if(a==null)return-1;if(b<0||b>=a.X.length)return null;return a.X[b]}function lh(){var a=n.Da.qb;if(a==null)return null;return a.La}
function mh(a){if(a==null)return 0;return a.X.length}function nh(a){var b=n.Da.qb;if(b==null)return null;return cg(b,a)}function oh(a){var b=n.Da.qb;b!=null&&Vc(b,a,0)}function ph(a,b){a&&b&&vc(b,a)}function qh(a){if(a==null)return 0;return a.Yc()}
function rh(a,b,c){if(a==null)return null;if(b<0||b>=a.Yc())return null;a=a.sc(b);if(a==null)return null;if(c=="Type")switch(a.i){case 0:return"solid";case 2:return"lightmap";case 3:return"lightmap_add";case 4:return"lightmap_m2";case 5:return"lightmap_m4";case 11:return"reflection_2layer";case 12:return"trans_add";case 13:return"trans_alphach";case 16:return"trans_reflection_2layer"}else if(c=="Texture1")return a.bb==null?"":a.bb.l;else if(c=="Texture2")return a.pc==null?"":a.pc.l;else if(c=="Lighting")return a.Bc;
else if(c=="Backfaceculling")return a.Ro;return null}function sh(){}
function th(a,b,c,d){if(a!=null)if(!(b<0||b>=a.Yc())){a=a.sc(b);if(a!=null){b=typeof d=="string"?d:null;var e=null;e=Z();if(c=="Type")if(b)switch(b){case "solid":a.i=0;break;case "lightmap":case "lightmap_add":case "lightmap_m2":case "lightmap_m4":a.i=2;break;case "reflection_2layer":a.i=11;break;case "trans_add":a.i=12;break;case "trans_alphach":a.i=13;break;case "trans_reflection_2layer":a.i=16;break}else{c=parseInt(d);if(c!=NaN)a.i=c}else if(c=="Texture1"){if(b!=null&&e.db!=null){e=ud(e.db,b);
if(e!=null)a.bb=e}}else if(c=="Texture2"){if(b!=null&&e.db!=null){e=ud(e.db,b);if(e!=null)a.pc=e}}else if(c=="Lighting")a.Bc=d;else if(c=="Backfaceculling")a.Ro=d}}}
function uh(a,b,c,d,e){if(a!=null){var f=0,g=0,i=0,j=0;if(c!=null)j=c;if(d==null&&c!=null&&typeof c.x!="undefined"){f=c.x;g=c.y;i=c.z}if(d!=null&&e!=null){f=c;g=d;i=e;j=n.Cf(255,Math.floor(c),Math.floor(d),Math.floor(e))}var m=e=d=null,o=null,p=a.k();if(p=="camera")d=a;else if(p=="animatedmesh")e=a;else if(p=="light")m=a;else if(p=="2doverlay")o=a;if(b=="Visible")a.V=c;else if(b=="Position"){a.f.c=f;a.f.b=g;a.f.d=i}else if(b=="Rotation"){a.R.c=f;a.R.b=g;a.R.d=i}else if(b=="Scale"){a.ma.c=f;a.ma.b=
g;a.ma.d=i}else if(b=="Target")d!=null&&oc(d,new s(f,g,i));else if(b=="UpVector"){if(d!=null)d.Jb=new s(f,g,i)}else if(b=="FieldOfView_Degrees")d!=null&&gf(d,n.Pn(c));else if(b=="AspectRatio")d!=null&&Qe(d,c);else if(b=="Animation")e!=null&&ic(e,c,e.Vb);else if(b=="Looping")e!=null&&Jf(e,c);else if(b=="FramesPerSecond")e!=null&&If(e,c*0.0010);else if(b=="AnimationBlending"){if(e!=null)e.ae=c}else if(b=="BlendTimeMs"){if(e!=null)e.ed=c}else if(b=="Radius"){if(m!=null)m.Ya.Ea=c}else if(b=="Color"){if(m!=
null)m.Ya.pa=n.On(j)}else if(b=="Direction"){if(m!=null){m.Ya.Fa=new s(f,g,i);m.Ya.Fa.normalize()}}else if(b=="FogColor")n.Da.qb.Rb=j;else if(b=="BackgroundColor"&&a===lh())n.Da.qb.ah=j;else if(b=="AmbientLight")n.Da.qb.Nb=n.On(j);else if(b=="Name")a.l=c;else o!=null&&ah(Z(),o,b,c,j)}}
function vh(a,b){if(a==null)return null;var c=null,d=null,e=null,f=null,g=a.k();if(g=="camera")c=a;else if(g=="animatedmesh")d=a;else if(g=="light")e=a;else if(g=="2doverlay")f=a;if(b=="Visible")return a.V;else if(b=="Position")return new vector3d(a.f.c,a.f.b,a.f.d);else if(b=="Rotation")return new vector3d(a.R.c,a.R.b,a.R.d);else if(b=="Scale")return new vector3d(a.ma.c,a.ma.b,a.ma.d);else if(b=="Target"){if(c!=null)return new vector3d(c.fa.c,c.fa.b,c.fa.d)}else if(b=="UpVector"){if(c!=null)return new vector3d(c.Jb.c,
c.Jb.b,c.Jb.d)}else if(b=="FieldOfView_Degrees"){if(c!=null)return n.yi(c.hd)}else if(b=="AspectRatio"){if(c!=null)return c.Gc}else if(b=="Animation")return"";else if(b=="Looping"){if(d!=null)return d.Vb}else if(b=="FramesPerSecond"){if(d!=null)return d.yb*1E3}else if(b=="AnimationBlending"){if(d!=null)return d.ae}else if(b=="BlendTimeMs"){if(d!=null)return d.ed}else if(b=="Radius"){if(e!=null)return e.Ya.Ea}else if(b=="Color"){if(e!=null)return n.Cf(255,e.Ya.pa.nc*255,e.Ya.pa.ic*255,e.Ya.pa.dc*255)}else if(b==
"Direction"){if(e!=null)return e.Ya.Fa}else if(b=="Name")return a.l;else if(b=="FogColor")return n.Da.qb.Rb;else if(b=="BackgroundColor"&&a===lh())return n.Da.qb.ah;else if(f!=null)return bh(Z(),f,b);return null}function wh(a,b,c,d){if(a!=null){a.f.c=b;a.f.b=c;a.f.d=d;for(b=0;b<a.ia.length;++b){c=a.ia[b];c!=null&&c.k()=="collisionresponse"&&c.reset()}}}function xh(a){Z().Bf.push(a)}function yh(a){var b=Z();a=b.Bf.indexOf(a);a!=-1&&b.Bf.splice(a,1)}
function zh(a,b,c,d,e){var f=Z();!f.th||f.S==null||Md(f.S,b,c,d-b,e-c,a,true)}function Ah(a,b,c,d,e){a=Z();!a.th||a.S==null||Md(a.S,b,c,d-b,e-c,4278190080,true)}function Bh(a,b,c,d,e){a=Z();!a.th||a.S==null||Md(a.S,b,c,d-b,e-c,4278190080,true)}function Ch(a,b){var c=Z().Aa;a=Ye(c,a,b);if(a!=null)return new vector3d(a.c,a.b,a.d);return null}function Dh(a,b,c){var d=Z().Aa;a=Ze(d,new s(a,b,c));return new vector3d(a.c,a.b,0)}
function Eh(a,b,c,d,e,f){var g=new Ma;g.Y=new s(a,b,c);g.N=new s(d,e,f);a=n.Da.qb;a=xc(yc.prototype,a,g.Y,g.N,a.wd,true);if(a<999999999){b=Na(g);va(b,a);g=g.Y.add(b);return new vector3d(g.c,g.b,g.d)}return null}function Fh(a,b,c,d,e,f,g){if(a==null)return false;if(a.$==null)return false;b=new s(b,c,d);e=new s(e,f,g);return Ua(bf(a),b,e)}function Gh(){window.close()}function Hh(){}function Ih(a){var b=Z();a=td(b.db,a,true);if(a!=null)return a.l;return null}
function Jh(){var a=Z().Aa;if(a)return a.Eb;return 0}function Kh(){var a=Z().Aa;if(a)return a.Fb;return 0}function Lh(){var a=Z().Aa;if(a!=null&&a.S)return a.S.Mb();return 0}function Mh(){var a=Z().Aa;if(a!=null&&a.S)return a.S.Lb();return 0}function Nh(){}function Oh(){}function Ph(a){var b=Z().Aa;if(b!=null)return kc(b,a,true);return false}function Qh(a){var b=n.Rd;a=$d(b,a);a!=null&&Jc(b,a,false,1)}function Rh(a){Lc(n.Rd,a)}
function Sh(a){a=Sb(a,true,n.Da.qb);if(a==null)return null;if(a.cc==0)return Tb(a);if(a.cc==1)return Xg(a);if(a.cc==2)return Q(a);return null}function Th(a,b){var c=n.Da.qb;a=Sb(a,true,c);if(a!=null){typeof b=="number"?Dc(a,b):Cc(a,b);Fc(a,c)}}function Uh(a,b){var c=Z().Aa;c&&$e(c,a,b)}function Vh(){return null}function Wh(){}function Xh(){return"webgl"}function Yh(a,b){var c=n.Da.qb;if(c!=null){if(b==null)b=c.La;if(a>=0&&a<n.Da.xg.length){a=n.Da.xg[a];a!=null&&a.execute(b)}}}
function Zh(a){ma(n.na,a)}function $h(){}function ai(a,b){n.Da.$i!=null&&ch(n.Da.$i,a,b)}function bi(a,b){++n.Da.Im;var c=n.Da.Im;a=new na(a);var d=n.Da.Nn,e={};e.Xp=a;e.id=c;d.push(e);a.load(function(f){b&&b(f);for(f=0;f<d.length;++f)if(d[f].id==c){d.splice(f,1);break}});return c}function ci(a){for(var b=n.Da.Nn,c=0;c<b.length;++c)if(b[c].id==a){b[c].Xp.abort();b.splice(c,1);break}}
function di(a,b,c,d){var e=Z(),f=e.Aa.S;if(f==null)return-1;c=f.fb[c];a=Ud(f,a,b,c.Kn,c.Ln,c.Jn);if(a!=-1){if(d!=null)e.kn["_"+a]=d;if(!e.jn){e.jn=true;e.kl=f.Hh;f.Hh=function(g){e.kl&&e.kl();var i=e.kn["_"+g];if(i!=null){e.Cm=g;i()}}}}return a}function ei(a,b,c,d,e,f){var g=Z(),i=g.Aa.S;if(i!=null){a=i.Z;g=Vd(i,g.Cm);b=a.getUniformLocation(g,b);a.uniform4f(b,c,d,e,f)}}
function fi(a,b,c){if(a){var d=N(a,"gameai");if(d)if(b=="cancel"){d.Ic=0;d.ac(a,0)}else if(b=="moveto"){b=new s(0,0,0);if(c!=null&&typeof c.x!="undefined"){b.c=c.x;b.b=c.y;b.d=c.z}Vg(d,a,b,O(a),q())}else b=="attack"&&Ug(d,a,c,O(c),O(a),q())}};function he(){this.fh=-1;this.Po="";this.Hb=[];this.Cp=2;this.yn=false;this.Eq=320;this.Dq=200;this.Ol=function(a){this.Hb.push(a)};this.Ig=function(){if(this.fh<0||this.fh>=this.Hb.length)return null;return this.Hb[this.fh]};this.Bo=function(a){for(var b=0;b<this.Hb.length;++b)if(this.Hb[b]===a){this.fh=b;return}}};n.Gp=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);
n.Hp=function(a){var b,c,d,e,f,g=n.Gp;e=a.length;d=0;for(f="";d<e;){do b=g[a.charCodeAt(d++)&255];while(d<e&&b==-1);if(b==-1)break;do c=g[a.charCodeAt(d++)&255];while(d<e&&c==-1);if(c==-1)break;f+=String.fromCharCode(b<<2|(c&48)>>4);do{b=a.charCodeAt(d++)&255;if(b==61)return f;b=g[b]}while(d<e&&b==-1);if(b==-1)break;f+=String.fromCharCode((c&15)<<4|(b&60)>>2);do{c=a.charCodeAt(d++)&255;if(c==61)return f;c=g[c]}while(d<e&&c==-1);if(c==-1)break;f+=String.fromCharCode((b&3)<<6|c)}return f};function gi(){}l=gi.prototype;l.Gf=aa();l.Jg=function(a,b,c){this.Gf(b,c)};
l.Hg=function(a,b,c,d,e){if(!a||!b)return null;if(this.xa!=null&&e&&this.xa.V==false)return null;var f=new y;f.C=a.e();f.M=a.e();z(f,b);e=[];this.Jg(f,null,e);f=b.substract(a);f.normalize();for(var g,i=9.999999999E8,j=za(b.substract(a)),m=Math.min(a.c,b.c),o=Math.max(a.c,b.c),p=Math.min(a.b,b.b),h=Math.max(a.b,b.b),w=Math.min(a.d,b.d),t=Math.max(a.d,b.d),L=null,A=0;A<e.length;++A){var u=e[A];if(!(c&&!cb(db(u),f)))if(!(m>u.T.c&&m>u.ca.c&&m>u.da.c))if(!(o<u.T.c&&o<u.ca.c&&o<u.da.c))if(!(p>u.T.b&&p>
u.ca.b&&p>u.da.b))if(!(h<u.T.b&&h<u.ca.b&&h<u.da.b))if(!(w>u.T.d&&w>u.ca.d&&w>u.da.d))if(!(t<u.T.d&&t<u.ca.d&&t<u.da.d))if(!(ya(a,u.T)>=i&&ya(a,u.ca)>=i&&ya(a,u.da)>=i))if(g=u.Yl(a,f)){var H=ya(g,a),M=ya(g,b);if(H<j&&M<j&&H<i){i=H;d&&u.Ca(d);L=g}}}if(L)return L.e();return null};l.fk=k(null);l.Bi=aa();l.h=k(null);
function ng(a,b,c){if(a){this.xa=b;this.F=[];if(a!=null)for(b=0;b<a.wa.length;++b){var d=a.wa[b];if(d)if(!(c!=null&&d.O&&d.O.i==c))for(var e=d.ea.length,f=0;f<e;f+=3)this.F.push(new C(d.m[d.ea[f]].f,d.m[d.ea[f+1]].f,d.m[d.ea[f+2]].f))}}}ng.prototype=new gi;
ng.prototype.Gf=function(a,b){if(this.xa.$){a=a?E(a,this.xa.$):this.xa.$;var c;if(gb(a))for(c=0;c<this.F.length;++c)b.push(this.F[c]);else if(hb(a))for(c=0;c<this.F.length;++c)b.push(new C(nb(a,this.F[c].T),nb(a,this.F[c].ca),nb(a,this.F[c].da)));else for(c=0;c<this.F.length;++c)b.push(new C(lb(a,this.F[c].T),lb(a,this.F[c].ca),lb(a,this.F[c].da)))}};ng.prototype.Jg=function(a,b,c){this.Gf(b,c)};ng.prototype.fk=ea("xa");ng.prototype.h=function(a){var b=new ng(null,a);b.xa=a;b.F=this.F;return b};
function og(a,b){if(b){this.xa=b;this.F=[];if(a!=null){a=Ta(a);this.F.push(new C(a[3],a[0],a[2]));this.F.push(new C(a[3],a[1],a[0]));this.F.push(new C(a[3],a[2],a[7]));this.F.push(new C(a[7],a[2],a[6]));this.F.push(new C(a[7],a[6],a[4]));this.F.push(new C(a[5],a[7],a[4]));this.F.push(new C(a[5],a[4],a[0]));this.F.push(new C(a[5],a[0],a[1]));this.F.push(new C(a[1],a[3],a[7]));this.F.push(new C(a[1],a[7],a[5]));this.F.push(new C(a[0],a[6],a[2]));this.F.push(new C(a[0],a[4],a[6]))}}}og.prototype=new ng;
og.prototype.h=function(a){var b=new og(null,a);b.xa=a;b.F=this.F;return b};function fg(){this.Pc=[];this.el=null}fg.prototype=new gi;fg.prototype.Gf=function(a,b){for(var c=this.el,d=0;d<this.Pc.length;++d){var e=this.Pc[d];c!=null&&c==e.fk()||e.Gf(a,b)}};fg.prototype.Jg=function(a,b,c){for(var d=this.el,e=0;e<this.Pc.length;++e){var f=this.Pc[e];d!=null&&d==f.fk()||f.Jg(a,b,c)}};function Yc(a,b){a.Pc.push(b)}
function He(a,b){for(var c=0;c<a.Pc.length;)if(a.Pc[c]===b){a.Pc.splice(c,1);return}else++c}fg.prototype.clear=function(){this.Pc=[]};fg.prototype.Hg=function(a,b,c,d,e){var f=9.999999999E8,g=null,i=null;if(d)i=new C;for(var j=0;j<this.Pc.length;++j){var m=this.Pc[j].Hg(a,b,c,i,e);if(m!=null){var o=ya(m,a);if(o<f){g=m.e();f=o;d&&i.Ca(d)}}}return g};fg.prototype.Bi=ca("el");n.yl=function(){this.F=[];this.g=new y;this.fd=[]};
function gg(a,b,c,d){this.Uo=this.To=0;this.Rm=c==null?64:c;if(a){this.xa=b;this.qe=new n.yl;this.F=[];for(b=0;b<a.wa.length;++b)if(c=a.wa[b])if(!(d!=null&&c.O&&c.O.i==d))for(var e=c.ea.length,f=0;f<e;f+=3){var g=new C(c.m[c.ea[f]].f,c.m[c.ea[f+1]].f,c.m[c.ea[f+2]].f);this.qe.F.push(g);this.F.push(g)}hi(this,this.qe)}}gg.prototype=new gi;
function hi(a,b){++a.To;b.g.C=b.F[0].T.e();b.g.M=b.g.C.e();for(var c,d=b.F.length,e=0;e<d;++e){c=b.F[e];z(b.g,c.T);z(b.g,c.ca);z(b.g,c.da)}if(!b.g.C.D(b.g.M)&&d>a.Rm){d=Ra(b.g);for(var f=Ta(b.g),g=new y,i=0;i<8;++i){var j=[];g.C=d.e();g.M=d.e();z(g,f[i]);b.fd.push(new n.yl);for(e=0;e<b.F.length;++e){c=b.F[e];g.Kg(c.T)&&g.Kg(c.ca)&&g.Kg(c.da)?b.fd[i].F.push(c):j.push(c)}b.F=j;if(b.fd[i].F.length==0)b.fd[i]=null;else hi(a,b.fd[i])}}a.Uo+=b.F.length}
gg.prototype.Gf=function(a,b){ng.prototype.Gf.call(this,a,b)};gg.prototype.Jg=function(a,b,c){if(this.xa.$){var d=new D;a=a.e();if(this.xa){d=this.xa.$.e();qb(d);zb(d,a)}var e=d;e.p=1;e.u=0;e.s=0;e.G=0;e.v=0;e.q=1;e.t=0;e.H=0;e.w=0;e.A=0;e.n=1;e.I=0;e.J=0;e.K=0;e.B=0;e.L=1;e.Oa=true;if(b)d=b.e();if(this.xa)d=E(d,this.xa.$);this.qe&&ii(this,this.qe,c,a,d)}};
function ii(a,b,c,d,e){if(Va(b.g,d)){var f=b.F.length,g;if(gb(e))for(g=0;g<f;++g)c.push(b.F[g]);else if(hb(e))for(g=0;g<f;++g)c.push(new C(nb(e,b.F[g].T),nb(e,b.F[g].ca),nb(e,b.F[g].da)));else for(g=0;g<f;++g)c.push(new C(lb(e,b.F[g].T),lb(e,b.F[g].ca),lb(e,b.F[g].da)));for(g=0;g<b.fd.length;++g){f=b.fd[g];f!=null&&ii(a,f,c,d,e)}}}gg.prototype.fk=ea("xa");function ji(a,b){var c=new n.yl;c.F=b.F;c.g=b.g.e();for(var d=0;d<b.fd.length;++d){var e=b.fd[d],f=null;if(e)f=ji(a,e);c.fd.push(f)}return c}
gg.prototype.h=function(a){var b=new gg(null,a,this.Rm);b.xa=a;b.F=this.F;b.qe=null;if(this.qe)b.qe=ji(this,this.qe);return b};(function(a){function b(){this.list=this.next=null}function c(){this.od=this.Uc=this.Fc=0;this.If=null}function d(K,T,U,r,v,ba){this.Me=16;this.ep=288;this.status=0;this.He=null;this.Td=0;var R=new Array(this.Me+1),pb,ia,Ga,I,B,F,Oa,Pa=new Array(this.Me+1),Aa,sa,oa,ja=new c,Ib=new Array(this.Me);I=new Array(this.ep);var pa,Xa=new Array(this.Me+1),ac,Ya,bc;bc=this.He=null;for(B=0;B<R.length;B++)R[B]=0;for(B=0;B<Pa.length;B++)Pa[B]=0;for(B=0;B<Ib.length;B++)Ib[B]=null;for(B=0;B<I.length;B++)I[B]=0;
for(B=0;B<Xa.length;B++)Xa[B]=0;pb=T>256?K[256]:this.Me;Aa=K;sa=0;B=T;do{R[Aa[sa]]++;sa++}while(--B>0);if(R[0]==T){this.He=null;this.status=this.Td=0}else{for(F=1;F<=this.Me;F++)if(R[F]!=0)break;Oa=F;if(ba<F)ba=F;for(B=this.Me;B!=0;B--)if(R[B]!=0)break;Ga=B;if(ba>B)ba=B;for(ac=1<<F;F<B;F++,ac<<=1)if((ac-=R[F])<0){this.status=2;this.Td=ba;return}if((ac-=R[B])<0){this.status=2;this.Td=ba}else{R[B]+=ac;Xa[1]=F=0;Aa=R;sa=1;for(oa=2;--B>0;)Xa[oa++]=F+=Aa[sa++];Aa=K;B=sa=0;do if((F=Aa[sa++])!=0)I[Xa[F]++]=
B;while(++B<T);T=Xa[Ga];Xa[0]=B=0;Aa=I;sa=0;I=-1;pa=Pa[0]=0;oa=null;for(Ya=0;Oa<=Ga;Oa++)for(K=R[Oa];K-- >0;){for(;Oa>pa+Pa[1+I];){pa+=Pa[1+I];I++;Ya=(Ya=Ga-pa)>ba?ba:Ya;if((ia=1<<(F=Oa-pa))>K+1){ia-=K+1;for(oa=Oa;++F<Ya;){if((ia<<=1)<=R[++oa])break;ia-=R[oa]}}if(pa+F>pb&&pa<pb)F=pb-pa;Ya=1<<F;Pa[1+I]=F;oa=new Array(Ya);for(ia=0;ia<Ya;ia++)oa[ia]=new c;bc=bc==null?(this.He=new b):(bc.next=new b);bc.next=null;bc.list=oa;Ib[I]=oa;if(I>0){Xa[I]=B;ja.Uc=Pa[I];ja.Fc=16+F;ja.If=oa;F=(B&(1<<pa)-1)>>pa-Pa[I];
Ib[I-1][F].Fc=ja.Fc;Ib[I-1][F].Uc=ja.Uc;Ib[I-1][F].od=ja.od;Ib[I-1][F].If=ja.If}}ja.Uc=Oa-pa;if(sa>=T)ja.Fc=99;else if(Aa[sa]<U){ja.Fc=Aa[sa]<256?16:15;ja.od=Aa[sa++]}else{ja.Fc=v[Aa[sa]-U];ja.od=r[Aa[sa++]-U]}ia=1<<Oa-pa;for(F=B>>pa;F<Ya;F+=ia){oa[F].Fc=ja.Fc;oa[F].Uc=ja.Uc;oa[F].od=ja.od;oa[F].If=ja.If}for(F=1<<Oa-1;(B&F)!=0;F>>=1)B^=F;for(B^=F;(B&(1<<pa)-1)!=Xa[I];){pa-=Pa[I];I--}}this.Td=Pa[1];this.status=ac!=0&&Ga!=1?1:0}}}function e(){if(Kd.length==re)return-1;return Kd.charCodeAt(re++)&255}
function f(K){for(;da<K;){X|=e()<<da;da+=8}}function g(K){return X&ki[K]}function i(K){X>>=K;da-=K}function j(K,T,U){var r,v,ba;if(U==0)return 0;for(ba=0;;){f(Ba);v=Za.list[g(Ba)];for(r=v.Fc;r>16;){if(r==99)return-1;i(v.Uc);r-=16;f(r);v=v.If[g(r)];r=v.Fc}i(v.Uc);if(r==16){u&=h-1;K[T+ba++]=A[u++]=v.od}else{if(r==15)break;f(r);qa=v.od+g(r);i(r);f(Jb);v=se.list[g(Jb)];for(r=v.Fc;r>16;){if(r==99)return-1;i(v.Uc);r-=16;f(r);v=v.If[g(r)];r=v.Fc}i(v.Uc);f(r);cc=u-v.od-g(r);for(i(r);qa>0&&ba<U;){qa--;cc&=
h-1;u&=h-1;K[T+ba++]=A[u++]=A[cc++]}}if(ba==U)return U}$a=-1;return ba}function m(K,T,U){if(H==null){var r,v=new Array(288);for(r=0;r<144;r++)v[r]=8;for(;r<256;r++)v[r]=9;for(;r<280;r++)v[r]=7;for(;r<288;r++)v[r]=8;J=7;r=new d(v,288,257,hg,ig,J);if(r.status!=0){alert("HufBuild error: "+r.status);return-1}H=r.He;J=r.Td;for(r=0;r<30;r++)v[r]=5;zip_fixed_bd=5;r=new d(v,30,0,jg,kg,zip_fixed_bd);if(r.status>1){H=null;alert("HufBuild error: "+r.status);return-1}M=r.He;zip_fixed_bd=r.Td}Za=H;se=M;Ba=J;Jb=
zip_fixed_bd;return j(K,T,U)}function o(K,T,U){var r,v,ba,R,pb,ia,Ga,I=new Array(316);for(r=0;r<I.length;r++)I[r]=0;f(5);ia=257+g(5);i(5);f(5);Ga=1+g(5);i(5);f(4);r=4+g(4);i(4);if(ia>286||Ga>30)return-1;for(v=0;v<r;v++){f(3);I[lg[v]]=g(3);i(3)}for(;v<19;v++)I[lg[v]]=0;Ba=7;v=new d(I,19,19,null,null,Ba);if(v.status!=0)return-1;Za=v.He;Ba=v.Td;R=ia+Ga;for(r=ba=0;r<R;){f(Ba);pb=Za.list[g(Ba)];v=pb.Uc;i(v);v=pb.od;if(v<16)I[r++]=ba=v;else if(v==16){f(2);v=3+g(2);i(2);if(r+v>R)return-1;for(;v-- >0;)I[r++]=
ba}else{if(v==17){f(3);v=3+g(3);i(3)}else{f(7);v=11+g(7);i(7)}if(r+v>R)return-1;for(;v-- >0;)I[r++]=0;ba=0}}Ba=t;v=new d(I,ia,257,hg,ig,Ba);if(Ba==0)v.status=1;if(v.status!=0)return-1;Za=v.He;Ba=v.Td;for(r=0;r<Ga;r++)I[r]=I[r+ia];Jb=L;v=new d(I,Ga,0,jg,kg,Jb);se=v.He;Jb=v.Td;if(Jb==0&&ia>257)return-1;if(v.status!=0)return-1;return j(K,T,U)}function p(K,T,U){var r,v;for(r=0;r<U;){if(uc&&$a==-1)return r;if(qa>0){if($a!=w)for(;qa>0&&r<U;){qa--;cc&=h-1;u&=h-1;K[T+r++]=A[u++]=A[cc++]}else{for(;qa>0&&r<
U;){qa--;u&=h-1;f(8);K[T+r++]=A[u++]=g(8);i(8)}if(qa==0)$a=-1}if(r==U)return r}if($a==-1){if(uc)break;f(1);if(g(1)!=0)uc=true;i(1);f(2);$a=g(2);i(2);Za=null;qa=0}switch($a){case 0:v=T+r;var ba=U-r,R=undefined;R=da&7;i(R);f(16);R=g(16);i(16);f(16);if(R!=(~X&65535))v=-1;else{i(16);qa=R;for(R=0;qa>0&&R<ba;){qa--;u&=h-1;f(8);K[v+R++]=A[u++]=g(8);i(8)}if(qa==0)$a=-1;v=R}break;case 1:v=Za!=null?j(K,T+r,U-r):m(K,T+r,U-r);break;case 2:v=Za!=null?j(K,T+r,U-r):o(K,T+r,U-r);break;default:v=-1;break}if(v==-1){if(uc)return 0;
return-1}r+=v}return r}var h=32768,w=0,t=9,L=6,A,u,H=null,M,J,X,da,$a,uc,qa,cc,Za,se,Ba,Jb,Kd,re,ki=new Array(0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535),hg=new Array(3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0),ig=new Array(0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99),jg=new Array(1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577),kg=new Array(0,
0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13),lg=new Array(16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15),mg={};a.JSInflate=mg;mg.Vp=function(K){var T,U,r;if(A==null)A=new Array(2*h);da=X=u=0;$a=-1;uc=false;qa=cc=0;Za=null;Kd=K;re=0;T=new Array(1024);for(K="";(U=p(T,0,T.length))>0;)for(r=0;r<U;r++)K+=String.fromCharCode(T[r]);Kd=null;return K}})(this);jsdummyfunc=void 0;window.startCopperLichtFromFile=function(a,b,c,d,e){a=new ge(a,true,null,false,c,d,e);a.load(b);return a};window.CL3D=n;window.ccbGetSceneNodeFromId=gh;window.ccbCloneSceneNode=hh;window.ccbGetActiveCamera=ih;window.ccbSetActiveCamera=jh;window.ccbGetChildSceneNode=kh;window.ccbGetRootSceneNode=lh;window.ccbGetSceneNodeChildCount=mh;window.ccbGetSceneNodeFromName=nh;window.ccbRemoveSceneNode=oh;window.ccbSetSceneNodeParent=ph;window.ccbGetSceneNodeMaterialCount=qh;
window.ccbGetSceneNodeMaterialProperty=rh;window.ccbSetSceneNodeMaterialProperty=th;window.ccbSetSceneNodeProperty=uh;window.ccbGetSceneNodeProperty=vh;window.ccbSetSceneNodePositionWithoutCollision=wh;window.ccbRegisterOnFrameEvent=xh;window.ccbDrawColoredRectangle=zh;window.ccbDrawTextureRectangle=Ah;window.ccbDrawTextureRectangleWithAlpha=Bh;window.ccbGet3DPosFrom2DPos=Ch;window.ccbGet2DPosFrom3DPos=Dh;window.ccbGetCollisionPointOfWorldWithLine=Eh;window.ccbEndProgram=Gh;
window.ccbDoesLineCollideWithBoundingBoxOfSceneNode=Fh;window.ccbLoadTexture=Ih;window.ccbGetMousePosX=Jh;window.ccbGetMousePosY=Kh;window.ccbGetScreenWidth=Lh;window.ccbGetScreenHeight=Mh;window.ccbSetCloseOnEscapePressed=Nh;window.ccbSetCursorVisible=Oh;window.ccbSwitchToScene=Ph;window.ccbPlaySound=Qh;window.ccbStopSound=Rh;window.ccbGetCopperCubeVariable=Sh;window.ccbSetCopperCubeVariable=Th;window.ccbReadFileContent=Vh;window.ccbWriteFileContent=Wh;window.ccbGetPlatform=Xh;
window.ccbInvokeAction=Yh;window.ccbCleanMemory=sh;window.print=Zh;window.system=$h;window.ccbRegisterBehaviorEventReceiver=ai;window.ccbUnregisterOnFrameEvent=yh;window.ccbSwitchToFullscreen=Uh;window.ccbDoHTTPRequest=bi;window.ccbCancelHTTPRequest=ci;window.ccbCreateMaterial=di;window.ccbSetShaderConstant=ei;window.ccbSetPhysicsVelocity=Hh;window.ccbUpdatePhysicsGeometry=Hh;window.ccbAICommand=fi;
